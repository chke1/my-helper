import{j as B,ag as v,v as R,P as X,Q as r,y as g,W as w,U as C,a3 as y}from"./main/chunk-vue-32374f64.js";import{_ as E,o as I}from"./index-4f08acb7.js";import"./main/chunk-element-plus-b8cc1db0.js";import"./main/chunk-lodash-es-21c98b27.js";import"./main/chunk-vue-router-c3f0a4ff.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";const Y={class:"canvas-handle"},b=["onMousemove","onTouchmove"],P={__name:"index",setup(S){let t={},i={},f=devicePixelRatio*1||1,c=!1,l=0,d=0;const u=e=>{let o=0;if(e.offsetX){const{offsetX:s,offsetY:a}=e;o=[s,a]}else{const{top:s,left:a}=t.value.getBoundingClientRect(),n=e.touches[0].clientX-a,x=e.touches[0].clientY-s;o=[n,x]}return o};function M(e,o,s,a,n){n.beginPath(),n.globalAlpha=1,n.lineWidth=2,n.strokeStyle="#000",n.lineJoin="round",n.lineCap="round",n.moveTo(e,o),n.lineTo(s,a),n.closePath(),n.stroke()}const _=e=>{[l,d]=u(e),c=!0},h=e=>{if(c){const[o,s]=u(e);M(l,d,o,s,i),l=o,d=s}},p=()=>{c&&(c=!1)},m=()=>{const{width:e,height:o}=t.getBoundingClientRect();t.width=e*f,t.height=o*f,t.style.width=e+"px",t.style.height=o+"px",i.fillStyle="#fff",i.clearRect(0,0,t.width,t.height),i.fillRect(0,0,t.width,t.height)},T=()=>{const e=t.toDataURL();I(e,"签名")},k=()=>{m()};return B(()=>{t=document.getElementById("signatureID"),i=t.getContext("2d"),m()}),(e,o)=>{const s=v("el-button"),a=v("c-card");return R(),X(a,{isAffix:""},{default:r(()=>[g("div",Y,[w(s,{onClick:T},{default:r(()=>[C("保存图片")]),_:1}),w(s,{onClick:k},{default:r(()=>[C("清空签名")]),_:1})]),g("canvas",{class:"canvas",id:"signatureID",onMousedown:_,onMousemove:y(h,["stop","prevent"]),onMouseup:p,onTouchstart:_,onTouchmove:y(h,["stop","prevent"]),onTouchend:p},null,40,b)]),_:1})}}},J=E(P,[["__scopeId","data-v-5c261823"]]);export{J as default};
