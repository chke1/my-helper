import{d as O,ag as f,v as o,x as w,a8 as U,F as A,P as k,Q as l,S as V,u as e,T as $,y as a,V as q,W as t,U as L,a as I,c as T,w as ee,n as K,j as Q,K as te,_ as ne,J as se,G as le,aw as W,ax as Y,aa as oe,Y as ae,aB as ce}from"./main/chunk-vue-32374f64.js";import{_ as z,a as ue,u as P,s as G,b as re,c as ie,f as de,e as _e,d as me,g as X,h as pe,i as fe,p as he,j as ve,T as be,U as xe,r as ge,k as ke}from"./index-c4df5bc3.js";import{i as J}from"./menu-icons-d4b4b821.js";import{b as M,u as B}from"./main/chunk-vue-router-c3f0a4ff.js";import{A as ye}from"./index-029bcec0.js";import{T as Se}from"./theme-switch-bc2e33e7.js";import{u as Fe}from"./index-43ed2021.js";import{u as we}from"./index-ad24bafc.js";import"./main/chunk-element-plus-b8cc1db0.js";import"./main/chunk-lodash-es-21c98b27.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";const Re=O({name:"menu-item"}),Ce=Object.assign(Re,{props:{menus:{type:Array,default:()=>[]}},setup(h){return(r,_)=>{const b=f("el-icon"),v=f("menu-item",!0),i=f("el-sub-menu"),x=f("el-menu-item");return o(!0),w(A,null,U(h.menus,c=>(o(),w(A,{key:c.path},[c.children&&c.children.length?(o(),k(i,{index:c.path,key:c.path},{title:l(()=>[c.meta.icon?(o(),k(b,{key:0,size:16},{default:l(()=>[(o(),k(V(e(J)[c.name])))]),_:2},1024)):$("",!0),a("span",null,q(c.meta.title),1)]),default:l(()=>[t(v,{menus:c.children},null,8,["menus"])]),_:2},1032,["index"])):(o(),k(x,{index:c.path,key:c.path},{title:l(()=>[L(q(c.meta.title),1)]),default:l(()=>[c.meta.icon?(o(),k(b,{key:0,size:16},{default:l(()=>[(o(),k(V(e(J)[c.name])))]),_:2},1024)):$("",!0)]),_:2},1032,["index"]))],64))),128)}}});const Ee={class:"c-menu"},Te={class:"logo"},Ie={class:"logo-icon"},$e=["innerHTML"],qe={key:0,id:"menuId"},Ae=O({name:"c-menu"}),ze=Object.assign(Ae,{setup(h){const r=ue(),_=P(),b=M(),v=B(),i=I(),x=I(),c=I(""),C=T(()=>r.menuList),g=T(()=>{if(b.meta.menu==!1){let u=b.meta.currentCrumb.findLastIndex(s=>s.menu!==!1);return b.meta.currentCrumb[u].path}else return b.path}),m=T(()=>!_.isMenuExpand),S=(u,s)=>{if(!u)return s([]);let n=[],d=p=>{for(const y of p)if(d(y.children||[]),y.meta.title.indexOf(u)!=-1){let R=`<span class='is-primary-text'>${u}</span>`,E=y.meta.title.replace(new RegExp(u,"g"),R);n.push({value:y.meta.title,rich:E,path:y.path})}};d(r.menuList),s(n)},F=u=>{v.push({path:u.path})};return ee(()=>_.menuExpandData,(u,s)=>{if(s.length>0){let n=u.length>s.length;for(let d of n?u:s)(n?s:u).includes(d)||K(()=>{n?i.value.open(d):i.value.close(d)})}}),Q(()=>{K(()=>{const u=document.querySelector(".el-menu-item.is-active"),s=document.getElementById("menuId"),{top:n}=(s==null?void 0:s.getBoundingClientRect())||{},{top:d}=(u==null?void 0:u.getBoundingClientRect())||{},p=d-n;x.value.setScrollTop(p)})}),(u,s)=>{const n=f("el-icon"),d=f("el-autocomplete"),p=f("el-menu"),y=f("el-scrollbar");return o(),w("div",Ee,[a("div",Te,[a("div",Ie,q(e(_).isMenuExpand?"logo":""),1)]),a("div",{class:te(["autocomplete",!e(_).isMenuExpand&&"autocomplete-collapse"])},[e(_).isMenuExpand?(o(),k(d,{key:1,modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=R=>c.value=R),placeholder:"搜索","fetch-suggestions":S,onSelect:F},{prefix:l(()=>[t(n,null,{default:l(()=>[t(e(G))]),_:1})]),default:l(({item:R})=>[a("div",{innerHTML:R.rich},null,8,$e)]),_:1},8,["modelValue"])):(o(),k(n,{key:0},{default:l(()=>[t(e(G))]),_:1}))],2),t(y,{ref_key:"scrollbarRef",ref:x,class:"scrollbar-warp"},{default:l(()=>[e(C).length?(o(),w("div",qe,[t(p,{ref_key:"menuRef",ref:i,router:"","default-active":e(g),"default-openeds":e(_).menuExpandData,collapse:e(m)},{default:l(()=>[t(Ce,{menus:e(C)},null,8,["menus"])]),_:1},8,["default-active","default-openeds","collapse"])])):$("",!0)]),_:1},512)])}}}),Me=z(ze,[["__scopeId","data-v-d26891ef"]]);function Z(h,r,_){Q(()=>h.addEventListener(r,_)),ne(()=>h.removeEventListener(r,_))}const D=h=>(W("data-v-371f76f3"),h=h(),Y(),h),Ve={class:"header"},Le={class:"header-left"},Pe={key:0,class:"header-left__crumb"},Be={class:"header-right"},Oe={class:"header-right-theme"},Ue={class:"header-right-setting"},De={class:"header-right-screen"},je={class:"header-right-userinfo"},Ne={class:"header-right-userinfo__wrap"},He=["src"],Ke={class:"header-right-userinfo__list"},Ge=D(()=>a("span",null,"个人中心",-1)),Je=D(()=>a("span",null,"项目地址",-1)),Qe=D(()=>a("span",null,"退出登录",-1)),We={__name:"index",setup(h){const r=P(),_=re(),b=ie(),v=B();M();const i=I(!1),x=Fe({storageKey:be,valueDark:"dark",valueLight:"light"});Z(document,"fullscreenchange",()=>{i.value=!i.value});const c=()=>{let n=r.isMenuExpand==0?1:0;r.setSingleState("isMenuExpand",n)},C=()=>{b.openModal("setting-drawer")},g=we(x),m=n=>{const{x:d,y:p}=n;document.documentElement.style.setProperty("--dark-clip-x",d+"px"),document.documentElement.style.setProperty("--dark-clip-y",p+"px"),document.startViewTransition?document.startViewTransition(()=>{document.documentElement.classList.toggle("dark")}):document.documentElement.classList.toggle("dark")},S=()=>{i.value?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():document.body.requestFullscreen?document.body.requestFullscreen():document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.msRequestFullscreen&&document.body.msRequestFullscreen()},F=()=>{v.push("/system/user")},u=()=>{window.open("https://gitee.com/ch-ke/my-helper","_blank")},s=()=>{localStorage.removeItem(xe),ge(),v.push("/")};return(n,d)=>{const p=f("el-icon"),y=f("c-popover"),R=f("c-drawer");return o(),w(A,null,[a("header",Ve,[a("div",Le,[t(p,{onClick:d[0]||(d[0]=E=>c()),class:"header-left__icon"},{default:l(()=>[(o(),k(V(e(r).isMenuExpand?e(de):e(_e))))]),_:1}),n.$slots.breadcrumb?(o(),w("div",Pe,[se(n.$slots,"breadcrumb",{},void 0,!0)])):$("",!0)]),a("div",Be,[a("div",Oe,[t(Se,{modelValue:e(x),"onUpdate:modelValue":d[1]||(d[1]=E=>le(x)?x.value=E:null),onOnChange:e(g),onOnRect:m},null,8,["modelValue","onOnChange"])]),a("div",Ue,[t(p,{onClick:C,size:18},{default:l(()=>[t(e(me))]),_:1})]),a("div",De,[t(p,{onClick:S,size:18},{default:l(()=>[t(e(X))]),_:1})]),a("div",je,[t(y,{trigger:"hover","popper-style":"min-width: auto;width: auto;padding: 0"},{reference:l(()=>{var E,j,N,H;return[a("div",Ne,[a("img",{src:(j=(E=e(_))==null?void 0:E.userInfo)==null?void 0:j.avatarUrl},null,8,He),a("span",null,q(((H=(N=e(_))==null?void 0:N.userInfo)==null?void 0:H.username)??"-"),1),t(p,null,{default:l(()=>[t(e(pe))]),_:1})])]}),default:l(()=>[a("ul",Ke,[a("li",{onClick:F},[t(p,{size:14},{default:l(()=>[t(e(fe))]),_:1}),Ge]),a("li",{onClick:u},[t(p,{size:14},{default:l(()=>[t(e(he))]),_:1}),Je]),a("li",{onClick:s},[t(p,{size:14},{default:l(()=>[t(e(ve))]),_:1}),Qe])])]),_:1})])])]),t(R,{title:"设置",size:520,name:"setting-drawer"},{default:l(()=>[t(ye)]),_:1})],64)}}},Ye=z(We,[["__scopeId","data-v-371f76f3"]]);const Xe=h=>(W("data-v-8c2821a7"),h=h(),Y(),h),Ze=Xe(()=>a("span",null,"学习使用，联系方式：2735238097@qq.com",-1)),et={__name:"index",setup(h){const r=window.version;return(_,b)=>(o(),w("footer",null,[Ze,a("span",null,"当前版本："+q(e(r)),1)]))}},tt=z(et,[["__scopeId","data-v-8c2821a7"]]);const nt={class:"tabs"},st={class:"tabs-left"},lt={key:0,class:"tabs-right"},ot=O({name:"tabs"}),at=Object.assign(ot,{setup(h){const r=M(),_=B(),b=P(),v=I(r.fullPath),i=T(()=>b.keepAliveInclude),x=m=>{b.setSingleState("keepAliveInclude",m||i.value)},c=m=>{_.push((m==null?void 0:m.paneName)||v.value)},C=m=>{if(i.value.length<=1)return;let S=i.value.filter(F=>F.fullPath!==m);if(v.value==m){let F=i.value.findIndex(u=>u.fullPath==m);v.value=i.value[F-1].fullPath,c()}x(S)},g=()=>{let m=i.value.filter(S=>S.fullPath==v.value);x(m)};return _.afterEach(m=>v.value=m.fullPath),(m,S)=>{const F=f("el-tab-pane"),u=f("el-tabs"),s=f("el-button");return o(),w("div",nt,[a("div",st,[t(u,{modelValue:v.value,"onUpdate:modelValue":S[0]||(S[0]=n=>v.value=n),type:"card",closable:e(i).length>1,onTabClick:c,onTabRemove:C},{default:l(()=>[(o(!0),w(A,null,U(e(i),n=>(o(),k(F,{label:n.label,key:n.fullPath,name:n.fullPath},null,8,["label","name"]))),128))]),_:1},8,["modelValue","closable"])]),e(i).length>1?(o(),w("div",lt,[t(s,{type:"primary",text:"",onClick:g},{default:l(()=>[L("清空")]),_:1})])):$("",!0)])}}}),ct=z(at,[["__scopeId","data-v-9b508b55"]]),ut={__name:"index",setup(h){const r=M();return(_,b)=>{const v=f("el-breadcrumb-item"),i=f("el-breadcrumb");return o(),k(i,{class:"c-breadcrumb"},{default:l(()=>[(o(!0),w(A,null,U(e(r).meta.currentCrumb,(x,c)=>(o(),k(v,{key:c},{default:l(()=>[L(q(x.title),1)]),_:2},1024))),128))]),_:1})}}};const rt={class:"layout"},it={class:"article"},dt={key:0,class:"article-tabs"},_t={__name:"index",setup(h){const r=P(),_=B(),b=M(),v=T(()=>r.keepAliveInclude.filter(n=>n.keepAlive).map(n=>n.name)||[]),i=T(()=>r.keepAliveIncludeMax||0),x=T(()=>!!r.isTabs),c=T(()=>!!r.isBreadcrumb),C=I(),g=I(),m=()=>{_.back()},S=s=>{var y,R;let n=r.keepAliveInclude,d=n.findIndex(E=>E.path==s.path),p={label:(y=s.meta)==null?void 0:y.title,path:s.path,fullPath:s.fullPath,name:s.name,keepAlive:!!((R=s.meta)!=null&&R.keepAlive)};d==-1?n.push(p):n[d]=p,r.setSingleState("keepAliveInclude",n)};S(b);const F=I(!1);Z(document,"fullscreenchange",()=>{F.value=!F.value});const u=()=>{F.value?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():g.value.requestFullscreen?g.value.requestFullscreen():g.value.webkitRequestFullScreen?g.value.webkitRequestFullScreen():g.value.mozRequestFullScreen?g.value.mozRequestFullScreen():g.value.msRequestFullscreen&&g.value.msRequestFullscreen()};return _.afterEach(s=>{C.value&&C.value.scrollTo({top:0,left:0,behavior:"smooth"}),s.path!="/login"&&s.path!="/"&&S(s)}),(s,n)=>{const d=f("el-button"),p=f("el-icon"),y=f("router-view");return o(),w("div",rt,[t(Me),a("div",it,[t(Ye,null,oe({_:2},[e(c)?{name:"breadcrumb",fn:l(()=>[t(ut)]),key:"0"}:void 0]),1024),e(x)?(o(),w("div",dt,[e(b).meta.menu==!1?(o(),k(d,{key:0,class:"article-tabs__back",type:"primary",text:"",icon:e(ke),onClick:m},{default:l(()=>[L(" 返回 ")]),_:1},8,["icon"])):$("",!0),t(ct),t(p,{onClick:u,size:18},{default:l(()=>[t(e(X))]),_:1})])):$("",!0),a("section",{class:"article-view",ref_key:"routerViewRef",ref:C},[t(y,null,{default:l(({Component:R})=>[t(ae,{name:`slide-${e(r).transitionSlide}`,mode:"out-in",ref_key:"mainRef",ref:g},{default:l(()=>[(o(),k(ce,{include:e(v),max:e(i)},[(o(),k(V(R)))],1032,["include","max"]))]),_:2},1032,["name"])]),_:1}),t(tt)],512)])])}}},wt=z(_t,[["__scopeId","data-v-632be0da"]]);export{wt as default};
