import{a as Oe,ag as Te,v as xe,P as Le,Q as Re,J as Xe,W as Ce,aw as Ke,ax as Qe,y as be,j as Ge,_ as Ze,r as Ve,U as Ae,V as Ie,T as Me,u as ze,K as et,x as $e,a9 as ke,n as tt}from"./main/chunk-vue-32374f64.js";import{a as rt,b as nt}from"./main/chunk-vue-virtual-scroller-2d26fe9b.js";/* empty css                             */import{e as it}from"./index-9c4a558f.js";import{_ as Ye,u as st,b as ot}from"./index-4f08acb7.js";import{c as me}from"./main/chunk-element-plus-b8cc1db0.js";import"./index-ad24bafc.js";import"./main/chunk-vue-router-c3f0a4ff.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";import"./main/chunk-lodash-es-21c98b27.js";const at="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABk1JREFUaEPtWVlsVUUY/v+59NYmJEoiEVRMEyu2d+a0lhfWGFwSQDZ9gARxwQdMhKJiIrxogGhMRCMoKIk8iEslKQ8uVVyiQAxUfKjYOzO3BSVp3I1GJCHWtNzzm6lzm+H0nHPPuW0hGCa5SdPzb98s//z/NwgX+cCLPH64BKC0grlcbhJj7C4A8ADgOudnRL53ftL3/XcKhcKvo7H6I1qB5ubmif39/csRcR4ALE4ZUDsRfZLNZtuOHTv2e0rdIfGKAXDO1yDiYwBwfaXOrd5JInpBa/1KJXZSA+CcL0HE9QAwN+DwEBF9BABHAOCU7/un+vr6ThmZmpqaCYyxCQBgfrMRcUGE/jat9ftpgKQCIITYCgCPOw5OI+IO3/df11p/l8Yx57yOMXY/Ea0DgMsd3eeUUhuS2koMQAhhZnZWyTAR7cxkMjvz+fzxpM7C5BobG28sFostiNjifO9QSs1OYjcRACEEucYQcbmUcl8SB0llPM9bRkRtrrxSqmx8ZQWEEG8AwL0lw4g4S0r5ZdLA0sh5njeTiDocnTeVUvfF2YgFIIR4GABeLBlIMiNpAo6SDaz4I0qpl6JkIwHYbPOes+dvSHtQKwVjDjgifuv4XhqVnSIBCCEOllIdIt4hpTQp8rwNz/MWENF+6/CQUuqWMOehAOwl9bJRMNlGa21S3XkfnPMdpexERGvDLrthAEx5MDAwYA6puWFPM8amjzRVVorcpFjf97+y98TJqqqqmcGyYxgAzvmjiLjNOEXEp6WUT0bkb0FEs33fn4aIe5VSh9IEKoSYS0QrGGNfI+KRfD6vwvQ9z3uKiJ6wu2G91nq7KzcMgOd5nxPRrRZAg5SyJ2jYrtIXAFDvpNfEd0NIzu+pqqq6Oayo8zyvnoi6bTwHpJS3RQJobGy81vf9H6zAUaXUzLBZcc+Ikyn2aa2XJ1kFznkbIi5zZaP2uJERQpgtPcP8zRibks/nfxyaONeI53ktRLTD/m+zUmpLBIAmRPwmEMCDWuvdCQGsRsRXA/o3aa27wvSFEJsAYLNdhXVSyp2hAIQQpqR9yO63OVprU/+EDs75a4i4yn7s6O/vX3rixIk/kgCYOnXqldls1twxg7UVEe3RWj8Q48tUsIft911KqTVRAD4AgIXWKNdaF+ICqq+vrx03btwcpdRbSQIPyggh7jl79uzhnp6e3jh9znkOEbWV+VAptSgKQN62hFAsFq/u7u7+pZLARlunoaFhciaT+dnalUqpxigAf5Vq8zNnztT09vb+M9rBVGKvtrb2svHjx/dZ3dNKqSv+twASbaFcLtdcU1NzvLOz8+9KZjStTpotVPYQmxsUAA6aQ8UYm9fV1fVT2oBc+VwuN50xdpSIIu+RNIe4bBotAbA5eauUcuNIAAghTBM/SMlE9Ruc88Rp1NwBg/QGEW3UWpsmfthw+mNzsGYopczWSz2EECYdtlt/kXcB53wDIj5rHaxRSu0KPcSWXSulzsganHO+AhHftquwV0p5d+ro/ysRhmYfERdKKUv1/znm3N7E9/3JLqs3rJhzjRJRZBfGOd9v+R1TtW6XUhquKPFw66E4/UB31q6UWuI6CSun1yLiYK0RV06bg8UYayMibg22EtEz5W7vurq66urq6ucdGuXT6urqRZ2dnQNh6APldIvWerDRCt1C5p9pGpoQEH8CQKvv+62FQsE0IkOjqanpmmKxuNoe2Gn2Q75YLM6PuvEramiM4TQtpamHMpnMJqewKwVtbnVT4/gAMAUAJrqATAFXLBa3xNVBFbWUJSeBpr5ss5LL5VYxxswMD7F3EQeiw/f93YVCYU/cgQk0PemaersKhsQdolWSElpCCAPAVLRXAcAkG6R5C/gNAEwl6RJXoRiCBBcRpadVjOUgmXuBiK1YsjcJtRgkdceM4AoSWgBQluQtC8CuRJDcHXWiK0BkDW6tJCueCIAFcQ7JO8b0ellSN/IeiMsMQbLXEF/mgcPk/jD6pUyWMZTMypAHjlgyN2gz8QqUFGOemI4CwMdE9FncExMi3g4A80s0iROQeaIa2ycmF/1F+8jngrDPrCsZY4tLbF7ctnG/IeIB3/fbs9ls6wV5Zg0Galg9IrqTiHJxD92IWEDEd112LSnoMLnUZ2AkzsZC9xKAsZjVNDb/BW8BQl5w4V56AAAAAElFTkSuQmCC";const lt=ye=>(Ke("data-v-5377b639"),ye=ye(),Qe(),ye),ut=lt(()=>be("img",{class:"is-emoji",src:at,alt:""},null,-1)),ft={__name:"emoji-popover",emits:["change"],setup(ye,{emit:_e}){const g=Oe(!1),D=C=>{_e("change",C),g.value=!1};return(C,l)=>{const p=Te("c-popover");return xe(),Le(p,{visible:g.value,"onUpdate:visible":l[0]||(l[0]=y=>g.value=y),width:"auto"},{reference:Re(()=>[Xe(C.$slots,"default",{},()=>[ut],!0)]),default:Re(()=>[Ce(it,{onChange:D})]),_:3},8,["visible"])}}},ct=Ye(ft,[["__scopeId","data-v-5377b639"]]);function Be(ye){throw new Error('Could not dynamically require "'+ye+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qe={exports:{}};(function(ye,_e){(function(g){ye.exports=g()})(function(){return function(){function g(D,C,l){function p(s,i){if(!C[s]){if(!D[s]){var r=typeof Be=="function"&&Be;if(!i&&r)return r(s,!0);if(y)return y(s,!0);var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}var t=C[s]={exports:{}};D[s][0].call(t.exports,function(n){var o=D[s][1][n];return p(o||n)},t,t.exports,g,D,C,l)}return C[s].exports}for(var y=typeof Be=="function"&&Be,f=0;f<l.length;f++)p(l[f]);return p}return g}()({1:[function(g,D,C){var l=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(C,"__esModule",{value:!0}),C.TypedEventEmitter=void 0;const p=l(g("events")),y=g("./shared");class f{}C.TypedEventEmitter=f,(0,y.applyMixin)(f,p.default)},{"./shared":17,events:49}],2:[function(g,D,C){(function(l,p){(function(){var y=this&&this.__createBinding||(Object.create?function(S,A,b,z){z===void 0&&(z=b);var k=Object.getOwnPropertyDescriptor(A,b);(!k||("get"in k?!A.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return A[b]}}),Object.defineProperty(S,z,k)}:function(S,A,b,z){z===void 0&&(z=b),S[z]=A[b]}),f=this&&this.__setModuleDefault||(Object.create?function(S,A){Object.defineProperty(S,"default",{enumerable:!0,value:A})}:function(S,A){S.default=A}),s=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var A={};if(S!=null)for(var b in S)b!=="default"&&Object.prototype.hasOwnProperty.call(S,b)&&y(A,S,b);return f(A,S),A},i=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(C,"__esModule",{value:!0});const r=i(g("./topic-alias-recv")),e=i(g("mqtt-packet")),t=i(g("./default-message-id-provider")),n=g("readable-stream"),o=i(g("reinterval")),h=i(g("rfdc/default")),w=s(g("./validations")),E=i(g("debug")),v=i(g("./store")),M=i(g("./handlers")),O=g("./TypedEmitter"),x=l?l.nextTick:S=>{setTimeout(S,0)},I=p.setImmediate||((...S)=>{const A=S.shift();x(()=>{A(...S)})}),j={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0,writeCache:!0},R=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND","ETIMEDOUT"];class T extends O.TypedEventEmitter{static defaultId(){return`mqttjs_${Math.random().toString(16).substr(2,8)}`}constructor(A,b){super(),this.options=b||{};for(const z in j)typeof this.options[z]>"u"?this.options[z]=j[z]:this.options[z]=b[z];this.log=this.options.log||(0,E.default)("mqttjs:client"),this.noop=this._noop.bind(this),this.log("MqttClient :: options.protocol",b.protocol),this.log("MqttClient :: options.protocolVersion",b.protocolVersion),this.log("MqttClient :: options.username",b.username),this.log("MqttClient :: options.keepalive",b.keepalive),this.log("MqttClient :: options.reconnectPeriod",b.reconnectPeriod),this.log("MqttClient :: options.rejectUnauthorized",b.rejectUnauthorized),this.log("MqttClient :: options.properties.topicAliasMaximum",b.properties?b.properties.topicAliasMaximum:void 0),this.options.clientId=typeof b.clientId=="string"?b.clientId:T.defaultId(),this.log("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=b.protocolVersion===5&&b.customHandleAcks?b.customHandleAcks:(...z)=>{z[3](null,0)},this.options.writeCache||(e.default.writeToStream.cacheNumbers=!1),this.streamBuilder=A,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new t.default:this.options.messageIdProvider,this.outgoingStore=b.outgoingStore||new v.default,this.incomingStore=b.incomingStore||new v.default,this.queueQoSZero=b.queueQoSZero===void 0?!0:b.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.reconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,b.properties&&b.properties.topicAliasMaximum>0&&(b.properties.topicAliasMaximum>65535?this.log("MqttClient :: options.properties.topicAliasMaximum is out of range"):this.topicAliasRecv=new r.default(b.properties.topicAliasMaximum)),this.on("connect",()=>{const{queue:z}=this,k=()=>{const V=z.shift();this.log("deliver :: entry %o",V);let G=null;if(!V){this._resubscribe();return}G=V.packet,this.log("deliver :: call _sendPacket for %o",G);let K=!0;G.messageId&&G.messageId!==0&&(this.messageIdProvider.register(G.messageId)||(K=!1)),K?this._sendPacket(G,oe=>{V.cb&&V.cb(oe),k()}):(this.log("messageId: %d has already used. The message is skipped and removed.",G.messageId),k())};this.log("connect :: sending queued packets"),k()}),this.on("close",()=>{this.log("close :: connected set to `false`"),this.connected=!1,this.log("close :: clearing connackTimer"),clearTimeout(this.connackTimer),this.log("close :: clearing ping timer"),this.pingTimer!==null&&(this.pingTimer.clear(),this.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),this.log("close :: calling _setupReconnect"),this._setupReconnect()}),this.options.manualConnect||(this.log("MqttClient :: setting up stream"),this.connect())}handleAuth(A,b){b()}handleMessage(A,b){b()}_nextId(){return this.messageIdProvider.allocate()}getLastMessageId(){return this.messageIdProvider.getLastAllocated()}connect(){var A;const b=new n.Writable,z=e.default.parser(this.options);let k=null;const V=[];this.log("connect :: calling method to clear reconnect"),this._clearReconnect(),this.log("connect :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),z.on("packet",Y=>{this.log("parser :: on packet push to packets array."),V.push(Y)});const G=()=>{this.log("work :: getting next packet in queue");const Y=V.shift();if(Y)this.log("work :: packet pulled from queue"),(0,M.default)(this,Y,K);else{this.log("work :: no packets in queue");const le=k;k=null,this.log("work :: done flag is %s",!!le),le&&le()}},K=()=>{if(V.length)x(G);else{const Y=k;k=null,Y()}};b._write=(Y,le,se)=>{k=se,this.log("writable stream :: parsing buffer"),z.parse(Y),G()};const oe=Y=>{this.log("streamErrorHandler :: error",Y.message),R.includes(Y.code)?(this.log("streamErrorHandler :: emitting error"),this.emit("error",Y)):this.noop(Y)};this.log("connect :: pipe stream to writable stream"),this.stream.pipe(b),this.stream.on("error",oe),this.stream.on("close",()=>{this.log("(%s)stream :: on close",this.options.clientId),this._flushVolatile(),this.log("stream: emit close to MqttClient"),this.emit("close")}),this.log("connect: sending packet `connect`");const ie={cmd:"connect",protocolId:this.options.protocolId,protocolVersion:this.options.protocolVersion,clean:this.options.clean,clientId:this.options.clientId,keepalive:this.options.keepalive,username:this.options.username,password:this.options.password,properties:this.options.properties};if(this.options.will&&(ie.will=Object.assign(Object.assign({},this.options.will),{payload:(A=this.options.will)===null||A===void 0?void 0:A.payload})),this.topicAliasRecv&&(ie.properties||(ie.properties={}),this.topicAliasRecv&&(ie.properties.topicAliasMaximum=this.topicAliasRecv.max)),this._writePacket(ie),z.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return this.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const Y=Object.assign({cmd:"auth",reasonCode:0},this.options.authPacket);this._writePacket(Y)}}return this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(()=>{this.log("!!connectTimeout hit!! Calling _cleanUp with force `true`"),this._cleanUp(!0)},this.options.connectTimeout),this}publish(A,b,z,k){this.log("publish :: message `%s` to topic `%s`",b,A);const{options:V}=this;typeof z=="function"&&(k=z,z=null),z=z||{},z=Object.assign(Object.assign({},{qos:0,retain:!1,dup:!1}),z);const{qos:K,retain:oe,dup:ie,properties:Y,cbStorePut:le}=z;if(this._checkDisconnecting(k))return this;const se=()=>{let X=0;if((K===1||K===2)&&(X=this._nextId(),X===null))return this.log("No messageId left"),!1;const P={cmd:"publish",topic:A,payload:b,qos:K,retain:oe,messageId:X,dup:ie};switch(V.protocolVersion===5&&(P.properties=Y),this.log("publish :: qos",K),K){case 1:case 2:this.outgoing[P.messageId]={volatile:!1,cb:k||this.noop},this.log("MqttClient:publish: packet cmd: %s",P.cmd),this._sendPacket(P,void 0,le);break;default:this.log("MqttClient:publish: packet cmd: %s",P.cmd),this._sendPacket(P,k,le);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!se())&&this._storeProcessingQueue.push({invoke:se,cbStorePut:z.cbStorePut,callback:k}),this}publishAsync(A,b,z){return new Promise((k,V)=>{this.publish(A,b,z,(G,K)=>{G?V(G):k(K)})})}subscribe(A,b,z){const k=this.options.protocolVersion;typeof b=="function"&&(z=b),z=z||this.noop;let V=!1,G=[];typeof A=="string"?(A=[A],G=A):Array.isArray(A)?G=A:typeof A=="object"&&(V=A.resubscribe,delete A.resubscribe,G=Object.keys(A));const K=w.validateTopics(G);if(K!==null)return I(z,new Error(`Invalid topic ${K}`)),this;if(this._checkDisconnecting(z))return this.log("subscribe: discconecting true"),this;const oe={qos:0};k===5&&(oe.nl=!1,oe.rap=!1,oe.rh=0),b=Object.assign(Object.assign({},oe),b);const ie=b.properties,Y=[],le=(X,P)=>{if(P=P||b,!Object.prototype.hasOwnProperty.call(this._resubscribeTopics,X)||this._resubscribeTopics[X].qos<P.qos||V){const $={topic:X,qos:P.qos};k===5&&($.nl=P.nl,$.rap=P.rap,$.rh=P.rh,$.properties=ie),this.log("subscribe: pushing topic `%s` and qos `%s` to subs list",$.topic,$.qos),Y.push($)}};if(Array.isArray(A)?A.forEach(X=>{this.log("subscribe: array topic %s",X),le(X)}):Object.keys(A).forEach(X=>{this.log("subscribe: object topic %s, %o",X,A[X]),le(X,A[X])}),!Y.length)return z(null,[]),this;const se=()=>{const X=this._nextId();if(X===null)return this.log("No messageId left"),!1;const P={cmd:"subscribe",subscriptions:Y,messageId:X};if(ie&&(P.properties=ie),this.options.resubscribe){this.log("subscribe :: resubscribe true");const $=[];Y.forEach(te=>{if(this.options.reconnectPeriod>0){const ae={qos:te.qos};k===5&&(ae.nl=te.nl||!1,ae.rap=te.rap||!1,ae.rh=te.rh||0,ae.properties=te.properties),this._resubscribeTopics[te.topic]=ae,$.push(te.topic)}}),this.messageIdToTopic[P.messageId]=$}return this.outgoing[P.messageId]={volatile:!0,cb($,te){if(!$){const{granted:ae}=te;for(let ee=0;ee<ae.length;ee+=1)Y[ee].qos=ae[ee]}z($,Y)}},this.log("subscribe :: call _sendPacket"),this._sendPacket(P),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!se())&&this._storeProcessingQueue.push({invoke:se,callback:z}),this}subscribeAsync(A,b){return new Promise((z,k)=>{this.subscribe(A,b,(V,G)=>{V?k(V):z(G)})})}unsubscribe(A,b,z){typeof A=="string"&&(A=[A]),typeof b=="function"&&(z=b),z=z||this.noop;const k=w.validateTopics(A);if(k!==null)return I(z,new Error(`Invalid topic ${k}`)),this;if(this._checkDisconnecting(z))return this;const V=()=>{const G=this._nextId();if(G===null)return this.log("No messageId left"),!1;const K={cmd:"unsubscribe",messageId:G,unsubscriptions:[]};return typeof A=="string"?K.unsubscriptions=[A]:Array.isArray(A)&&(K.unsubscriptions=A),this.options.resubscribe&&K.unsubscriptions.forEach(oe=>{delete this._resubscribeTopics[oe]}),typeof b=="object"&&b.properties&&(K.properties=b.properties),this.outgoing[K.messageId]={volatile:!0,cb:z},this.log("unsubscribe: call _sendPacket"),this._sendPacket(K),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!V())&&this._storeProcessingQueue.push({invoke:V,callback:z}),this}unsubscribeAsync(A,b){return new Promise((z,k)=>{this.unsubscribe(A,b,(V,G)=>{V?k(V):z(G)})})}end(A,b,z){this.log("end :: (%s)",this.options.clientId),(A==null||typeof A!="boolean")&&(z=z||b,b=A,A=!1),typeof b!="object"&&(z=z||b,b=null),this.log("end :: cb? %s",!!z),(!z||typeof z!="function")&&(z=this.noop);const k=()=>{this.log("end :: closeStores: closing incoming and outgoing stores"),this.disconnected=!0,this.incomingStore.close(G=>{this.outgoingStore.close(K=>{if(this.log("end :: closeStores: emitting end"),this.emit("end"),z){const oe=G||K;this.log("end :: closeStores: invoking callback with args"),z(oe)}})}),this._deferredReconnect&&this._deferredReconnect()},V=()=>{this.log("end :: (%s) :: finish :: calling _cleanUp with force %s",this.options.clientId,A),this._cleanUp(A,()=>{this.log("end :: finish :: calling process.nextTick on closeStores"),x(k)},b)};return this.disconnecting?(z(),this):(this._clearReconnect(),this.disconnecting=!0,!A&&Object.keys(this.outgoing).length>0?(this.log("end :: (%s) :: calling finish in 10ms once outgoing is empty",this.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,V,10))):(this.log("end :: (%s) :: immediately calling finish",this.options.clientId),V()),this)}endAsync(A,b){return new Promise((z,k)=>{this.end(A,b,V=>{V?k(V):z()})})}removeOutgoingMessage(A){if(this.outgoing[A]){const{cb:b}=this.outgoing[A];this._removeOutgoingAndStoreMessage(A,()=>{b(new Error("Message removed"))})}return this}reconnect(A){this.log("client reconnect");const b=()=>{A?(this.options.incomingStore=A.incomingStore,this.options.outgoingStore=A.outgoingStore):(this.options.incomingStore=null,this.options.outgoingStore=null),this.incomingStore=this.options.incomingStore||new v.default,this.outgoingStore=this.options.outgoingStore||new v.default,this.disconnecting=!1,this.disconnected=!1,this._deferredReconnect=null,this._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=b:b(),this}_flushVolatile(){this.outgoing&&(this.log("_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(this.outgoing).forEach(A=>{this.outgoing[A].volatile&&typeof this.outgoing[A].cb=="function"&&(this.outgoing[A].cb(new Error("Connection closed")),delete this.outgoing[A])}))}_flush(){this.outgoing&&(this.log("_flush: queue exists? %b",!!this.outgoing),Object.keys(this.outgoing).forEach(A=>{typeof this.outgoing[A].cb=="function"&&(this.outgoing[A].cb(new Error("Connection closed")),delete this.outgoing[A])}))}_removeTopicAliasAndRecoverTopicName(A){let b;A.properties&&(b=A.properties.topicAlias);let z=A.topic.toString();if(this.log("_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o",b,z),z.length===0){if(typeof b>"u")return new Error("Unregistered Topic Alias");if(z=this.topicAliasSend.getTopicByAlias(b),typeof z>"u")return new Error("Unregistered Topic Alias");A.topic=z}b&&delete A.properties.topicAlias}_checkDisconnecting(A){return this.disconnecting&&(A&&A!==this.noop?A(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting}_reconnect(){this.log("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this.connect()}),this.log("client already connected. disconnecting first.")):(this.log("_reconnect: calling connect"),this.connect())}_setupReconnect(){!this.disconnecting&&!this.reconnectTimer&&this.options.reconnectPeriod>0?(this.reconnecting||(this.log("_setupReconnect :: emit `offline` state"),this.emit("offline"),this.log("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),this.log("_setupReconnect :: setting reconnectTimer for %d ms",this.options.reconnectPeriod),this.reconnectTimer=setInterval(()=>{this.log("reconnectTimer :: reconnect triggered!"),this._reconnect()},this.options.reconnectPeriod)):this.log("_setupReconnect :: doing nothing...")}_clearReconnect(){this.log("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)}_cleanUp(A,b,z={}){if(b&&(this.log("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",b)),this.log("_cleanUp :: forced? %s",A),A)this.options.reconnectPeriod===0&&this.options.clean&&this._flush(),this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const k=Object.assign({cmd:"disconnect"},z);this.log("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(k,()=>{this.log("_cleanUp :: (%s) :: destroying stream",this.options.clientId),I(()=>{this.stream.end(()=>{this.log("_cleanUp :: (%s) :: stream destroyed",this.options.clientId)})})})}this.disconnecting||(this.log("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(this.log("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),b&&!this.connected&&(this.log("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",b),b())}_storeAndSend(A,b,z){this.log("storeAndSend :: store packet with cmd %s to outgoingStore",A.cmd);let k=A,V;if(k.cmd==="publish"&&(k=(0,h.default)(A),V=this._removeTopicAliasAndRecoverTopicName(k),V))return b&&b(V);this.outgoingStore.put(k,G=>{if(G)return b&&b(G);z(),this._writePacket(A,b)})}_applyTopicAlias(A){if(this.options.protocolVersion===5&&A.cmd==="publish"){let b;A.properties&&(b=A.properties.topicAlias);const z=A.topic.toString();if(this.topicAliasSend)if(b){if(z.length!==0&&(this.log("applyTopicAlias :: register topic: %s - alias: %d",z,b),!this.topicAliasSend.put(z,b)))return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",z,b),new Error("Sending Topic Alias out of range")}else z.length!==0&&(this.options.autoAssignTopicAlias?(b=this.topicAliasSend.getAliasByTopic(z),b?(A.topic="",A.properties=Object.assign(Object.assign({},A.properties),{topicAlias:b}),this.log("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",z,b)):(b=this.topicAliasSend.getLruAlias(),this.topicAliasSend.put(z,b),A.properties=Object.assign(Object.assign({},A.properties),{topicAlias:b}),this.log("applyTopicAlias :: auto assign topic: %s - alias: %d",z,b))):this.options.autoUseTopicAlias&&(b=this.topicAliasSend.getAliasByTopic(z),b&&(A.topic="",A.properties=Object.assign(Object.assign({},A.properties),{topicAlias:b}),this.log("applyTopicAlias :: auto use topic: %s - alias: %d",z,b))));else if(b)return this.log("applyTopicAlias :: error out of range. topic: %s - alias: %d",z,b),new Error("Sending Topic Alias out of range")}}_noop(A){this.log("noop ::",A)}_writePacket(A,b){this.log("_writePacket :: packet: %O",A),this.log("_writePacket :: emitting `packetsend`"),this.emit("packetsend",A),this._shiftPingInterval(),this.log("_writePacket :: writing to stream");const z=e.default.writeToStream(A,this.stream,this.options);this.log("_writePacket :: writeToStream result %s",z),!z&&b&&b!==this.noop?(this.log("_writePacket :: handle events on `drain` once through callback."),this.stream.once("drain",b)):b&&(this.log("_writePacket :: invoking cb"),b())}_sendPacket(A,b,z,k){this.log("_sendPacket :: (%s) ::  start",this.options.clientId),z=z||this.noop,b=b||this.noop;const V=this._applyTopicAlias(A);if(V){b(V);return}if(!this.connected){if(A.cmd==="auth"){this._writePacket(A,b);return}this.log("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(A,b,z);return}if(k){this._writePacket(A,b);return}switch(A.cmd){case"publish":break;case"pubrel":this._storeAndSend(A,b,z);return;default:this._writePacket(A,b);return}switch(A.qos){case 2:case 1:this._storeAndSend(A,b,z);break;case 0:default:this._writePacket(A,b);break}this.log("_sendPacket :: (%s) ::  end",this.options.clientId)}_storePacket(A,b,z){this.log("_storePacket :: packet: %o",A),this.log("_storePacket :: cb? %s",!!b),z=z||this.noop;let k=A;if(k.cmd==="publish"){k=(0,h.default)(A);const G=this._removeTopicAliasAndRecoverTopicName(k);if(G)return b&&b(G)}const V=k.qos||0;V===0&&this.queueQoSZero||k.cmd!=="publish"?this.queue.push({packet:k,cb:b}):V>0?(b=this.outgoing[k.messageId]?this.outgoing[k.messageId].cb:null,this.outgoingStore.put(k,G=>{if(G)return b&&b(G);z()})):b&&b(new Error("No connection to broker"))}_setupPingTimer(){this.log("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive),!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=(0,o.default)(()=>{this._checkPing()},this.options.keepalive*1e3))}_shiftPingInterval(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)}_checkPing(){this.log("_checkPing :: checking ping..."),this.pingResp?(this.log("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(this.log("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))}_resubscribe(){this.log("_resubscribe");const A=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion>=4&&!this.connackPacket.sessionPresent)&&A.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){this.log("_resubscribe: protocolVersion 5");for(let b=0;b<A.length;b++){const z={};z[A[b]]=this._resubscribeTopics[A[b]],z.resubscribe=!0,this.subscribe(z,{properties:z[A[b]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1}_onConnect(A){if(this.disconnected){this.emit("connect",A);return}this.connackPacket=A,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;const b=()=>{let z=this.outgoingStore.createStream();const k=()=>{z.destroy(),z=null,this._flushStoreProcessingQueue(),V()},V=()=>{this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={}};this.once("close",k),z.on("error",K=>{V(),this._flushStoreProcessingQueue(),this.removeListener("close",k),this.emit("error",K)});const G=()=>{if(!z)return;const K=z.read(1);let oe;if(!K){z.once("readable",G);return}if(this._storeProcessing=!0,this._packetIdsDuringStoreProcessing[K.messageId]){G();return}!this.disconnecting&&!this.reconnectTimer?(oe=this.outgoing[K.messageId]?this.outgoing[K.messageId].cb:null,this.outgoing[K.messageId]={volatile:!1,cb(ie,Y){oe&&oe(ie,Y),G()}},this._packetIdsDuringStoreProcessing[K.messageId]=!0,this.messageIdProvider.register(K.messageId)?this._sendPacket(K,void 0,void 0,!0):this.log("messageId: %d has already used.",K.messageId)):z.destroy&&z.destroy()};z.on("end",()=>{let K=!0;for(const oe in this._packetIdsDuringStoreProcessing)if(!this._packetIdsDuringStoreProcessing[oe]){K=!1;break}K?(V(),this.removeListener("close",k),this._invokeAllStoreProcessingQueue(),this.emit("connect",A)):b()}),G()};b()}_invokeStoreProcessingQueue(){if(!this._storeProcessing&&this._storeProcessingQueue.length>0){const A=this._storeProcessingQueue[0];if(A&&A.invoke())return this._storeProcessingQueue.shift(),!0}return!1}_invokeAllStoreProcessingQueue(){for(;this._invokeStoreProcessingQueue(););}_flushStoreProcessingQueue(){for(const A of this._storeProcessingQueue)A.cbStorePut&&A.cbStorePut(new Error("Connection closed")),A.callback&&A.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)}_removeOutgoingAndStoreMessage(A,b){delete this.outgoing[A],this.outgoingStore.del({messageId:A},(z,k)=>{b(z,k),this.messageIdProvider.deallocate(A),this._invokeStoreProcessingQueue()})}}C.default=T}).call(this)}).call(this,g("_process"),typeof me<"u"?me:typeof self<"u"?self:typeof window<"u"?window:{})},{"./TypedEmitter":1,"./default-message-id-provider":9,"./handlers":13,"./store":18,"./topic-alias-recv":19,"./validations":22,_process:102,debug:30,"mqtt-packet":75,"readable-stream":125,reinterval:131,"rfdc/default":132}],3:[function(g,D,C){var l=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(C,"__esModule",{value:!0});const p=g("buffer"),y=g("readable-stream"),f=l(g("duplexify"));let s,i,r,e=!1;function t(){const E=new y.Transform;return E._write=(v,M,O)=>{s.sendSocketMessage({data:v.buffer,success(){O()},fail(){O(new Error)}})},E._flush=v=>{s.closeSocket({success(){v()}})},E}function n(E){E.hostname||(E.hostname="localhost"),E.path||(E.path="/"),E.wsOptions||(E.wsOptions={})}function o(E,v){const M=E.protocol==="alis"?"wss":"ws";let O=`${M}://${E.hostname}${E.path}`;return E.port&&E.port!==80&&E.port!==443&&(O=`${M}://${E.hostname}:${E.port}${E.path}`),typeof E.transformWsUrl=="function"&&(O=E.transformWsUrl(O,E,v)),O}function h(){e||(e=!0,s.onSocketOpen(()=>{r.setReadable(i),r.setWritable(i),r.emit("connect")}),s.onSocketMessage(E=>{if(typeof E.data=="string"){const v=p.Buffer.from(E.data,"base64");i.push(v)}else{const v=new FileReader;v.addEventListener("load",()=>{let M=v.result;M instanceof ArrayBuffer?M=p.Buffer.from(M):M=p.Buffer.from(M,"utf8"),i.push(M)}),v.readAsArrayBuffer(E.data)}}),s.onSocketClose(()=>{r.end(),r.destroy()}),s.onSocketError(E=>{r.destroy(E)}))}const w=(E,v)=>{if(v.hostname=v.hostname||v.host,!v.hostname)throw new Error("Could not determine host. Specify host manually.");const M=v.protocolId==="MQIsdp"&&v.protocolVersion===3?"mqttv3.1":"mqtt";n(v);const O=o(v,E);return s=v.my,s.connectSocket({url:O,protocols:M}),i=t(),r=f.default.obj(),h(),r};C.default=w},{buffer:29,duplexify:32,"readable-stream":125}],4:[function(g,D,C){var l=this&&this.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(C,"__esModule",{value:!0}),C.connectAsync=void 0;const p=l(g("debug")),y=l(g("url")),f=l(g("../client")),s=l(g("../is-browser")),i=(0,p.default)("mqttjs"),r={};s.default?(r.wx=g("./wx").default,r.wxs=g("./wx").default,r.ali=g("./ali").default,r.alis=g("./ali").default):(r.mqtt=g("./tcp").default,r.tcp=g("./tcp").default,r.ssl=g("./tls").default,r.tls=r.ssl,r.mqtts=g("./tls").default),r.ws=g("./ws").default,r.wss=g("./ws").default;function e(o){let h;o.auth&&(h=o.auth.match(/^(.+):(.+)$/),h?(o.username=h[1],o.password=h[2]):o.username=o.auth)}function t(o,h){if(i("connecting to an MQTT broker..."),typeof o=="object"&&!h&&(h=o,o=""),h=h||{},o&&typeof o=="string"){const v=y.default.parse(o,!0);if(v.port!=null&&(v.port=Number(v.port)),h=Object.assign(Object.assign({},v),h),h.protocol===null)throw new Error("Missing protocol");h.protocol=h.protocol.replace(/:$/,"")}if(e(h),h.query&&typeof h.query.clientId=="string"&&(h.clientId=h.query.clientId),h.cert&&h.key)if(h.protocol){if(["mqtts","wss","wxs","alis"].indexOf(h.protocol)===-1)switch(h.protocol){case"mqtt":h.protocol="mqtts";break;case"ws":h.protocol="wss";break;case"wx":h.protocol="wxs";break;case"ali":h.protocol="alis";break;default:throw new Error(`Unknown protocol for secure connection: "${h.protocol}"!`)}}else throw new Error("Missing secure protocol key");if(!r[h.protocol]){const v=["mqtts","wss"].indexOf(h.protocol)!==-1;h.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((M,O)=>v&&O%2===0?!1:typeof r[M]=="function")[0]}if(h.clean===!1&&!h.clientId)throw new Error("Missing clientId for unclean clients");h.protocol&&(h.defaultProtocol=h.protocol);function w(v){return h.servers&&((!v._reconnectCount||v._reconnectCount===h.servers.length)&&(v._reconnectCount=0),h.host=h.servers[v._reconnectCount].host,h.port=h.servers[v._reconnectCount].port,h.protocol=h.servers[v._reconnectCount].protocol?h.servers[v._reconnectCount].protocol:h.defaultProtocol,h.hostname=h.host,v._reconnectCount++),i("calling streambuilder for",h.protocol),r[h.protocol](v,h)}const E=new f.default(w,h);return E.on("error",()=>{}),E}function n(o,h,w=!0){return new Promise((E,v)=>{const M=t(o,h),O={connect:I=>{x(),E(M)},end:()=>{x(),E(M)},error:I=>{x(),M.end(),v(I)}};w===!1&&(O.close=()=>{O.error(new Error("Couldn't connect to server"))});function x(){Object.keys(O).forEach(I=>{M.off(I,O[I])})}Object.keys(O).forEach(I=>{M.on(I,O[I])})})}C.connectAsync=n,C.default=t},{"../client":2,"../is-browser":16,"./ali":3,"./tcp":5,"./tls":6,"./ws":7,"./wx":8,debug:30,url:137}],5:[function(g,D,C){var l=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(C,"__esModule",{value:!0});const p=l(g("net")),f=(0,l(g("debug")).default)("mqttjs:tcp"),s=(i,r)=>{r.port=r.port||1883,r.hostname=r.hostname||r.host||"localhost";const{port:e}=r,t=r.hostname;return f("port %d and host %s",e,t),p.default.createConnection(e,t)};C.default=s},{debug:30,net:26}],6:[function(g,D,C){var l=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(C,"__esModule",{value:!0});const p=l(g("tls")),y=l(g("net")),s=(0,l(g("debug")).default)("mqttjs:tls"),i=(r,e)=>{e.port=e.port||8883,e.host=e.hostname||e.host||"localhost",y.default.isIP(e.host)===0&&(e.servername=e.host),e.rejectUnauthorized=e.rejectUnauthorized!==!1,delete e.path,s("port %d host %s rejectUnauthorized %b",e.port,e.host,e.rejectUnauthorized);const t=p.default.connect(e);t.on("secureConnect",()=>{e.rejectUnauthorized&&!t.authorized?t.emit("error",new Error("TLS not authorized")):t.removeListener("error",n)});function n(o){e.rejectUnauthorized&&r.emit("error",o),t.end()}return t.on("error",n),t};C.default=i},{debug:30,net:26,tls:26}],7:[function(g,D,C){var l=this&&this.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(C,"__esModule",{value:!0});const p=g("buffer"),y=l(g("ws")),f=l(g("debug")),s=l(g("duplexify")),i=g("readable-stream"),r=l(g("../is-browser")),e=(0,f.default)("mqttjs:ws"),t=["rejectUnauthorized","ca","cert","key","pfx","passphrase"];function n(O,x){let I=`${O.protocol}://${O.hostname}:${O.port}${O.path}`;return typeof O.transformWsUrl=="function"&&(I=O.transformWsUrl(I,O,x)),I}function o(O){const x=O;return O.hostname||(x.hostname="localhost"),O.port||(O.protocol==="wss"?x.port=443:x.port=80),O.path||(x.path="/"),O.wsOptions||(x.wsOptions={}),!r.default&&O.protocol==="wss"&&t.forEach(I=>{Object.prototype.hasOwnProperty.call(O,I)&&!Object.prototype.hasOwnProperty.call(O.wsOptions,I)&&(x.wsOptions[I]=O[I])}),x}function h(O){const x=o(O);if(x.hostname||(x.hostname=x.host),!x.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const I=new URL(document.URL);x.hostname=I.hostname,x.port||(x.port=Number(I.port))}return x.objectMode===void 0&&(x.objectMode=!(x.binary===!0||x.binary===void 0)),x}function w(O,x,I){e("createWebSocket"),e(`protocol: ${I.protocolId} ${I.protocolVersion}`);const j=I.protocolId==="MQIsdp"&&I.protocolVersion===3?"mqttv3.1":"mqtt";e(`creating new Websocket for url: ${x} and protocol: ${j}`);let R;return I.createWebsocket?R=I.createWebsocket(x,[j],I):R=new y.default(x,[j],I.wsOptions),R}function E(O,x){const I=x.protocolId==="MQIsdp"&&x.protocolVersion===3?"mqttv3.1":"mqtt",j=n(x,O);let R;return x.createWebsocket?R=x.createWebsocket(j,[I],x):R=new WebSocket(j,[I]),R.binaryType="arraybuffer",R}const v=(O,x)=>{e("streamBuilder");const I=o(x),j=n(I,O),R=w(O,j,I),T=y.default.createWebSocketStream(R,I.wsOptions);return T.url=j,R.on("close",()=>{T.destroy()}),T},M=(O,x)=>{e("browserStreamBuilder");let I;const R=h(x).browserBufferSize||1024*512,T=x.browserBufferTimeout||1e3,S=!x.objectMode,A=E(O,x),b=k(x,Y,le);x.objectMode||(b._writev=ie),b.on("close",()=>{A.close()});const z=typeof A.addEventListener<"u";A.readyState===A.OPEN?I=b:(I=(0,s.default)(void 0,void 0,x),x.objectMode||(I._writev=ie),z?A.addEventListener("open",V):A.onopen=V),I.socket=A,z?(A.addEventListener("close",G),A.addEventListener("error",K),A.addEventListener("message",oe)):(A.onclose=G,A.onerror=K,A.onmessage=oe);function k(se,X,P){const $=new i.Transform({objectMode:se.objectMode});return $._write=X,$._flush=P,$}function V(){I.setReadable(b),I.setWritable(b),I.emit("connect")}function G(){I.end(),I.destroy()}function K(se){I.destroy(se)}function oe(se){let{data:X}=se;X instanceof ArrayBuffer?X=p.Buffer.from(X):X=p.Buffer.from(X,"utf8"),b.push(X)}function ie(se,X){const P=new Array(se.length);for(let $=0;$<se.length;$++)typeof se[$].chunk=="string"?P[$]=p.Buffer.from(se[$],"utf8"):P[$]=se[$].chunk;this._write(p.Buffer.concat(P),"binary",X)}function Y(se,X,P){A.bufferedAmount>R&&setTimeout(Y,T,se,X,P),S&&typeof se=="string"&&(se=p.Buffer.from(se,"utf8"));try{A.send(se)}catch($){return P($)}P()}function le(se){A.close(),se()}return I};C.default=r.default?M:v},{"../is-browser":16,buffer:29,debug:30,duplexify:32,"readable-stream":125,ws:141}],8:[function(g,D,C){var l=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(C,"__esModule",{value:!0});const p=g("buffer"),y=g("readable-stream"),f=l(g("duplexify"));let s,i,r;function e(){const w=new y.Transform;return w._write=(E,v,M)=>{s.send({data:E.buffer,success(){M()},fail(O){M(new Error(O))}})},w._flush=E=>{s.close({success(){E()}})},w}function t(w){w.hostname||(w.hostname="localhost"),w.path||(w.path="/"),w.wsOptions||(w.wsOptions={})}function n(w,E){const v=w.protocol==="wxs"?"wss":"ws";let M=`${v}://${w.hostname}${w.path}`;return w.port&&w.port!==80&&w.port!==443&&(M=`${v}://${w.hostname}:${w.port}${w.path}`),typeof w.transformWsUrl=="function"&&(M=w.transformWsUrl(M,w,E)),M}function o(){s.onOpen(()=>{r.setReadable(i),r.setWritable(i),r.emit("connect")}),s.onMessage(w=>{let{data:E}=w;E instanceof ArrayBuffer?E=p.Buffer.from(E):E=p.Buffer.from(E,"utf8"),i.push(E)}),s.onClose(()=>{r.emit("close"),r.end(),r.destroy()}),s.onError(w=>{r.destroy(new Error(w.errMsg))})}const h=(w,E)=>{if(E.hostname=E.hostname||E.host,!E.hostname)throw new Error("Could not determine host. Specify host manually.");const v=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt";t(E);const M=n(E,w);s=wx.connectSocket({url:M,protocols:[v]}),i=e(),r=f.default.obj(),r._destroy=(x,I)=>{s.close({success(){I&&I(x)}})};const O=r.destroy;return r.destroy=()=>{r.destroy=O,setTimeout(()=>{s.close({fail(){r._destroy(new Error)}})},0)},o(),r};C.default=h},{buffer:29,duplexify:32,"readable-stream":125}],9:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});class l{constructor(){this.nextId=Math.max(1,Math.floor(Math.random()*65535))}allocate(){const y=this.nextId++;return this.nextId===65536&&(this.nextId=1),y}getLastAllocated(){return this.nextId===1?65535:this.nextId-1}register(y){return!0}deallocate(y){}clear(){}}C.default=l},{}],10:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0}),C.ReasonCodes=void 0,C.ReasonCodes={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};const l=(p,y)=>{const{messageId:f}=y,s=y.cmd;let i=null;const r=p.outgoing[f]?p.outgoing[f].cb:null;let e;if(!r){p.log("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(p.log("_handleAck :: packet type",s),s){case"pubcomp":case"puback":{const t=y.reasonCode;t&&t>0&&t!==16?(e=new Error(`Publish error: ${C.ReasonCodes[t]}`),e.code=t,p._removeOutgoingAndStoreMessage(f,()=>{r(e,y)})):p._removeOutgoingAndStoreMessage(f,r);break}case"pubrec":{i={cmd:"pubrel",qos:2,messageId:f};const t=y.reasonCode;t&&t>0&&t!==16?(e=new Error(`Publish error: ${C.ReasonCodes[t]}`),e.code=t,p._removeOutgoingAndStoreMessage(f,()=>{r(e,y)})):p._sendPacket(i);break}case"suback":{delete p.outgoing[f],p.messageIdProvider.deallocate(f);const t=y.granted;for(let n=0;n<t.length;n++)if(t[n]&128){const o=p.messageIdToTopic[f];o&&o.forEach(h=>{delete p._resubscribeTopics[h]})}delete p.messageIdToTopic[f],p._invokeStoreProcessingQueue(),r(null,y);break}case"unsuback":{delete p.outgoing[f],p.messageIdProvider.deallocate(f),p._invokeStoreProcessingQueue(),r(null);break}default:p.emit("error",new Error("unrecognized packet type"))}p.disconnecting&&Object.keys(p.outgoing).length===0&&p.emit("outgoingEmpty")};C.default=l},{}],11:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});const l=g("../shared"),p=g("./ack"),y=(f,s)=>{const{options:i}=f,r=i.protocolVersion,e=r===5?s.reasonCode:s.returnCode;if(r!==5){const t=new l.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${r}`,e);f.emit("error",t);return}f.handleAuth(s,(t,n)=>{if(t){f.emit("error",t);return}if(e===24)f.reconnecting=!1,f._sendPacket(n);else{const o=new l.ErrorWithReasonCode(`Connection refused: ${p.ReasonCodes[e]}`,e);f.emit("error",o)}})};C.default=y},{"../shared":17,"./ack":10}],12:[function(g,D,C){var l=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(C,"__esModule",{value:!0});const p=g("./ack"),y=l(g("../topic-alias-send")),f=g("../shared"),s=(i,r)=>{i.log("_handleConnack");const{options:e}=i,n=e.protocolVersion===5?r.reasonCode:r.returnCode;if(clearTimeout(i.connackTimer),delete i.topicAliasSend,r.properties){if(r.properties.topicAliasMaximum){if(r.properties.topicAliasMaximum>65535){i.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}r.properties.topicAliasMaximum>0&&(i.topicAliasSend=new y.default(r.properties.topicAliasMaximum))}r.properties.serverKeepAlive&&e.keepalive&&(e.keepalive=r.properties.serverKeepAlive,i._shiftPingInterval()),r.properties.maximumPacketSize&&(e.properties||(e.properties={}),e.properties.maximumPacketSize=r.properties.maximumPacketSize)}if(n===0)i.reconnecting=!1,i._onConnect(r);else if(n>0){const o=new f.ErrorWithReasonCode(`Connection refused: ${p.ReasonCodes[n]}`,n);i.emit("error",o)}};C.default=s},{"../shared":17,"../topic-alias-send":20,"./ack":10}],13:[function(g,D,C){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(C,"__esModule",{value:!0});const p=l(g("./publish")),y=l(g("./auth")),f=l(g("./connack")),s=l(g("./ack")),i=l(g("./pubrel")),r=(e,t,n)=>{const{options:o}=e;if(o.protocolVersion===5&&o.properties&&o.properties.maximumPacketSize&&o.properties.maximumPacketSize<t.length)return e.emit("error",new Error(`exceeding packets size ${t.cmd}`)),e.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),e;switch(e.log("_handlePacket :: emitting packetreceive"),e.emit("packetreceive",t),t.cmd){case"publish":(0,p.default)(e,t,n);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":(0,s.default)(e,t),n();break;case"pubrel":(0,i.default)(e,t,n);break;case"connack":(0,f.default)(e,t),n();break;case"auth":(0,y.default)(e,t),n();break;case"pingresp":e.pingResp=!0,n();break;case"disconnect":e.emit("disconnect",t),n();break;default:e.log("_handlePacket :: unknown command"),n();break}};C.default=r},{"./ack":10,"./auth":11,"./connack":12,"./publish":14,"./pubrel":15}],14:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});const l=[0,16,128,131,135,144,145,151,153],p=(y,f,s)=>{y.log("handlePublish: packet %o",f),s=typeof s<"u"?s:y.noop;let i=f.topic.toString();const r=f.payload,{qos:e}=f,{messageId:t}=f,{options:n}=y;if(y.options.protocolVersion===5){let o;if(f.properties&&(o=f.properties.topicAlias),typeof o<"u")if(i.length===0)if(o>0&&o<=65535){const h=y.topicAliasRecv.getTopicByAlias(o);if(h)i=h,y.log("handlePublish :: topic complemented by alias. topic: %s - alias: %d",i,o);else{y.log("handlePublish :: unregistered topic alias. alias: %d",o),y.emit("error",new Error("Received unregistered Topic Alias"));return}}else{y.log("handlePublish :: topic alias out of range. alias: %d",o),y.emit("error",new Error("Received Topic Alias is out of range"));return}else if(y.topicAliasRecv.put(i,o))y.log("handlePublish :: registered topic: %s - alias: %d",i,o);else{y.log("handlePublish :: topic alias out of range. alias: %d",o),y.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(y.log("handlePublish: qos %d",e),e){case 2:{n.customHandleAcks(i,r,f,(o,h)=>{if(typeof o=="number"&&(h=o,o=null),o)return y.emit("error",o);if(l.indexOf(h)===-1)return y.emit("error",new Error("Wrong reason code for pubrec"));h?y._sendPacket({cmd:"pubrec",messageId:t,reasonCode:h},s):y.incomingStore.put(f,()=>{y._sendPacket({cmd:"pubrec",messageId:t},s)})});break}case 1:{n.customHandleAcks(i,r,f,(o,h)=>{if(typeof o=="number"&&(h=o,o=null),o)return y.emit("error",o);if(l.indexOf(h)===-1)return y.emit("error",new Error("Wrong reason code for puback"));h||y.emit("message",i,r,f),y.handleMessage(f,w=>{if(w)return s&&s(w);y._sendPacket({cmd:"puback",messageId:t,reasonCode:h},s)})});break}case 0:y.emit("message",i,r,f),y.handleMessage(f,s);break;default:y.log("handlePublish: unknown QoS. Doing nothing.");break}};C.default=p},{}],15:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});const l=(p,y,f)=>{p.log("handling pubrel packet");const s=typeof f<"u"?f:p.noop,{messageId:i}=y,r={cmd:"pubcomp",messageId:i};p.incomingStore.get(y,(e,t)=>{e?p._sendPacket(r,s):(p.emit("message",t.topic,t.payload,t),p.handleMessage(t,n=>{if(n)return s(n);p.incomingStore.del(t,p.noop),p._sendPacket(r,s)}))})};C.default=l},{}],16:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});const l=typeof window<"u"&&typeof window.document<"u"||typeof self<"u"&&typeof self.postMessage=="function";C.default=l},{}],17:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0}),C.applyMixin=C.ErrorWithReasonCode=void 0;class l extends Error{constructor(f,s){super(f),this.code=s,Object.setPrototypeOf(this,l.prototype),Object.getPrototypeOf(this).name="ErrorWithReasonCode"}}C.ErrorWithReasonCode=l;function p(y,f,s=!1){var i;const r=[f];for(;;){const e=r[0],t=Object.getPrototypeOf(e);if(t!=null&&t.prototype)r.unshift(t);else break}for(const e of r)for(const t of Object.getOwnPropertyNames(e.prototype))(s||t!=="constructor")&&Object.defineProperty(y.prototype,t,(i=Object.getOwnPropertyDescriptor(e.prototype,t))!==null&&i!==void 0?i:Object.create(null))}C.applyMixin=p},{}],18:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});const l=g("readable-stream"),p={objectMode:!0},y={clean:!0};class f{constructor(i){this.options=i||{},this.options=Object.assign(Object.assign({},y),i),this._inflights=new Map}put(i,r){return this._inflights.set(i.messageId,i),r&&r(),this}createStream(){const i=new l.Readable(p),r=[];let e=!1,t=0;return this._inflights.forEach((n,o)=>{r.push(n)}),i._read=()=>{!e&&t<r.length?i.push(r[t++]):i.push(null)},i.destroy=n=>{if(!e)return e=!0,setTimeout(()=>{i.emit("close")},0),i},i}del(i,r){const e=this._inflights.get(i.messageId);return e?(this._inflights.delete(i.messageId),r(null,e)):r&&r(new Error("missing packet")),this}get(i,r){const e=this._inflights.get(i.messageId);return e?r(null,e):r&&r(new Error("missing packet")),this}close(i){this.options.clean&&(this._inflights=null),i&&i()}}C.default=f},{"readable-stream":125}],19:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});class l{constructor(y){this.aliasToTopic={},this.max=y}put(y,f){return f===0||f>this.max?!1:(this.aliasToTopic[f]=y,this.length=Object.keys(this.aliasToTopic).length,!0)}getTopicByAlias(y){return this.aliasToTopic[y]}clear(){this.aliasToTopic={}}}C.default=l},{}],20:[function(g,D,C){var l=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(C,"__esModule",{value:!0});const p=l(g("lru-cache")),y=g("number-allocator");class f{constructor(i){i>0&&(this.aliasToTopic=new p.default({max:i}),this.topicToAlias={},this.numberAllocator=new y.NumberAllocator(1,i),this.max=i,this.length=0)}put(i,r){if(r===0||r>this.max)return!1;const e=this.aliasToTopic.get(r);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(r,i),this.topicToAlias[i]=r,this.numberAllocator.use(r),this.length=this.aliasToTopic.size,!0}getTopicByAlias(i){return this.aliasToTopic.get(i)}getAliasByTopic(i){const r=this.topicToAlias[i];return typeof r<"u"&&this.aliasToTopic.get(r),r}clear(){this.aliasToTopic.clear(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0}getLruAlias(){const i=this.numberAllocator.firstVacant();return i||[...this.aliasToTopic.keys()][this.aliasToTopic.size-1]}}C.default=f},{"lru-cache":72,"number-allocator":98}],21:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0});const l=g("number-allocator");class p{constructor(){this.numberAllocator=new l.NumberAllocator(1,65535)}allocate(){return this.lastId=this.numberAllocator.alloc(),this.lastId}getLastAllocated(){return this.lastId}register(f){return this.numberAllocator.use(f)}deallocate(f){this.numberAllocator.free(f)}clear(){this.numberAllocator.clear()}}C.default=p},{"number-allocator":98}],22:[function(g,D,C){Object.defineProperty(C,"__esModule",{value:!0}),C.validateTopics=C.validateTopic=void 0;function l(y){const f=y.split("/");for(let s=0;s<f.length;s++)if(f[s]!=="+"){if(f[s]==="#")return s===f.length-1;if(f[s].indexOf("+")!==-1||f[s].indexOf("#")!==-1)return!1}return!0}C.validateTopic=l;function p(y){if(y.length===0)return"empty_topic_list";for(let f=0;f<y.length;f++)if(!l(y[f]))return y[f];return null}C.validateTopics=p},{}],23:[function(g,D,C){var l=this&&this.__createBinding||(Object.create?function(h,w,E,v){v===void 0&&(v=E);var M=Object.getOwnPropertyDescriptor(w,E);(!M||("get"in M?!w.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(h,v,M)}:function(h,w,E,v){v===void 0&&(v=E),h[v]=w[E]}),p=this&&this.__setModuleDefault||(Object.create?function(h,w){Object.defineProperty(h,"default",{enumerable:!0,value:w})}:function(h,w){h.default=w}),y=this&&this.__importStar||function(h){if(h&&h.__esModule)return h;var w={};if(h!=null)for(var E in h)E!=="default"&&Object.prototype.hasOwnProperty.call(h,E)&&l(w,h,E);return p(w,h),w},f=this&&this.__exportStar||function(h,w){for(var E in h)E!=="default"&&!Object.prototype.hasOwnProperty.call(w,E)&&l(w,h,E)},s=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(C,"__esModule",{value:!0}),C.ReasonCodes=C.UniqueMessageIdProvider=C.DefaultMessageIdProvider=C.Store=C.MqttClient=C.connectAsync=C.connect=C.Client=void 0;const i=s(g("./lib/client"));C.MqttClient=i.default;const r=s(g("./lib/default-message-id-provider"));C.DefaultMessageIdProvider=r.default;const e=s(g("./lib/unique-message-id-provider"));C.UniqueMessageIdProvider=e.default;const t=s(g("./lib/store"));C.Store=t.default;const n=y(g("./lib/connect"));C.connect=n.default,Object.defineProperty(C,"connectAsync",{enumerable:!0,get:function(){return n.connectAsync}}),C.Client=i.default,f(g("./lib/client"),C),f(g("./lib/shared"),C);var o=g("./lib/handlers/ack");Object.defineProperty(C,"ReasonCodes",{enumerable:!0,get:function(){return o.ReasonCodes}})},{"./lib/client":2,"./lib/connect":4,"./lib/default-message-id-provider":9,"./lib/handlers/ack":10,"./lib/shared":17,"./lib/store":18,"./lib/unique-message-id-provider":21}],24:[function(g,D,C){const{AbortController:l,AbortSignal:p}=typeof self<"u"?self:typeof window<"u"?window:void 0;D.exports=l,D.exports.AbortSignal=p,D.exports.default=l},{}],25:[function(g,D,C){C.byteLength=e,C.toByteArray=n,C.fromByteArray=w;for(var l=[],p=[],y=typeof Uint8Array<"u"?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=f.length;s<i;++s)l[s]=f[s],p[f.charCodeAt(s)]=s;p["-".charCodeAt(0)]=62,p["_".charCodeAt(0)]=63;function r(E){var v=E.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=E.indexOf("=");M===-1&&(M=v);var O=M===v?0:4-M%4;return[M,O]}function e(E){var v=r(E),M=v[0],O=v[1];return(M+O)*3/4-O}function t(E,v,M){return(v+M)*3/4-M}function n(E){var v,M=r(E),O=M[0],x=M[1],I=new y(t(E,O,x)),j=0,R=x>0?O-4:O,T;for(T=0;T<R;T+=4)v=p[E.charCodeAt(T)]<<18|p[E.charCodeAt(T+1)]<<12|p[E.charCodeAt(T+2)]<<6|p[E.charCodeAt(T+3)],I[j++]=v>>16&255,I[j++]=v>>8&255,I[j++]=v&255;return x===2&&(v=p[E.charCodeAt(T)]<<2|p[E.charCodeAt(T+1)]>>4,I[j++]=v&255),x===1&&(v=p[E.charCodeAt(T)]<<10|p[E.charCodeAt(T+1)]<<4|p[E.charCodeAt(T+2)]>>2,I[j++]=v>>8&255,I[j++]=v&255),I}function o(E){return l[E>>18&63]+l[E>>12&63]+l[E>>6&63]+l[E&63]}function h(E,v,M){for(var O,x=[],I=v;I<M;I+=3)O=(E[I]<<16&16711680)+(E[I+1]<<8&65280)+(E[I+2]&255),x.push(o(O));return x.join("")}function w(E){for(var v,M=E.length,O=M%3,x=[],I=16383,j=0,R=M-O;j<R;j+=I)x.push(h(E,j,j+I>R?R:j+I));return O===1?(v=E[M-1],x.push(l[v>>2]+l[v<<4&63]+"==")):O===2&&(v=(E[M-2]<<8)+E[M-1],x.push(l[v>>10]+l[v>>4&63]+l[v<<2&63]+"=")),x.join("")}},{}],26:[function(g,D,C){},{}],27:[function(g,D,C){var l=g("buffer"),p=l.Buffer;function y(s,i){for(var r in s)i[r]=s[r]}p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?D.exports=l:(y(l,C),C.Buffer=f);function f(s,i,r){return p(s,i,r)}y(p,f),f.from=function(s,i,r){if(typeof s=="number")throw new TypeError("Argument must not be a number");return p(s,i,r)},f.alloc=function(s,i,r){if(typeof s!="number")throw new TypeError("Argument must be a number");var e=p(s);return i!==void 0?typeof r=="string"?e.fill(i,r):e.fill(i):e.fill(0),e},f.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return p(s)},f.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return l.SlowBuffer(s)}},{buffer:29}],28:[function(g,D,C){var l=g("safe-buffer").Buffer,p=l.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function y(x){if(!x)return"utf8";for(var I;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(I)return;x=(""+x).toLowerCase(),I=!0}}function f(x){var I=y(x);if(typeof I!="string"&&(l.isEncoding===p||!p(x)))throw new Error("Unknown encoding: "+x);return I||x}C.StringDecoder=s;function s(x){this.encoding=f(x);var I;switch(this.encoding){case"utf16le":this.text=h,this.end=w,I=4;break;case"utf8":this.fillLast=t,I=4;break;case"base64":this.text=E,this.end=v,I=3;break;default:this.write=M,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=l.allocUnsafe(I)}s.prototype.write=function(x){if(x.length===0)return"";var I,j;if(this.lastNeed){if(I=this.fillLast(x),I===void 0)return"";j=this.lastNeed,this.lastNeed=0}else j=0;return j<x.length?I?I+this.text(x,j):this.text(x,j):I||""},s.prototype.end=o,s.prototype.text=n,s.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function r(x,I,j){var R=I.length-1;if(R<j)return 0;var T=i(I[R]);return T>=0?(T>0&&(x.lastNeed=T-1),T):--R<j||T===-2?0:(T=i(I[R]),T>=0?(T>0&&(x.lastNeed=T-2),T):--R<j||T===-2?0:(T=i(I[R]),T>=0?(T>0&&(T===2?T=0:x.lastNeed=T-3),T):0))}function e(x,I,j){if((I[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&I.length>1){if((I[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&I.length>2&&(I[2]&192)!==128)return x.lastNeed=2,""}}function t(x){var I=this.lastTotal-this.lastNeed,j=e(this,x);if(j!==void 0)return j;if(this.lastNeed<=x.length)return x.copy(this.lastChar,I,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,I,0,x.length),this.lastNeed-=x.length}function n(x,I){var j=r(this,x,I);if(!this.lastNeed)return x.toString("utf8",I);this.lastTotal=j;var R=x.length-(j-this.lastNeed);return x.copy(this.lastChar,0,R),x.toString("utf8",I,R)}function o(x){var I=x&&x.length?this.write(x):"";return this.lastNeed?I+"":I}function h(x,I){if((x.length-I)%2===0){var j=x.toString("utf16le",I);if(j){var R=j.charCodeAt(j.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],j.slice(0,-1)}return j}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",I,x.length-1)}function w(x){var I=x&&x.length?this.write(x):"";if(this.lastNeed){var j=this.lastTotal-this.lastNeed;return I+this.lastChar.toString("utf16le",0,j)}return I}function E(x,I){var j=(x.length-I)%3;return j===0?x.toString("base64",I):(this.lastNeed=3-j,this.lastTotal=3,j===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",I,x.length-j))}function v(x){var I=x&&x.length?this.write(x):"";return this.lastNeed?I+this.lastChar.toString("base64",0,3-this.lastNeed):I}function M(x){return x.toString(this.encoding)}function O(x){return x&&x.length?this.write(x):""}},{"safe-buffer":27}],29:[function(g,D,C){(function(l){(function(){var p=g("base64-js"),y=g("ieee754");C.Buffer=r,C.SlowBuffer=O,C.INSPECT_MAX_BYTES=50;var f=2147483647;C.kMaxLength=f,r.TYPED_ARRAY_SUPPORT=s(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u";function s(){try{var c=new Uint8Array(1);return c.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},c.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});function i(c){if(c>f)throw new RangeError('The value "'+c+'" is invalid for option "size"');var a=new Uint8Array(c);return a.__proto__=r.prototype,a}function r(c,a,u){if(typeof c=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(c)}return e(c,a,u)}typeof Symbol<"u"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192;function e(c,a,u){if(typeof c=="string")return h(c,a);if(ArrayBuffer.isView(c))return w(c);if(c==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c);if(d(c,ArrayBuffer)||c&&d(c.buffer,ArrayBuffer))return E(c,a,u);if(typeof c=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var _=c.valueOf&&c.valueOf();if(_!=null&&_!==c)return r.from(_,a,u);var B=v(c);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof c[Symbol.toPrimitive]=="function")return r.from(c[Symbol.toPrimitive]("string"),a,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof c)}r.from=function(c,a,u){return e(c,a,u)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array;function t(c){if(typeof c!="number")throw new TypeError('"size" argument must be of type number');if(c<0)throw new RangeError('The value "'+c+'" is invalid for option "size"')}function n(c,a,u){return t(c),c<=0?i(c):a!==void 0?typeof u=="string"?i(c).fill(a,u):i(c).fill(a):i(c)}r.alloc=function(c,a,u){return n(c,a,u)};function o(c){return t(c),i(c<0?0:M(c)|0)}r.allocUnsafe=function(c){return o(c)},r.allocUnsafeSlow=function(c){return o(c)};function h(c,a){if((typeof a!="string"||a==="")&&(a="utf8"),!r.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var u=x(c,a)|0,_=i(u),B=_.write(c,a);return B!==u&&(_=_.slice(0,B)),_}function w(c){for(var a=c.length<0?0:M(c.length)|0,u=i(a),_=0;_<a;_+=1)u[_]=c[_]&255;return u}function E(c,a,u){if(a<0||c.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(c.byteLength<a+(u||0))throw new RangeError('"length" is outside of buffer bounds');var _;return a===void 0&&u===void 0?_=new Uint8Array(c):u===void 0?_=new Uint8Array(c,a):_=new Uint8Array(c,a,u),_.__proto__=r.prototype,_}function v(c){if(r.isBuffer(c)){var a=M(c.length)|0,u=i(a);return u.length===0||c.copy(u,0,0,a),u}if(c.length!==void 0)return typeof c.length!="number"||m(c.length)?i(0):w(c);if(c.type==="Buffer"&&Array.isArray(c.data))return w(c.data)}function M(c){if(c>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return c|0}function O(c){return+c!=c&&(c=0),r.alloc(+c)}r.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==r.prototype},r.compare=function(a,u){if(d(a,Uint8Array)&&(a=r.from(a,a.offset,a.byteLength)),d(u,Uint8Array)&&(u=r.from(u,u.offset,u.byteLength)),!r.isBuffer(a)||!r.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===u)return 0;for(var _=a.length,B=u.length,J=0,ne=Math.min(_,B);J<ne;++J)if(a[J]!==u[J]){_=a[J],B=u[J];break}return _<B?-1:B<_?1:0},r.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(a,u){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return r.alloc(0);var _;if(u===void 0)for(u=0,_=0;_<a.length;++_)u+=a[_].length;var B=r.allocUnsafe(u),J=0;for(_=0;_<a.length;++_){var ne=a[_];if(d(ne,Uint8Array)&&(ne=r.from(ne)),!r.isBuffer(ne))throw new TypeError('"list" argument must be an Array of Buffers');ne.copy(B,J),J+=ne.length}return B};function x(c,a){if(r.isBuffer(c))return c.length;if(ArrayBuffer.isView(c)||d(c,ArrayBuffer))return c.byteLength;if(typeof c!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof c);var u=c.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&u===0)return 0;for(var B=!1;;)switch(a){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return U(c).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return q(c).length;default:if(B)return _?-1:U(c).length;a=(""+a).toLowerCase(),B=!0}}r.byteLength=x;function I(c,a,u){var _=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,a>>>=0,u<=a))return"";for(c||(c="utf8");;)switch(c){case"hex":return se(this,a,u);case"utf8":case"utf-8":return K(this,a,u);case"ascii":return Y(this,a,u);case"latin1":case"binary":return le(this,a,u);case"base64":return G(this,a,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return X(this,a,u);default:if(_)throw new TypeError("Unknown encoding: "+c);c=(c+"").toLowerCase(),_=!0}}r.prototype._isBuffer=!0;function j(c,a,u){var _=c[a];c[a]=c[u],c[u]=_}r.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var u=0;u<a;u+=2)j(this,u,u+1);return this},r.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var u=0;u<a;u+=4)j(this,u,u+3),j(this,u+1,u+2);return this},r.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var u=0;u<a;u+=8)j(this,u,u+7),j(this,u+1,u+6),j(this,u+2,u+5),j(this,u+3,u+4);return this},r.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?K(this,0,a):I.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(a){if(!r.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:r.compare(this,a)===0},r.prototype.inspect=function(){var a="",u=C.INSPECT_MAX_BYTES;return a=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(a+=" ... "),"<Buffer "+a+">"},r.prototype.compare=function(a,u,_,B,J){if(d(a,Uint8Array)&&(a=r.from(a,a.offset,a.byteLength)),!r.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(u===void 0&&(u=0),_===void 0&&(_=a?a.length:0),B===void 0&&(B=0),J===void 0&&(J=this.length),u<0||_>a.length||B<0||J>this.length)throw new RangeError("out of range index");if(B>=J&&u>=_)return 0;if(B>=J)return-1;if(u>=_)return 1;if(u>>>=0,_>>>=0,B>>>=0,J>>>=0,this===a)return 0;for(var ne=J-B,ce=_-u,de=Math.min(ne,ce),pe=this.slice(B,J),N=a.slice(u,_),W=0;W<de;++W)if(pe[W]!==N[W]){ne=pe[W],ce=N[W];break}return ne<ce?-1:ce<ne?1:0};function R(c,a,u,_,B){if(c.length===0)return-1;if(typeof u=="string"?(_=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,m(u)&&(u=B?0:c.length-1),u<0&&(u=c.length+u),u>=c.length){if(B)return-1;u=c.length-1}else if(u<0)if(B)u=0;else return-1;if(typeof a=="string"&&(a=r.from(a,_)),r.isBuffer(a))return a.length===0?-1:T(c,a,u,_,B);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(c,a,u):Uint8Array.prototype.lastIndexOf.call(c,a,u):T(c,[a],u,_,B);throw new TypeError("val must be string, number or Buffer")}function T(c,a,u,_,B){var J=1,ne=c.length,ce=a.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(c.length<2||a.length<2)return-1;J=2,ne/=2,ce/=2,u/=2}function de(ue,he){return J===1?ue[he]:ue.readUInt16BE(he*J)}var pe;if(B){var N=-1;for(pe=u;pe<ne;pe++)if(de(c,pe)===de(a,N===-1?0:pe-N)){if(N===-1&&(N=pe),pe-N+1===ce)return N*J}else N!==-1&&(pe-=pe-N),N=-1}else for(u+ce>ne&&(u=ne-ce),pe=u;pe>=0;pe--){for(var W=!0,fe=0;fe<ce;fe++)if(de(c,pe+fe)!==de(a,fe)){W=!1;break}if(W)return pe}return-1}r.prototype.includes=function(a,u,_){return this.indexOf(a,u,_)!==-1},r.prototype.indexOf=function(a,u,_){return R(this,a,u,_,!0)},r.prototype.lastIndexOf=function(a,u,_){return R(this,a,u,_,!1)};function S(c,a,u,_){u=Number(u)||0;var B=c.length-u;_?(_=Number(_),_>B&&(_=B)):_=B;var J=a.length;_>J/2&&(_=J/2);for(var ne=0;ne<_;++ne){var ce=parseInt(a.substr(ne*2,2),16);if(m(ce))return ne;c[u+ne]=ce}return ne}function A(c,a,u,_){return re(U(a,c.length-u),c,u,_)}function b(c,a,u,_){return re(H(a),c,u,_)}function z(c,a,u,_){return b(c,a,u,_)}function k(c,a,u,_){return re(q(a),c,u,_)}function V(c,a,u,_){return re(Q(a,c.length-u),c,u,_)}r.prototype.write=function(a,u,_,B){if(u===void 0)B="utf8",_=this.length,u=0;else if(_===void 0&&typeof u=="string")B=u,_=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(_)?(_=_>>>0,B===void 0&&(B="utf8")):(B=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-u;if((_===void 0||_>J)&&(_=J),a.length>0&&(_<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");for(var ne=!1;;)switch(B){case"hex":return S(this,a,u,_);case"utf8":case"utf-8":return A(this,a,u,_);case"ascii":return b(this,a,u,_);case"latin1":case"binary":return z(this,a,u,_);case"base64":return k(this,a,u,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,a,u,_);default:if(ne)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),ne=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(c,a,u){return a===0&&u===c.length?p.fromByteArray(c):p.fromByteArray(c.slice(a,u))}function K(c,a,u){u=Math.min(c.length,u);for(var _=[],B=a;B<u;){var J=c[B],ne=null,ce=J>239?4:J>223?3:J>191?2:1;if(B+ce<=u){var de,pe,N,W;switch(ce){case 1:J<128&&(ne=J);break;case 2:de=c[B+1],(de&192)===128&&(W=(J&31)<<6|de&63,W>127&&(ne=W));break;case 3:de=c[B+1],pe=c[B+2],(de&192)===128&&(pe&192)===128&&(W=(J&15)<<12|(de&63)<<6|pe&63,W>2047&&(W<55296||W>57343)&&(ne=W));break;case 4:de=c[B+1],pe=c[B+2],N=c[B+3],(de&192)===128&&(pe&192)===128&&(N&192)===128&&(W=(J&15)<<18|(de&63)<<12|(pe&63)<<6|N&63,W>65535&&W<1114112&&(ne=W))}}ne===null?(ne=65533,ce=1):ne>65535&&(ne-=65536,_.push(ne>>>10&1023|55296),ne=56320|ne&1023),_.push(ne),B+=ce}return ie(_)}var oe=4096;function ie(c){var a=c.length;if(a<=oe)return String.fromCharCode.apply(String,c);for(var u="",_=0;_<a;)u+=String.fromCharCode.apply(String,c.slice(_,_+=oe));return u}function Y(c,a,u){var _="";u=Math.min(c.length,u);for(var B=a;B<u;++B)_+=String.fromCharCode(c[B]&127);return _}function le(c,a,u){var _="";u=Math.min(c.length,u);for(var B=a;B<u;++B)_+=String.fromCharCode(c[B]);return _}function se(c,a,u){var _=c.length;(!a||a<0)&&(a=0),(!u||u<0||u>_)&&(u=_);for(var B="",J=a;J<u;++J)B+=Z(c[J]);return B}function X(c,a,u){for(var _=c.slice(a,u),B="",J=0;J<_.length;J+=2)B+=String.fromCharCode(_[J]+_[J+1]*256);return B}r.prototype.slice=function(a,u){var _=this.length;a=~~a,u=u===void 0?_:~~u,a<0?(a+=_,a<0&&(a=0)):a>_&&(a=_),u<0?(u+=_,u<0&&(u=0)):u>_&&(u=_),u<a&&(u=a);var B=this.subarray(a,u);return B.__proto__=r.prototype,B};function P(c,a,u){if(c%1!==0||c<0)throw new RangeError("offset is not uint");if(c+a>u)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUIntLE=function(a,u,_){a=a>>>0,u=u>>>0,_||P(a,u,this.length);for(var B=this[a],J=1,ne=0;++ne<u&&(J*=256);)B+=this[a+ne]*J;return B},r.prototype.readUIntBE=function(a,u,_){a=a>>>0,u=u>>>0,_||P(a,u,this.length);for(var B=this[a+--u],J=1;u>0&&(J*=256);)B+=this[a+--u]*J;return B},r.prototype.readUInt8=function(a,u){return a=a>>>0,u||P(a,1,this.length),this[a]},r.prototype.readUInt16LE=function(a,u){return a=a>>>0,u||P(a,2,this.length),this[a]|this[a+1]<<8},r.prototype.readUInt16BE=function(a,u){return a=a>>>0,u||P(a,2,this.length),this[a]<<8|this[a+1]},r.prototype.readUInt32LE=function(a,u){return a=a>>>0,u||P(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},r.prototype.readUInt32BE=function(a,u){return a=a>>>0,u||P(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},r.prototype.readIntLE=function(a,u,_){a=a>>>0,u=u>>>0,_||P(a,u,this.length);for(var B=this[a],J=1,ne=0;++ne<u&&(J*=256);)B+=this[a+ne]*J;return J*=128,B>=J&&(B-=Math.pow(2,8*u)),B},r.prototype.readIntBE=function(a,u,_){a=a>>>0,u=u>>>0,_||P(a,u,this.length);for(var B=u,J=1,ne=this[a+--B];B>0&&(J*=256);)ne+=this[a+--B]*J;return J*=128,ne>=J&&(ne-=Math.pow(2,8*u)),ne},r.prototype.readInt8=function(a,u){return a=a>>>0,u||P(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},r.prototype.readInt16LE=function(a,u){a=a>>>0,u||P(a,2,this.length);var _=this[a]|this[a+1]<<8;return _&32768?_|4294901760:_},r.prototype.readInt16BE=function(a,u){a=a>>>0,u||P(a,2,this.length);var _=this[a+1]|this[a]<<8;return _&32768?_|4294901760:_},r.prototype.readInt32LE=function(a,u){return a=a>>>0,u||P(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},r.prototype.readInt32BE=function(a,u){return a=a>>>0,u||P(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},r.prototype.readFloatLE=function(a,u){return a=a>>>0,u||P(a,4,this.length),y.read(this,a,!0,23,4)},r.prototype.readFloatBE=function(a,u){return a=a>>>0,u||P(a,4,this.length),y.read(this,a,!1,23,4)},r.prototype.readDoubleLE=function(a,u){return a=a>>>0,u||P(a,8,this.length),y.read(this,a,!0,52,8)},r.prototype.readDoubleBE=function(a,u){return a=a>>>0,u||P(a,8,this.length),y.read(this,a,!1,52,8)};function $(c,a,u,_,B,J){if(!r.isBuffer(c))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>B||a<J)throw new RangeError('"value" argument is out of bounds');if(u+_>c.length)throw new RangeError("Index out of range")}r.prototype.writeUIntLE=function(a,u,_,B){if(a=+a,u=u>>>0,_=_>>>0,!B){var J=Math.pow(2,8*_)-1;$(this,a,u,_,J,0)}var ne=1,ce=0;for(this[u]=a&255;++ce<_&&(ne*=256);)this[u+ce]=a/ne&255;return u+_},r.prototype.writeUIntBE=function(a,u,_,B){if(a=+a,u=u>>>0,_=_>>>0,!B){var J=Math.pow(2,8*_)-1;$(this,a,u,_,J,0)}var ne=_-1,ce=1;for(this[u+ne]=a&255;--ne>=0&&(ce*=256);)this[u+ne]=a/ce&255;return u+_},r.prototype.writeUInt8=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,1,255,0),this[u]=a&255,u+1},r.prototype.writeUInt16LE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,2,65535,0),this[u]=a&255,this[u+1]=a>>>8,u+2},r.prototype.writeUInt16BE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,2,65535,0),this[u]=a>>>8,this[u+1]=a&255,u+2},r.prototype.writeUInt32LE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,4,4294967295,0),this[u+3]=a>>>24,this[u+2]=a>>>16,this[u+1]=a>>>8,this[u]=a&255,u+4},r.prototype.writeUInt32BE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,4,4294967295,0),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4},r.prototype.writeIntLE=function(a,u,_,B){if(a=+a,u=u>>>0,!B){var J=Math.pow(2,8*_-1);$(this,a,u,_,J-1,-J)}var ne=0,ce=1,de=0;for(this[u]=a&255;++ne<_&&(ce*=256);)a<0&&de===0&&this[u+ne-1]!==0&&(de=1),this[u+ne]=(a/ce>>0)-de&255;return u+_},r.prototype.writeIntBE=function(a,u,_,B){if(a=+a,u=u>>>0,!B){var J=Math.pow(2,8*_-1);$(this,a,u,_,J-1,-J)}var ne=_-1,ce=1,de=0;for(this[u+ne]=a&255;--ne>=0&&(ce*=256);)a<0&&de===0&&this[u+ne+1]!==0&&(de=1),this[u+ne]=(a/ce>>0)-de&255;return u+_},r.prototype.writeInt8=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,1,127,-128),a<0&&(a=255+a+1),this[u]=a&255,u+1},r.prototype.writeInt16LE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,2,32767,-32768),this[u]=a&255,this[u+1]=a>>>8,u+2},r.prototype.writeInt16BE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,2,32767,-32768),this[u]=a>>>8,this[u+1]=a&255,u+2},r.prototype.writeInt32LE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,4,2147483647,-2147483648),this[u]=a&255,this[u+1]=a>>>8,this[u+2]=a>>>16,this[u+3]=a>>>24,u+4},r.prototype.writeInt32BE=function(a,u,_){return a=+a,u=u>>>0,_||$(this,a,u,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[u]=a>>>24,this[u+1]=a>>>16,this[u+2]=a>>>8,this[u+3]=a&255,u+4};function te(c,a,u,_,B,J){if(u+_>c.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function ae(c,a,u,_,B){return a=+a,u=u>>>0,B||te(c,a,u,4),y.write(c,a,u,_,23,4),u+4}r.prototype.writeFloatLE=function(a,u,_){return ae(this,a,u,!0,_)},r.prototype.writeFloatBE=function(a,u,_){return ae(this,a,u,!1,_)};function ee(c,a,u,_,B){return a=+a,u=u>>>0,B||te(c,a,u,8),y.write(c,a,u,_,52,8),u+8}r.prototype.writeDoubleLE=function(a,u,_){return ee(this,a,u,!0,_)},r.prototype.writeDoubleBE=function(a,u,_){return ee(this,a,u,!1,_)},r.prototype.copy=function(a,u,_,B){if(!r.isBuffer(a))throw new TypeError("argument should be a Buffer");if(_||(_=0),!B&&B!==0&&(B=this.length),u>=a.length&&(u=a.length),u||(u=0),B>0&&B<_&&(B=_),B===_||a.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),a.length-u<B-_&&(B=a.length-u+_);var J=B-_;if(this===a&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(u,_,B);else if(this===a&&_<u&&u<B)for(var ne=J-1;ne>=0;--ne)a[ne+u]=this[ne+_];else Uint8Array.prototype.set.call(a,this.subarray(_,B),u);return J},r.prototype.fill=function(a,u,_,B){if(typeof a=="string"){if(typeof u=="string"?(B=u,u=0,_=this.length):typeof _=="string"&&(B=_,_=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!r.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(a.length===1){var J=a.charCodeAt(0);(B==="utf8"&&J<128||B==="latin1")&&(a=J)}}else typeof a=="number"&&(a=a&255);if(u<0||this.length<u||this.length<_)throw new RangeError("Out of range index");if(_<=u)return this;u=u>>>0,_=_===void 0?this.length:_>>>0,a||(a=0);var ne;if(typeof a=="number")for(ne=u;ne<_;++ne)this[ne]=a;else{var ce=r.isBuffer(a)?a:r.from(a,B),de=ce.length;if(de===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(ne=0;ne<_-u;++ne)this[ne+u]=ce[ne%de]}return this};var F=/[^+/0-9A-Za-z-_]/g;function L(c){if(c=c.split("=")[0],c=c.trim().replace(F,""),c.length<2)return"";for(;c.length%4!==0;)c=c+"=";return c}function Z(c){return c<16?"0"+c.toString(16):c.toString(16)}function U(c,a){a=a||1/0;for(var u,_=c.length,B=null,J=[],ne=0;ne<_;++ne){if(u=c.charCodeAt(ne),u>55295&&u<57344){if(!B){if(u>56319){(a-=3)>-1&&J.push(239,191,189);continue}else if(ne+1===_){(a-=3)>-1&&J.push(239,191,189);continue}B=u;continue}if(u<56320){(a-=3)>-1&&J.push(239,191,189),B=u;continue}u=(B-55296<<10|u-56320)+65536}else B&&(a-=3)>-1&&J.push(239,191,189);if(B=null,u<128){if((a-=1)<0)break;J.push(u)}else if(u<2048){if((a-=2)<0)break;J.push(u>>6|192,u&63|128)}else if(u<65536){if((a-=3)<0)break;J.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((a-=4)<0)break;J.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return J}function H(c){for(var a=[],u=0;u<c.length;++u)a.push(c.charCodeAt(u)&255);return a}function Q(c,a){for(var u,_,B,J=[],ne=0;ne<c.length&&!((a-=2)<0);++ne)u=c.charCodeAt(ne),_=u>>8,B=u%256,J.push(B),J.push(_);return J}function q(c){return p.toByteArray(L(c))}function re(c,a,u,_){for(var B=0;B<_&&!(B+u>=a.length||B>=c.length);++B)a[B+u]=c[B];return B}function d(c,a){return c instanceof a||c!=null&&c.constructor!=null&&c.constructor.name!=null&&c.constructor.name===a.name}function m(c){return c!==c}}).call(this)}).call(this,g("buffer").Buffer)},{"base64-js":25,buffer:29,ieee754:50}],30:[function(g,D,C){(function(l){(function(){C.formatArgs=y,C.save=f,C.load=s,C.useColors=p,C.storage=i(),C.destroy=(()=>{let e=!1;return()=>{e||(e=!0)}})(),C.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function p(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function y(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+D.exports.humanize(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,h=>{h!=="%%"&&(n++,h==="%c"&&(o=n))}),e.splice(o,0,t)}C.log=console.debug||console.log||(()=>{});function f(e){try{e?C.storage.setItem("debug",e):C.storage.removeItem("debug")}catch{}}function s(){let e;try{e=C.storage.getItem("debug")}catch{}return!e&&typeof l<"u"&&"env"in l&&(e={}.DEBUG),e}function i(){try{return localStorage}catch{}}D.exports=g("./common")(C);const{formatters:r}=D.exports;r.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,g("_process"))},{"./common":31,_process:102}],31:[function(g,D,C){function l(p){f.debug=f,f.default=f,f.coerce=n,f.disable=r,f.enable=i,f.enabled=e,f.humanize=g("ms"),f.destroy=o,Object.keys(p).forEach(h=>{f[h]=p[h]}),f.names=[],f.skips=[],f.formatters={};function y(h){let w=0;for(let E=0;E<h.length;E++)w=(w<<5)-w+h.charCodeAt(E),w|=0;return f.colors[Math.abs(w)%f.colors.length]}f.selectColor=y;function f(h){let w,E=null,v,M;function O(...x){if(!O.enabled)return;const I=O,j=Number(new Date),R=j-(w||j);I.diff=R,I.prev=w,I.curr=j,w=j,x[0]=f.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let T=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(A,b)=>{if(A==="%%")return"%";T++;const z=f.formatters[b];if(typeof z=="function"){const k=x[T];A=z.call(I,k),x.splice(T,1),T--}return A}),f.formatArgs.call(I,x),(I.log||f.log).apply(I,x)}return O.namespace=h,O.useColors=f.useColors(),O.color=f.selectColor(h),O.extend=s,O.destroy=f.destroy,Object.defineProperty(O,"enabled",{enumerable:!0,configurable:!1,get:()=>E!==null?E:(v!==f.namespaces&&(v=f.namespaces,M=f.enabled(h)),M),set:x=>{E=x}}),typeof f.init=="function"&&f.init(O),O}function s(h,w){const E=f(this.namespace+(typeof w>"u"?":":w)+h);return E.log=this.log,E}function i(h){f.save(h),f.namespaces=h,f.names=[],f.skips=[];let w;const E=(typeof h=="string"?h:"").split(/[\s,]+/),v=E.length;for(w=0;w<v;w++)E[w]&&(h=E[w].replace(/\*/g,".*?"),h[0]==="-"?f.skips.push(new RegExp("^"+h.slice(1)+"$")):f.names.push(new RegExp("^"+h+"$")))}function r(){const h=[...f.names.map(t),...f.skips.map(t).map(w=>"-"+w)].join(",");return f.enable(""),h}function e(h){if(h[h.length-1]==="*")return!0;let w,E;for(w=0,E=f.skips.length;w<E;w++)if(f.skips[w].test(h))return!1;for(w=0,E=f.names.length;w<E;w++)if(f.names[w].test(h))return!0;return!1}function t(h){return h.toString().substring(2,h.toString().length-2).replace(/\.\*\?$/,"*")}function n(h){return h instanceof Error?h.stack||h.message:h}function o(){}return f.enable(f.load()),f}D.exports=l},{ms:97}],32:[function(g,D,C){(function(l,p){(function(){var y=g("readable-stream"),f=g("end-of-stream"),s=g("inherits"),i=g("stream-shift"),r=p.from&&p.from!==Uint8Array.from?p.from([0]):new p([0]),e=function(v,M){v._corked?v.once("uncork",M):M()},t=function(v,M){v._autoDestroy&&v.destroy(M)},n=function(v,M){return function(O){O?t(v,O.message==="premature close"?null:O):M&&!v._ended&&v.end()}},o=function(v,M){if(!v||v._writableState&&v._writableState.finished)return M();if(v._writableState)return v.end(M);v.end(),M()},h=function(){},w=function(v){return new y.Readable({objectMode:!0,highWaterMark:16}).wrap(v)},E=function(v,M,O){if(!(this instanceof E))return new E(v,M,O);y.Duplex.call(this,O),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!O||O.autoDestroy!==!1,this._forwardDestroy=!O||O.destroy!==!1,this._forwardEnd=!O||O.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,v&&this.setWritable(v),M&&this.setReadable(M)};s(E,y.Duplex),E.obj=function(v,M,O){return O||(O={}),O.objectMode=!0,O.highWaterMark=16,new E(v,M,O)},E.prototype.cork=function(){++this._corked===1&&this.emit("cork")},E.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},E.prototype.setWritable=function(v){if(this._unwrite&&this._unwrite(),this.destroyed){v&&v.destroy&&v.destroy();return}if(v===null||v===!1){this.end();return}var M=this,O=f(v,{writable:!0,readable:!1},n(this,this._forwardEnd)),x=function(){var j=M._ondrain;M._ondrain=null,j&&j()},I=function(){M._writable.removeListener("drain",x),O()};this._unwrite&&l.nextTick(x),this._writable=v,this._writable.on("drain",x),this._unwrite=I,this.uncork()},E.prototype.setReadable=function(v){if(this._unread&&this._unread(),this.destroyed){v&&v.destroy&&v.destroy();return}if(v===null||v===!1){this.push(null),this.resume();return}var M=this,O=f(v,{writable:!1,readable:!0},n(this)),x=function(){M._forward()},I=function(){M.push(null)},j=function(){M._readable2.removeListener("readable",x),M._readable2.removeListener("end",I),O()};this._drained=!0,this._readable=v,this._readable2=v._readableState?v:w(v),this._readable2.on("readable",x),this._readable2.on("end",I),this._unread=j,this._forward()},E.prototype._read=function(){this._drained=!0,this._forward()},E.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var v;this._drained&&(v=i(this._readable2))!==null;)this.destroyed||(this._drained=this.push(v));this._forwarding=!1}},E.prototype.destroy=function(v,M){if(M||(M=h),this.destroyed)return M(null);this.destroyed=!0;var O=this;l.nextTick(function(){O._destroy(v),M(null)})},E.prototype._destroy=function(v){if(v){var M=this._ondrain;this._ondrain=null,M?M(v):this.emit("error",v)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},E.prototype._write=function(v,M,O){if(!this.destroyed){if(this._corked)return e(this,this._write.bind(this,v,M,O));if(v===r)return this._finish(O);if(!this._writable)return O();this._writable.write(v)===!1?this._ondrain=O:this.destroyed||O()}},E.prototype._finish=function(v){var M=this;this.emit("preend"),e(this,function(){o(M._forwardEnd&&M._writable,function(){M._writableState.prefinished===!1&&(M._writableState.prefinished=!0),M.emit("prefinish"),e(M,v)})})},E.prototype.end=function(v,M,O){return typeof v=="function"?this.end(null,null,v):typeof M=="function"?this.end(v,null,M):(this._ended=!0,v&&this.write(v),!this._writableState.ending&&!this._writableState.destroyed&&this.write(r),y.Writable.prototype.end.call(this,O))},D.exports=E}).call(this)}).call(this,g("_process"),g("buffer").Buffer)},{_process:102,buffer:29,"end-of-stream":48,inherits:51,"readable-stream":47,"stream-shift":135}],33:[function(g,D,C){function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var p={};function y(e,t,n){n||(n=Error);function o(w,E,v){return typeof t=="string"?t:t(w,E,v)}var h=function(w){l(E,w);function E(v,M,O){return w.call(this,o(v,M,O))||this}return E}(n);h.prototype.name=n.name,h.prototype.code=e,p[e]=h}function f(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(o){return String(o)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:n===2?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}else return"of ".concat(t," ").concat(String(e))}function s(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}function i(e,t,n){return(n===void 0||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}function r(e,t,n){return typeof n!="number"&&(n=0),n+t.length>e.length?!1:e.indexOf(t,n)!==-1}y("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),y("ERR_INVALID_ARG_TYPE",function(e,t,n){var o;typeof t=="string"&&s(t,"not ")?(o="must not be",t=t.replace(/^not /,"")):o="must be";var h;if(i(e," argument"))h="The ".concat(e," ").concat(o," ").concat(f(t,"type"));else{var w=r(e,".")?"property":"argument";h='The "'.concat(e,'" ').concat(w," ").concat(o," ").concat(f(t,"type"))}return h+=". Received type ".concat(typeof n),h},TypeError),y("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),y("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),y("ERR_STREAM_PREMATURE_CLOSE","Premature close"),y("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),y("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),y("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),y("ERR_STREAM_WRITE_AFTER_END","write after end"),y("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),y("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),y("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),D.exports.codes=p},{}],34:[function(g,D,C){(function(l){(function(){var p=Object.keys||function(o){var h=[];for(var w in o)h.push(w);return h};D.exports=e;var y=g("./_stream_readable"),f=g("./_stream_writable");g("inherits")(e,y);for(var s=p(f.prototype),i=0;i<s.length;i++){var r=s[i];e.prototype[r]||(e.prototype[r]=f.prototype[r])}function e(o){if(!(this instanceof e))return new e(o);y.call(this,o),f.call(this,o),this.allowHalfOpen=!0,o&&(o.readable===!1&&(this.readable=!1),o.writable===!1&&(this.writable=!1),o.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",t)))}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function t(){this._writableState.ended||l.nextTick(n,this)}function n(o){o.end()}Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=h,this._writableState.destroyed=h)}})}).call(this)}).call(this,g("_process"))},{"./_stream_readable":36,"./_stream_writable":38,_process:102,inherits:51}],35:[function(g,D,C){D.exports=p;var l=g("./_stream_transform");g("inherits")(p,l);function p(y){if(!(this instanceof p))return new p(y);l.call(this,y)}p.prototype._transform=function(y,f,s){s(null,y)}},{"./_stream_transform":37,inherits:51}],36:[function(g,D,C){(function(l,p){(function(){D.exports=V;var y;V.ReadableState=k,g("events").EventEmitter;var f=function(m,c){return m.listeners(c).length},s=g("./internal/streams/stream"),i=g("buffer").Buffer,r=p.Uint8Array||function(){};function e(d){return i.from(d)}function t(d){return i.isBuffer(d)||d instanceof r}var n=g("util"),o;n&&n.debuglog?o=n.debuglog("stream"):o=function(){};var h=g("./internal/streams/buffer_list"),w=g("./internal/streams/destroy"),E=g("./internal/streams/state"),v=E.getHighWaterMark,M=g("../errors").codes,O=M.ERR_INVALID_ARG_TYPE,x=M.ERR_STREAM_PUSH_AFTER_EOF,I=M.ERR_METHOD_NOT_IMPLEMENTED,j=M.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,T,S;g("inherits")(V,s);var A=w.errorOrDestroy,b=["error","close","destroy","pause","resume"];function z(d,m,c){if(typeof d.prependListener=="function")return d.prependListener(m,c);!d._events||!d._events[m]?d.on(m,c):Array.isArray(d._events[m])?d._events[m].unshift(c):d._events[m]=[c,d._events[m]]}function k(d,m,c){y=y||g("./_stream_duplex"),d=d||{},typeof c!="boolean"&&(c=m instanceof y),this.objectMode=!!d.objectMode,c&&(this.objectMode=this.objectMode||!!d.readableObjectMode),this.highWaterMark=v(this,d,"readableHighWaterMark",c),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=d.emitClose!==!1,this.autoDestroy=!!d.autoDestroy,this.destroyed=!1,this.defaultEncoding=d.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,d.encoding&&(R||(R=g("string_decoder/").StringDecoder),this.decoder=new R(d.encoding),this.encoding=d.encoding)}function V(d){if(y=y||g("./_stream_duplex"),!(this instanceof V))return new V(d);var m=this instanceof y;this._readableState=new k(d,this,m),this.readable=!0,d&&(typeof d.read=="function"&&(this._read=d.read),typeof d.destroy=="function"&&(this._destroy=d.destroy)),s.call(this)}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(m){this._readableState&&(this._readableState.destroyed=m)}}),V.prototype.destroy=w.destroy,V.prototype._undestroy=w.undestroy,V.prototype._destroy=function(d,m){m(d)},V.prototype.push=function(d,m){var c=this._readableState,a;return c.objectMode?a=!0:typeof d=="string"&&(m=m||c.defaultEncoding,m!==c.encoding&&(d=i.from(d,m),m=""),a=!0),G(this,d,m,!1,a)},V.prototype.unshift=function(d){return G(this,d,null,!0,!1)};function G(d,m,c,a,u){o("readableAddChunk",m);var _=d._readableState;if(m===null)_.reading=!1,se(d,_);else{var B;if(u||(B=oe(_,m)),B)A(d,B);else if(_.objectMode||m&&m.length>0)if(typeof m!="string"&&!_.objectMode&&Object.getPrototypeOf(m)!==i.prototype&&(m=e(m)),a)_.endEmitted?A(d,new j):K(d,_,m,!0);else if(_.ended)A(d,new x);else{if(_.destroyed)return!1;_.reading=!1,_.decoder&&!c?(m=_.decoder.write(m),_.objectMode||m.length!==0?K(d,_,m,!1):$(d,_)):K(d,_,m,!1)}else a||(_.reading=!1,$(d,_))}return!_.ended&&(_.length<_.highWaterMark||_.length===0)}function K(d,m,c,a){m.flowing&&m.length===0&&!m.sync?(m.awaitDrain=0,d.emit("data",c)):(m.length+=m.objectMode?1:c.length,a?m.buffer.unshift(c):m.buffer.push(c),m.needReadable&&X(d)),$(d,m)}function oe(d,m){var c;return!t(m)&&typeof m!="string"&&m!==void 0&&!d.objectMode&&(c=new O("chunk",["string","Buffer","Uint8Array"],m)),c}V.prototype.isPaused=function(){return this._readableState.flowing===!1},V.prototype.setEncoding=function(d){R||(R=g("string_decoder/").StringDecoder);var m=new R(d);this._readableState.decoder=m,this._readableState.encoding=this._readableState.decoder.encoding;for(var c=this._readableState.buffer.head,a="";c!==null;)a+=m.write(c.data),c=c.next;return this._readableState.buffer.clear(),a!==""&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var ie=1073741824;function Y(d){return d>=ie?d=ie:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++),d}function le(d,m){return d<=0||m.length===0&&m.ended?0:m.objectMode?1:d!==d?m.flowing&&m.length?m.buffer.head.data.length:m.length:(d>m.highWaterMark&&(m.highWaterMark=Y(d)),d<=m.length?d:m.ended?m.length:(m.needReadable=!0,0))}V.prototype.read=function(d){o("read",d),d=parseInt(d,10);var m=this._readableState,c=d;if(d!==0&&(m.emittedReadable=!1),d===0&&m.needReadable&&((m.highWaterMark!==0?m.length>=m.highWaterMark:m.length>0)||m.ended))return o("read: emitReadable",m.length,m.ended),m.length===0&&m.ended?Q(this):X(this),null;if(d=le(d,m),d===0&&m.ended)return m.length===0&&Q(this),null;var a=m.needReadable;o("need readable",a),(m.length===0||m.length-d<m.highWaterMark)&&(a=!0,o("length less than watermark",a)),m.ended||m.reading?(a=!1,o("reading or ended",a)):a&&(o("do read"),m.reading=!0,m.sync=!0,m.length===0&&(m.needReadable=!0),this._read(m.highWaterMark),m.sync=!1,m.reading||(d=le(c,m)));var u;return d>0?u=H(d,m):u=null,u===null?(m.needReadable=m.length<=m.highWaterMark,d=0):(m.length-=d,m.awaitDrain=0),m.length===0&&(m.ended||(m.needReadable=!0),c!==d&&m.ended&&Q(this)),u!==null&&this.emit("data",u),u};function se(d,m){if(o("onEofChunk"),!m.ended){if(m.decoder){var c=m.decoder.end();c&&c.length&&(m.buffer.push(c),m.length+=m.objectMode?1:c.length)}m.ended=!0,m.sync?X(d):(m.needReadable=!1,m.emittedReadable||(m.emittedReadable=!0,P(d)))}}function X(d){var m=d._readableState;o("emitReadable",m.needReadable,m.emittedReadable),m.needReadable=!1,m.emittedReadable||(o("emitReadable",m.flowing),m.emittedReadable=!0,l.nextTick(P,d))}function P(d){var m=d._readableState;o("emitReadable_",m.destroyed,m.length,m.ended),!m.destroyed&&(m.length||m.ended)&&(d.emit("readable"),m.emittedReadable=!1),m.needReadable=!m.flowing&&!m.ended&&m.length<=m.highWaterMark,U(d)}function $(d,m){m.readingMore||(m.readingMore=!0,l.nextTick(te,d,m))}function te(d,m){for(;!m.reading&&!m.ended&&(m.length<m.highWaterMark||m.flowing&&m.length===0);){var c=m.length;if(o("maybeReadMore read 0"),d.read(0),c===m.length)break}m.readingMore=!1}V.prototype._read=function(d){A(this,new I("_read()"))},V.prototype.pipe=function(d,m){var c=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=d;break;case 1:a.pipes=[a.pipes,d];break;default:a.pipes.push(d);break}a.pipesCount+=1,o("pipe count=%d opts=%j",a.pipesCount,m);var u=(!m||m.end!==!1)&&d!==l.stdout&&d!==l.stderr,_=u?J:ue;a.endEmitted?l.nextTick(_):c.once("end",_),d.on("unpipe",B);function B(he,ge){o("onunpipe"),he===c&&ge&&ge.hasUnpiped===!1&&(ge.hasUnpiped=!0,de())}function J(){o("onend"),d.end()}var ne=ae(c);d.on("drain",ne);var ce=!1;function de(){o("cleanup"),d.removeListener("close",W),d.removeListener("finish",fe),d.removeListener("drain",ne),d.removeListener("error",N),d.removeListener("unpipe",B),c.removeListener("end",J),c.removeListener("end",ue),c.removeListener("data",pe),ce=!0,a.awaitDrain&&(!d._writableState||d._writableState.needDrain)&&ne()}c.on("data",pe);function pe(he){o("ondata");var ge=d.write(he);o("dest.write",ge),ge===!1&&((a.pipesCount===1&&a.pipes===d||a.pipesCount>1&&re(a.pipes,d)!==-1)&&!ce&&(o("false write response, pause",a.awaitDrain),a.awaitDrain++),c.pause())}function N(he){o("onerror",he),ue(),d.removeListener("error",N),f(d,"error")===0&&A(d,he)}z(d,"error",N);function W(){d.removeListener("finish",fe),ue()}d.once("close",W);function fe(){o("onfinish"),d.removeListener("close",W),ue()}d.once("finish",fe);function ue(){o("unpipe"),c.unpipe(d)}return d.emit("pipe",c),a.flowing||(o("pipe resume"),c.resume()),d};function ae(d){return function(){var c=d._readableState;o("pipeOnDrain",c.awaitDrain),c.awaitDrain&&c.awaitDrain--,c.awaitDrain===0&&f(d,"data")&&(c.flowing=!0,U(d))}}V.prototype.unpipe=function(d){var m=this._readableState,c={hasUnpiped:!1};if(m.pipesCount===0)return this;if(m.pipesCount===1)return d&&d!==m.pipes?this:(d||(d=m.pipes),m.pipes=null,m.pipesCount=0,m.flowing=!1,d&&d.emit("unpipe",this,c),this);if(!d){var a=m.pipes,u=m.pipesCount;m.pipes=null,m.pipesCount=0,m.flowing=!1;for(var _=0;_<u;_++)a[_].emit("unpipe",this,{hasUnpiped:!1});return this}var B=re(m.pipes,d);return B===-1?this:(m.pipes.splice(B,1),m.pipesCount-=1,m.pipesCount===1&&(m.pipes=m.pipes[0]),d.emit("unpipe",this,c),this)},V.prototype.on=function(d,m){var c=s.prototype.on.call(this,d,m),a=this._readableState;return d==="data"?(a.readableListening=this.listenerCount("readable")>0,a.flowing!==!1&&this.resume()):d==="readable"&&!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,o("on readable",a.length,a.reading),a.length?X(this):a.reading||l.nextTick(F,this)),c},V.prototype.addListener=V.prototype.on,V.prototype.removeListener=function(d,m){var c=s.prototype.removeListener.call(this,d,m);return d==="readable"&&l.nextTick(ee,this),c},V.prototype.removeAllListeners=function(d){var m=s.prototype.removeAllListeners.apply(this,arguments);return(d==="readable"||d===void 0)&&l.nextTick(ee,this),m};function ee(d){var m=d._readableState;m.readableListening=d.listenerCount("readable")>0,m.resumeScheduled&&!m.paused?m.flowing=!0:d.listenerCount("data")>0&&d.resume()}function F(d){o("readable nexttick read 0"),d.read(0)}V.prototype.resume=function(){var d=this._readableState;return d.flowing||(o("resume"),d.flowing=!d.readableListening,L(this,d)),d.paused=!1,this};function L(d,m){m.resumeScheduled||(m.resumeScheduled=!0,l.nextTick(Z,d,m))}function Z(d,m){o("resume",m.reading),m.reading||d.read(0),m.resumeScheduled=!1,d.emit("resume"),U(d),m.flowing&&!m.reading&&d.read(0)}V.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function U(d){var m=d._readableState;for(o("flow",m.flowing);m.flowing&&d.read()!==null;);}V.prototype.wrap=function(d){var m=this,c=this._readableState,a=!1;d.on("end",function(){if(o("wrapped end"),c.decoder&&!c.ended){var B=c.decoder.end();B&&B.length&&m.push(B)}m.push(null)}),d.on("data",function(B){if(o("wrapped data"),c.decoder&&(B=c.decoder.write(B)),!(c.objectMode&&B==null)&&!(!c.objectMode&&(!B||!B.length))){var J=m.push(B);J||(a=!0,d.pause())}});for(var u in d)this[u]===void 0&&typeof d[u]=="function"&&(this[u]=function(J){return function(){return d[J].apply(d,arguments)}}(u));for(var _=0;_<b.length;_++)d.on(b[_],this.emit.bind(this,b[_]));return this._read=function(B){o("wrapped _read",B),a&&(a=!1,d.resume())},this},typeof Symbol=="function"&&(V.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=g("./internal/streams/async_iterator")),T(this)}),Object.defineProperty(V.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(V.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(V.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(m){this._readableState&&(this._readableState.flowing=m)}}),V._fromList=H,Object.defineProperty(V.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function H(d,m){if(m.length===0)return null;var c;return m.objectMode?c=m.buffer.shift():!d||d>=m.length?(m.decoder?c=m.buffer.join(""):m.buffer.length===1?c=m.buffer.first():c=m.buffer.concat(m.length),m.buffer.clear()):c=m.buffer.consume(d,m.decoder),c}function Q(d){var m=d._readableState;o("endReadable",m.endEmitted),m.endEmitted||(m.ended=!0,l.nextTick(q,m,d))}function q(d,m){if(o("endReadableNT",d.endEmitted,d.length),!d.endEmitted&&d.length===0&&(d.endEmitted=!0,m.readable=!1,m.emit("end"),d.autoDestroy)){var c=m._writableState;(!c||c.autoDestroy&&c.finished)&&m.destroy()}}typeof Symbol=="function"&&(V.from=function(d,m){return S===void 0&&(S=g("./internal/streams/from")),S(V,d,m)});function re(d,m){for(var c=0,a=d.length;c<a;c++)if(d[c]===m)return c;return-1}}).call(this)}).call(this,g("_process"),typeof me<"u"?me:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":33,"./_stream_duplex":34,"./internal/streams/async_iterator":39,"./internal/streams/buffer_list":40,"./internal/streams/destroy":41,"./internal/streams/from":43,"./internal/streams/state":45,"./internal/streams/stream":46,_process:102,buffer:29,events:49,inherits:51,"string_decoder/":136,util:26}],37:[function(g,D,C){D.exports=e;var l=g("../errors").codes,p=l.ERR_METHOD_NOT_IMPLEMENTED,y=l.ERR_MULTIPLE_CALLBACK,f=l.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=l.ERR_TRANSFORM_WITH_LENGTH_0,i=g("./_stream_duplex");g("inherits")(e,i);function r(o,h){var w=this._transformState;w.transforming=!1;var E=w.writecb;if(E===null)return this.emit("error",new y);w.writechunk=null,w.writecb=null,h!=null&&this.push(h),E(o);var v=this._readableState;v.reading=!1,(v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}function e(o){if(!(this instanceof e))return new e(o);i.call(this,o),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&(typeof o.transform=="function"&&(this._transform=o.transform),typeof o.flush=="function"&&(this._flush=o.flush)),this.on("prefinish",t)}function t(){var o=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(h,w){n(o,h,w)}):n(this,null,null)}e.prototype.push=function(o,h){return this._transformState.needTransform=!1,i.prototype.push.call(this,o,h)},e.prototype._transform=function(o,h,w){w(new p("_transform()"))},e.prototype._write=function(o,h,w){var E=this._transformState;if(E.writecb=w,E.writechunk=o,E.writeencoding=h,!E.transforming){var v=this._readableState;(E.needTransform||v.needReadable||v.length<v.highWaterMark)&&this._read(v.highWaterMark)}},e.prototype._read=function(o){var h=this._transformState;h.writechunk!==null&&!h.transforming?(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform)):h.needTransform=!0},e.prototype._destroy=function(o,h){i.prototype._destroy.call(this,o,function(w){h(w)})};function n(o,h,w){if(h)return o.emit("error",h);if(w!=null&&o.push(w),o._writableState.length)throw new s;if(o._transformState.transforming)throw new f;return o.push(null)}},{"../errors":33,"./_stream_duplex":34,inherits:51}],38:[function(g,D,C){(function(l,p){(function(){D.exports=k;function y(U){var H=this;this.next=null,this.entry=null,this.finish=function(){Z(H,U)}}var f;k.WritableState=b;var s={deprecate:g("util-deprecate")},i=g("./internal/streams/stream"),r=g("buffer").Buffer,e=p.Uint8Array||function(){};function t(U){return r.from(U)}function n(U){return r.isBuffer(U)||U instanceof e}var o=g("./internal/streams/destroy"),h=g("./internal/streams/state"),w=h.getHighWaterMark,E=g("../errors").codes,v=E.ERR_INVALID_ARG_TYPE,M=E.ERR_METHOD_NOT_IMPLEMENTED,O=E.ERR_MULTIPLE_CALLBACK,x=E.ERR_STREAM_CANNOT_PIPE,I=E.ERR_STREAM_DESTROYED,j=E.ERR_STREAM_NULL_VALUES,R=E.ERR_STREAM_WRITE_AFTER_END,T=E.ERR_UNKNOWN_ENCODING,S=o.errorOrDestroy;g("inherits")(k,i);function A(){}function b(U,H,Q){f=f||g("./_stream_duplex"),U=U||{},typeof Q!="boolean"&&(Q=H instanceof f),this.objectMode=!!U.objectMode,Q&&(this.objectMode=this.objectMode||!!U.writableObjectMode),this.highWaterMark=w(this,U,"writableHighWaterMark",Q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var q=U.decodeStrings===!1;this.decodeStrings=!q,this.defaultEncoding=U.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(re){se(H,re)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=U.emitClose!==!1,this.autoDestroy=!!U.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new y(this)}b.prototype.getBuffer=function(){for(var H=this.bufferedRequest,Q=[];H;)Q.push(H),H=H.next;return Q},function(){try{Object.defineProperty(b.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var z;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(z=Function.prototype[Symbol.hasInstance],Object.defineProperty(k,Symbol.hasInstance,{value:function(H){return z.call(this,H)?!0:this!==k?!1:H&&H._writableState instanceof b}})):z=function(H){return H instanceof this};function k(U){f=f||g("./_stream_duplex");var H=this instanceof f;if(!H&&!z.call(k,this))return new k(U);this._writableState=new b(U,this,H),this.writable=!0,U&&(typeof U.write=="function"&&(this._write=U.write),typeof U.writev=="function"&&(this._writev=U.writev),typeof U.destroy=="function"&&(this._destroy=U.destroy),typeof U.final=="function"&&(this._final=U.final)),i.call(this)}k.prototype.pipe=function(){S(this,new x)};function V(U,H){var Q=new R;S(U,Q),l.nextTick(H,Q)}function G(U,H,Q,q){var re;return Q===null?re=new j:typeof Q!="string"&&!H.objectMode&&(re=new v("chunk",["string","Buffer"],Q)),re?(S(U,re),l.nextTick(q,re),!1):!0}k.prototype.write=function(U,H,Q){var q=this._writableState,re=!1,d=!q.objectMode&&n(U);return d&&!r.isBuffer(U)&&(U=t(U)),typeof H=="function"&&(Q=H,H=null),d?H="buffer":H||(H=q.defaultEncoding),typeof Q!="function"&&(Q=A),q.ending?V(this,Q):(d||G(this,q,U,Q))&&(q.pendingcb++,re=oe(this,q,d,U,H,Q)),re},k.prototype.cork=function(){this._writableState.corked++},k.prototype.uncork=function(){var U=this._writableState;U.corked&&(U.corked--,!U.writing&&!U.corked&&!U.bufferProcessing&&U.bufferedRequest&&$(this,U))},k.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new T(H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(k.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function K(U,H,Q){return!U.objectMode&&U.decodeStrings!==!1&&typeof H=="string"&&(H=r.from(H,Q)),H}Object.defineProperty(k.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function oe(U,H,Q,q,re,d){if(!Q){var m=K(H,q,re);q!==m&&(Q=!0,re="buffer",q=m)}var c=H.objectMode?1:q.length;H.length+=c;var a=H.length<H.highWaterMark;if(a||(H.needDrain=!0),H.writing||H.corked){var u=H.lastBufferedRequest;H.lastBufferedRequest={chunk:q,encoding:re,isBuf:Q,callback:d,next:null},u?u.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else ie(U,H,!1,c,q,re,d);return a}function ie(U,H,Q,q,re,d,m){H.writelen=q,H.writecb=m,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new I("write")):Q?U._writev(re,H.onwrite):U._write(re,d,H.onwrite),H.sync=!1}function Y(U,H,Q,q,re){--H.pendingcb,Q?(l.nextTick(re,q),l.nextTick(F,U,H),U._writableState.errorEmitted=!0,S(U,q)):(re(q),U._writableState.errorEmitted=!0,S(U,q),F(U,H))}function le(U){U.writing=!1,U.writecb=null,U.length-=U.writelen,U.writelen=0}function se(U,H){var Q=U._writableState,q=Q.sync,re=Q.writecb;if(typeof re!="function")throw new O;if(le(Q),H)Y(U,Q,q,H,re);else{var d=te(Q)||U.destroyed;!d&&!Q.corked&&!Q.bufferProcessing&&Q.bufferedRequest&&$(U,Q),q?l.nextTick(X,U,Q,d,re):X(U,Q,d,re)}}function X(U,H,Q,q){Q||P(U,H),H.pendingcb--,q(),F(U,H)}function P(U,H){H.length===0&&H.needDrain&&(H.needDrain=!1,U.emit("drain"))}function $(U,H){H.bufferProcessing=!0;var Q=H.bufferedRequest;if(U._writev&&Q&&Q.next){var q=H.bufferedRequestCount,re=new Array(q),d=H.corkedRequestsFree;d.entry=Q;for(var m=0,c=!0;Q;)re[m]=Q,Q.isBuf||(c=!1),Q=Q.next,m+=1;re.allBuffers=c,ie(U,H,!0,H.length,re,"",d.finish),H.pendingcb++,H.lastBufferedRequest=null,d.next?(H.corkedRequestsFree=d.next,d.next=null):H.corkedRequestsFree=new y(H),H.bufferedRequestCount=0}else{for(;Q;){var a=Q.chunk,u=Q.encoding,_=Q.callback,B=H.objectMode?1:a.length;if(ie(U,H,!1,B,a,u,_),Q=Q.next,H.bufferedRequestCount--,H.writing)break}Q===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=Q,H.bufferProcessing=!1}k.prototype._write=function(U,H,Q){Q(new M("_write()"))},k.prototype._writev=null,k.prototype.end=function(U,H,Q){var q=this._writableState;return typeof U=="function"?(Q=U,U=null,H=null):typeof H=="function"&&(Q=H,H=null),U!=null&&this.write(U,H),q.corked&&(q.corked=1,this.uncork()),q.ending||L(this,q,Q),this},Object.defineProperty(k.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function te(U){return U.ending&&U.length===0&&U.bufferedRequest===null&&!U.finished&&!U.writing}function ae(U,H){U._final(function(Q){H.pendingcb--,Q&&S(U,Q),H.prefinished=!0,U.emit("prefinish"),F(U,H)})}function ee(U,H){!H.prefinished&&!H.finalCalled&&(typeof U._final=="function"&&!H.destroyed?(H.pendingcb++,H.finalCalled=!0,l.nextTick(ae,U,H)):(H.prefinished=!0,U.emit("prefinish")))}function F(U,H){var Q=te(H);if(Q&&(ee(U,H),H.pendingcb===0&&(H.finished=!0,U.emit("finish"),H.autoDestroy))){var q=U._readableState;(!q||q.autoDestroy&&q.endEmitted)&&U.destroy()}return Q}function L(U,H,Q){H.ending=!0,F(U,H),Q&&(H.finished?l.nextTick(Q):U.once("finish",Q)),H.ended=!0,U.writable=!1}function Z(U,H,Q){var q=U.entry;for(U.entry=null;q;){var re=q.callback;H.pendingcb--,re(Q),q=q.next}H.corkedRequestsFree.next=U}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(H){this._writableState&&(this._writableState.destroyed=H)}}),k.prototype.destroy=o.destroy,k.prototype._undestroy=o.undestroy,k.prototype._destroy=function(U,H){H(U)}}).call(this)}).call(this,g("_process"),typeof me<"u"?me:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":33,"./_stream_duplex":34,"./internal/streams/destroy":41,"./internal/streams/state":45,"./internal/streams/stream":46,_process:102,buffer:29,inherits:51,"util-deprecate":139}],39:[function(g,D,C){(function(l){(function(){var p;function y(I,j,R){return j in I?Object.defineProperty(I,j,{value:R,enumerable:!0,configurable:!0,writable:!0}):I[j]=R,I}var f=g("./end-of-stream"),s=Symbol("lastResolve"),i=Symbol("lastReject"),r=Symbol("error"),e=Symbol("ended"),t=Symbol("lastPromise"),n=Symbol("handlePromise"),o=Symbol("stream");function h(I,j){return{value:I,done:j}}function w(I){var j=I[s];if(j!==null){var R=I[o].read();R!==null&&(I[t]=null,I[s]=null,I[i]=null,j(h(R,!1)))}}function E(I){l.nextTick(w,I)}function v(I,j){return function(R,T){I.then(function(){if(j[e]){R(h(void 0,!0));return}j[n](R,T)},T)}}var M=Object.getPrototypeOf(function(){}),O=Object.setPrototypeOf((p={get stream(){return this[o]},next:function(){var j=this,R=this[r];if(R!==null)return Promise.reject(R);if(this[e])return Promise.resolve(h(void 0,!0));if(this[o].destroyed)return new Promise(function(b,z){l.nextTick(function(){j[r]?z(j[r]):b(h(void 0,!0))})});var T=this[t],S;if(T)S=new Promise(v(T,this));else{var A=this[o].read();if(A!==null)return Promise.resolve(h(A,!1));S=new Promise(this[n])}return this[t]=S,S}},y(p,Symbol.asyncIterator,function(){return this}),y(p,"return",function(){var j=this;return new Promise(function(R,T){j[o].destroy(null,function(S){if(S){T(S);return}R(h(void 0,!0))})})}),p),M),x=function(j){var R,T=Object.create(O,(R={},y(R,o,{value:j,writable:!0}),y(R,s,{value:null,writable:!0}),y(R,i,{value:null,writable:!0}),y(R,r,{value:null,writable:!0}),y(R,e,{value:j._readableState.endEmitted,writable:!0}),y(R,n,{value:function(A,b){var z=T[o].read();z?(T[t]=null,T[s]=null,T[i]=null,A(h(z,!1))):(T[s]=A,T[i]=b)},writable:!0}),R));return T[t]=null,f(j,function(S){if(S&&S.code!=="ERR_STREAM_PREMATURE_CLOSE"){var A=T[i];A!==null&&(T[t]=null,T[s]=null,T[i]=null,A(S)),T[r]=S;return}var b=T[s];b!==null&&(T[t]=null,T[s]=null,T[i]=null,b(h(void 0,!0))),T[e]=!0}),j.on("readable",E.bind(null,T)),T};D.exports=x}).call(this)}).call(this,g("_process"))},{"./end-of-stream":42,_process:102}],40:[function(g,D,C){function l(w,E){var v=Object.keys(w);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(w);E&&(M=M.filter(function(O){return Object.getOwnPropertyDescriptor(w,O).enumerable})),v.push.apply(v,M)}return v}function p(w){for(var E=1;E<arguments.length;E++){var v=arguments[E]!=null?arguments[E]:{};E%2?l(Object(v),!0).forEach(function(M){y(w,M,v[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(v)):l(Object(v)).forEach(function(M){Object.defineProperty(w,M,Object.getOwnPropertyDescriptor(v,M))})}return w}function y(w,E,v){return E in w?Object.defineProperty(w,E,{value:v,enumerable:!0,configurable:!0,writable:!0}):w[E]=v,w}function f(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function s(w,E){for(var v=0;v<E.length;v++){var M=E[v];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(w,M.key,M)}}function i(w,E,v){return E&&s(w.prototype,E),v&&s(w,v),w}var r=g("buffer"),e=r.Buffer,t=g("util"),n=t.inspect,o=n&&n.custom||"inspect";function h(w,E,v){e.prototype.copy.call(w,E,v)}D.exports=function(){function w(){f(this,w),this.head=null,this.tail=null,this.length=0}return i(w,[{key:"push",value:function(v){var M={data:v,next:null};this.length>0?this.tail.next=M:this.head=M,this.tail=M,++this.length}},{key:"unshift",value:function(v){var M={data:v,next:this.head};this.length===0&&(this.tail=M),this.head=M,++this.length}},{key:"shift",value:function(){if(this.length!==0){var v=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,v}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(v){if(this.length===0)return"";for(var M=this.head,O=""+M.data;M=M.next;)O+=v+M.data;return O}},{key:"concat",value:function(v){if(this.length===0)return e.alloc(0);for(var M=e.allocUnsafe(v>>>0),O=this.head,x=0;O;)h(O.data,M,x),x+=O.data.length,O=O.next;return M}},{key:"consume",value:function(v,M){var O;return v<this.head.data.length?(O=this.head.data.slice(0,v),this.head.data=this.head.data.slice(v)):v===this.head.data.length?O=this.shift():O=M?this._getString(v):this._getBuffer(v),O}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(v){var M=this.head,O=1,x=M.data;for(v-=x.length;M=M.next;){var I=M.data,j=v>I.length?I.length:v;if(j===I.length?x+=I:x+=I.slice(0,v),v-=j,v===0){j===I.length?(++O,M.next?this.head=M.next:this.head=this.tail=null):(this.head=M,M.data=I.slice(j));break}++O}return this.length-=O,x}},{key:"_getBuffer",value:function(v){var M=e.allocUnsafe(v),O=this.head,x=1;for(O.data.copy(M),v-=O.data.length;O=O.next;){var I=O.data,j=v>I.length?I.length:v;if(I.copy(M,M.length-v,0,j),v-=j,v===0){j===I.length?(++x,O.next?this.head=O.next:this.head=this.tail=null):(this.head=O,O.data=I.slice(j));break}++x}return this.length-=x,M}},{key:o,value:function(v,M){return n(this,p({},M,{depth:0,customInspect:!1}))}}]),w}()},{buffer:29,util:26}],41:[function(g,D,C){(function(l){(function(){function p(e,t){var n=this,o=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return o||h?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,l.nextTick(i,this,e)):l.nextTick(i,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(w){!t&&w?n._writableState?n._writableState.errorEmitted?l.nextTick(f,n):(n._writableState.errorEmitted=!0,l.nextTick(y,n,w)):l.nextTick(y,n,w):t?(l.nextTick(f,n),t(w)):l.nextTick(f,n)}),this)}function y(e,t){i(e,t),f(e)}function f(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(e,t){e.emit("error",t)}function r(e,t){var n=e._readableState,o=e._writableState;n&&n.autoDestroy||o&&o.autoDestroy?e.destroy(t):e.emit("error",t)}D.exports={destroy:p,undestroy:s,errorOrDestroy:r}}).call(this)}).call(this,g("_process"))},{_process:102}],42:[function(g,D,C){var l=g("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function p(i){var r=!1;return function(){if(!r){r=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}}}function y(){}function f(i){return i.setHeader&&typeof i.abort=="function"}function s(i,r,e){if(typeof r=="function")return s(i,null,r);r||(r={}),e=p(e||y);var t=r.readable||r.readable!==!1&&i.readable,n=r.writable||r.writable!==!1&&i.writable,o=function(){i.writable||w()},h=i._writableState&&i._writableState.finished,w=function(){n=!1,h=!0,t||e.call(i)},E=i._readableState&&i._readableState.endEmitted,v=function(){t=!1,E=!0,n||e.call(i)},M=function(j){e.call(i,j)},O=function(){var j;if(t&&!E)return(!i._readableState||!i._readableState.ended)&&(j=new l),e.call(i,j);if(n&&!h)return(!i._writableState||!i._writableState.ended)&&(j=new l),e.call(i,j)},x=function(){i.req.on("finish",w)};return f(i)?(i.on("complete",w),i.on("abort",O),i.req?x():i.on("request",x)):n&&!i._writableState&&(i.on("end",o),i.on("close",o)),i.on("end",v),i.on("finish",w),r.error!==!1&&i.on("error",M),i.on("close",O),function(){i.removeListener("complete",w),i.removeListener("abort",O),i.removeListener("request",x),i.req&&i.req.removeListener("finish",w),i.removeListener("end",o),i.removeListener("close",o),i.removeListener("finish",w),i.removeListener("end",v),i.removeListener("error",M),i.removeListener("close",O)}}D.exports=s},{"../../../errors":33}],43:[function(g,D,C){D.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],44:[function(g,D,C){var l;function p(w){var E=!1;return function(){E||(E=!0,w.apply(void 0,arguments))}}var y=g("../../../errors").codes,f=y.ERR_MISSING_ARGS,s=y.ERR_STREAM_DESTROYED;function i(w){if(w)throw w}function r(w){return w.setHeader&&typeof w.abort=="function"}function e(w,E,v,M){M=p(M);var O=!1;w.on("close",function(){O=!0}),l===void 0&&(l=g("./end-of-stream")),l(w,{readable:E,writable:v},function(I){if(I)return M(I);O=!0,M()});var x=!1;return function(I){if(!O&&!x){if(x=!0,r(w))return w.abort();if(typeof w.destroy=="function")return w.destroy();M(I||new s("pipe"))}}}function t(w){w()}function n(w,E){return w.pipe(E)}function o(w){return!w.length||typeof w[w.length-1]!="function"?i:w.pop()}function h(){for(var w=arguments.length,E=new Array(w),v=0;v<w;v++)E[v]=arguments[v];var M=o(E);if(Array.isArray(E[0])&&(E=E[0]),E.length<2)throw new f("streams");var O,x=E.map(function(I,j){var R=j<E.length-1,T=j>0;return e(I,R,T,function(S){O||(O=S),S&&x.forEach(t),!R&&(x.forEach(t),M(O))})});return E.reduce(n)}D.exports=h},{"../../../errors":33,"./end-of-stream":42}],45:[function(g,D,C){var l=g("../../../errors").codes.ERR_INVALID_OPT_VALUE;function p(f,s,i){return f.highWaterMark!=null?f.highWaterMark:s?f[i]:null}function y(f,s,i,r){var e=p(s,r,i);if(e!=null){if(!(isFinite(e)&&Math.floor(e)===e)||e<0){var t=r?i:"highWaterMark";throw new l(t,e)}return Math.floor(e)}return f.objectMode?16:16*1024}D.exports={getHighWaterMark:y}},{"../../../errors":33}],46:[function(g,D,C){D.exports=g("events").EventEmitter},{events:49}],47:[function(g,D,C){C=D.exports=g("./lib/_stream_readable.js"),C.Stream=C,C.Readable=C,C.Writable=g("./lib/_stream_writable.js"),C.Duplex=g("./lib/_stream_duplex.js"),C.Transform=g("./lib/_stream_transform.js"),C.PassThrough=g("./lib/_stream_passthrough.js"),C.finished=g("./lib/internal/streams/end-of-stream.js"),C.pipeline=g("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":34,"./lib/_stream_passthrough.js":35,"./lib/_stream_readable.js":36,"./lib/_stream_transform.js":37,"./lib/_stream_writable.js":38,"./lib/internal/streams/end-of-stream.js":42,"./lib/internal/streams/pipeline.js":44}],48:[function(g,D,C){(function(l){(function(){var p=g("once"),y=function(){},f=function(r){return r.setHeader&&typeof r.abort=="function"},s=function(r){return r.stdio&&Array.isArray(r.stdio)&&r.stdio.length===3},i=function(r,e,t){if(typeof e=="function")return i(r,null,e);e||(e={}),t=p(t||y);var n=r._writableState,o=r._readableState,h=e.readable||e.readable!==!1&&r.readable,w=e.writable||e.writable!==!1&&r.writable,E=!1,v=function(){r.writable||M()},M=function(){w=!1,h||t.call(r)},O=function(){h=!1,w||t.call(r)},x=function(S){t.call(r,S?new Error("exited with error code: "+S):null)},I=function(S){t.call(r,S)},j=function(){l.nextTick(R)},R=function(){if(!E){if(h&&!(o&&o.ended&&!o.destroyed))return t.call(r,new Error("premature close"));if(w&&!(n&&n.ended&&!n.destroyed))return t.call(r,new Error("premature close"))}},T=function(){r.req.on("finish",M)};return f(r)?(r.on("complete",M),r.on("abort",j),r.req?T():r.on("request",T)):w&&!n&&(r.on("end",v),r.on("close",v)),s(r)&&r.on("exit",x),r.on("end",O),r.on("finish",M),e.error!==!1&&r.on("error",I),r.on("close",j),function(){E=!0,r.removeListener("complete",M),r.removeListener("abort",j),r.removeListener("request",T),r.req&&r.req.removeListener("finish",M),r.removeListener("end",v),r.removeListener("close",v),r.removeListener("finish",M),r.removeListener("exit",x),r.removeListener("end",O),r.removeListener("error",I),r.removeListener("close",j)}};D.exports=i}).call(this)}).call(this,g("_process"))},{_process:102,once:100}],49:[function(g,D,C){var l=typeof Reflect=="object"?Reflect:null,p=l&&typeof l.apply=="function"?l.apply:function(T,S,A){return Function.prototype.apply.call(T,S,A)},y;l&&typeof l.ownKeys=="function"?y=l.ownKeys:Object.getOwnPropertySymbols?y=function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:y=function(T){return Object.getOwnPropertyNames(T)};function f(R){}var s=Number.isNaN||function(T){return T!==T};function i(){i.init.call(this)}D.exports=i,D.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var r=10;function e(R){if(typeof R!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof R)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(R){if(typeof R!="number"||R<0||s(R))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+R+".");r=R}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(T){if(typeof T!="number"||T<0||s(T))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+T+".");return this._maxListeners=T,this};function t(R){return R._maxListeners===void 0?i.defaultMaxListeners:R._maxListeners}i.prototype.getMaxListeners=function(){return t(this)},i.prototype.emit=function(T){for(var S=[],A=1;A<arguments.length;A++)S.push(arguments[A]);var b=T==="error",z=this._events;if(z!==void 0)b=b&&z.error===void 0;else if(!b)return!1;if(b){var k;if(S.length>0&&(k=S[0]),k instanceof Error)throw k;var V=new Error("Unhandled error."+(k?" ("+k.message+")":""));throw V.context=k,V}var G=z[T];if(G===void 0)return!1;if(typeof G=="function")p(G,this,S);else for(var K=G.length,oe=v(G,K),A=0;A<K;++A)p(oe[A],this,S);return!0};function n(R,T,S,A){var b,z,k;if(e(S),z=R._events,z===void 0?(z=R._events=Object.create(null),R._eventsCount=0):(z.newListener!==void 0&&(R.emit("newListener",T,S.listener?S.listener:S),z=R._events),k=z[T]),k===void 0)k=z[T]=S,++R._eventsCount;else if(typeof k=="function"?k=z[T]=A?[S,k]:[k,S]:A?k.unshift(S):k.push(S),b=t(R),b>0&&k.length>b&&!k.warned){k.warned=!0;var V=new Error("Possible EventEmitter memory leak detected. "+k.length+" "+String(T)+" listeners added. Use emitter.setMaxListeners() to increase limit");V.name="MaxListenersExceededWarning",V.emitter=R,V.type=T,V.count=k.length}return R}i.prototype.addListener=function(T,S){return n(this,T,S,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(T,S){return n(this,T,S,!0)};function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(R,T,S){var A={fired:!1,wrapFn:void 0,target:R,type:T,listener:S},b=o.bind(A);return b.listener=S,A.wrapFn=b,b}i.prototype.once=function(T,S){return e(S),this.on(T,h(this,T,S)),this},i.prototype.prependOnceListener=function(T,S){return e(S),this.prependListener(T,h(this,T,S)),this},i.prototype.removeListener=function(T,S){var A,b,z,k,V;if(e(S),b=this._events,b===void 0)return this;if(A=b[T],A===void 0)return this;if(A===S||A.listener===S)--this._eventsCount===0?this._events=Object.create(null):(delete b[T],b.removeListener&&this.emit("removeListener",T,A.listener||S));else if(typeof A!="function"){for(z=-1,k=A.length-1;k>=0;k--)if(A[k]===S||A[k].listener===S){V=A[k].listener,z=k;break}if(z<0)return this;z===0?A.shift():M(A,z),A.length===1&&(b[T]=A[0]),b.removeListener!==void 0&&this.emit("removeListener",T,V||S)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(T){var S,A,b;if(A=this._events,A===void 0)return this;if(A.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):A[T]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete A[T]),this;if(arguments.length===0){var z=Object.keys(A),k;for(b=0;b<z.length;++b)k=z[b],k!=="removeListener"&&this.removeAllListeners(k);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(S=A[T],typeof S=="function")this.removeListener(T,S);else if(S!==void 0)for(b=S.length-1;b>=0;b--)this.removeListener(T,S[b]);return this};function w(R,T,S){var A=R._events;if(A===void 0)return[];var b=A[T];return b===void 0?[]:typeof b=="function"?S?[b.listener||b]:[b]:S?O(b):v(b,b.length)}i.prototype.listeners=function(T){return w(this,T,!0)},i.prototype.rawListeners=function(T){return w(this,T,!1)},i.listenerCount=function(R,T){return typeof R.listenerCount=="function"?R.listenerCount(T):E.call(R,T)},i.prototype.listenerCount=E;function E(R){var T=this._events;if(T!==void 0){var S=T[R];if(typeof S=="function")return 1;if(S!==void 0)return S.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]};function v(R,T){for(var S=new Array(T),A=0;A<T;++A)S[A]=R[A];return S}function M(R,T){for(;T+1<R.length;T++)R[T]=R[T+1];R.pop()}function O(R){for(var T=new Array(R.length),S=0;S<T.length;++S)T[S]=R[S].listener||R[S];return T}function x(R,T){return new Promise(function(S,A){function b(k){R.removeListener(T,z),A(k)}function z(){typeof R.removeListener=="function"&&R.removeListener("error",b),S([].slice.call(arguments))}j(R,T,z,{once:!0}),T!=="error"&&I(R,b,{once:!0})})}function I(R,T,S){typeof R.on=="function"&&j(R,"error",T,S)}function j(R,T,S,A){if(typeof R.on=="function")A.once?R.once(T,S):R.on(T,S);else if(typeof R.addEventListener=="function")R.addEventListener(T,function b(z){A.once&&R.removeEventListener(T,b),S(z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof R)}},{}],50:[function(g,D,C){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */C.read=function(l,p,y,f,s){var i,r,e=s*8-f-1,t=(1<<e)-1,n=t>>1,o=-7,h=y?s-1:0,w=y?-1:1,E=l[p+h];for(h+=w,i=E&(1<<-o)-1,E>>=-o,o+=e;o>0;i=i*256+l[p+h],h+=w,o-=8);for(r=i&(1<<-o)-1,i>>=-o,o+=f;o>0;r=r*256+l[p+h],h+=w,o-=8);if(i===0)i=1-n;else{if(i===t)return r?NaN:(E?-1:1)*(1/0);r=r+Math.pow(2,f),i=i-n}return(E?-1:1)*r*Math.pow(2,i-f)},C.write=function(l,p,y,f,s,i){var r,e,t,n=i*8-s-1,o=(1<<n)-1,h=o>>1,w=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=f?0:i-1,v=f?1:-1,M=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(e=isNaN(p)?1:0,r=o):(r=Math.floor(Math.log(p)/Math.LN2),p*(t=Math.pow(2,-r))<1&&(r--,t*=2),r+h>=1?p+=w/t:p+=w*Math.pow(2,1-h),p*t>=2&&(r++,t/=2),r+h>=o?(e=0,r=o):r+h>=1?(e=(p*t-1)*Math.pow(2,s),r=r+h):(e=p*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;l[y+E]=e&255,E+=v,e/=256,s-=8);for(r=r<<s|e,n+=s;n>0;l[y+E]=r&255,E+=v,r/=256,n-=8);l[y+E-v]|=M*128}},{}],51:[function(g,D,C){typeof Object.create=="function"?D.exports=function(p,y){y&&(p.super_=y,p.prototype=Object.create(y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}))}:D.exports=function(p,y){if(y){p.super_=y;var f=function(){};f.prototype=y.prototype,p.prototype=new f,p.prototype.constructor=p}}},{}],52:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.ContainerIterator=C.Container=C.Base=void 0;class l{constructor(s=0){this.iteratorType=s}equals(s){return this.o===s.o}}C.ContainerIterator=l;class p{constructor(){this.i=0}get length(){return this.i}size(){return this.i}empty(){return this.i===0}}C.Base=p;class y extends p{}C.Container=y},{}],53:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.HashContainerIterator=C.HashContainer=void 0;var l=g("../../ContainerBase"),p=f(g("../../../utils/checkObject")),y=g("../../../utils/throwError");function f(r){return r&&r.t?r:{default:r}}class s extends l.ContainerIterator{constructor(e,t,n){super(n),this.o=e,this.h=t,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.L,this})}}C.HashContainerIterator=s;class i extends l.Container{constructor(){super(),this.H=[],this.g={},this.HASH_TAG=Symbol("@@HASH_TAG"),Object.setPrototypeOf(this.g,null),this.h={},this.h.L=this.h.B=this.p=this._=this.h}V(e){const{L:t,B:n}=e;t.B=n,n.L=t,e===this.p&&(this.p=n),e===this._&&(this._=t),this.i-=1}M(e,t,n){n===void 0&&(n=(0,p.default)(e));let o;if(n){const h=e[this.HASH_TAG];if(h!==void 0)return this.H[h].l=t,this.i;Object.defineProperty(e,this.HASH_TAG,{value:this.H.length,configurable:!0}),o={u:e,l:t,L:this._,B:this.h},this.H.push(o)}else{const h=this.g[e];if(h)return h.l=t,this.i;o={u:e,l:t,L:this._,B:this.h},this.g[e]=o}return this.i===0?(this.p=o,this.h.B=o):this._.B=o,this._=o,this.h.L=o,++this.i}I(e,t){if(t===void 0&&(t=(0,p.default)(e)),t){const n=e[this.HASH_TAG];return n===void 0?this.h:this.H[n]}else return this.g[e]||this.h}clear(){const e=this.HASH_TAG;this.H.forEach(function(t){delete t.u[e]}),this.H=[],this.g={},Object.setPrototypeOf(this.g,null),this.i=0,this.p=this._=this.h.L=this.h.B=this.h}eraseElementByKey(e,t){let n;if(t===void 0&&(t=(0,p.default)(e)),t){const o=e[this.HASH_TAG];if(o===void 0)return!1;delete e[this.HASH_TAG],n=this.H[o],delete this.H[o]}else{if(n=this.g[e],n===void 0)return!1;delete this.g[e]}return this.V(n),!0}eraseElementByIterator(e){const t=e.o;return t===this.h&&(0,y.throwIteratorAccessError)(),this.V(t),e.next()}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;let t=this.p;for(;e--;)t=t.B;return this.V(t),this.i}}C.HashContainer=i},{"../../../utils/checkObject":70,"../../../utils/throwError":71,"../../ContainerBase":52}],54:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("./Base"),p=f(g("../../utils/checkObject")),y=g("../../utils/throwError");function f(e){return e&&e.t?e:{default:e}}class s extends l.HashContainerIterator{constructor(t,n,o,h){super(t,n,h),this.container=o}get pointer(){this.o===this.h&&(0,y.throwIteratorAccessError)();const t=this;return new Proxy([],{get(n,o){if(o==="0")return t.o.u;if(o==="1")return t.o.l},set(n,o,h){if(o!=="1")throw new TypeError("props must be 1");return t.o.l=h,!0}})}copy(){return new s(this.o,this.h,this.container,this.iteratorType)}}class i extends l.HashContainer{constructor(t=[]){super();const n=this;t.forEach(function(o){n.setElement(o[0],o[1])})}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i!==0)return[this.p.u,this.p.l]}back(){if(this.i!==0)return[this._.u,this._.l]}setElement(t,n,o){return this.M(t,n,o)}getElementByKey(t,n){if(n===void 0&&(n=(0,p.default)(t)),n){const h=t[this.HASH_TAG];return h!==void 0?this.H[h].l:void 0}const o=this.g[t];return o?o.l:void 0}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return[n.u,n.l]}find(t,n){const o=this.I(t,n);return new s(o,this.h,this)}forEach(t){let n=0,o=this.p;for(;o!==this.h;)t([o.u,o.l],n++,this),o=o.B}[Symbol.iterator](){return function*(){let t=this.p;for(;t!==this.h;)yield[t.u,t.l],t=t.B}.bind(this)()}}var r=i;C.default=r},{"../../utils/checkObject":70,"../../utils/throwError":71,"./Base":53}],55:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("./Base"),p=g("../../utils/throwError");class y extends l.HashContainerIterator{constructor(r,e,t,n){super(r,e,n),this.container=t}get pointer(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o.u}copy(){return new y(this.o,this.h,this.container,this.iteratorType)}}class f extends l.HashContainer{constructor(r=[]){super();const e=this;r.forEach(function(t){e.insert(t)})}begin(){return new y(this.p,this.h,this)}end(){return new y(this.h,this.h,this)}rBegin(){return new y(this._,this.h,this,1)}rEnd(){return new y(this.h,this.h,this,1)}front(){return this.p.u}back(){return this._.u}insert(r,e){return this.M(r,void 0,e)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let e=this.p;for(;r--;)e=e.B;return e.u}find(r,e){const t=this.I(r,e);return new y(t,this.h,this)}forEach(r){let e=0,t=this.p;for(;t!==this.h;)r(t.u,e++,this),t=t.B}[Symbol.iterator](){return function*(){let r=this.p;for(;r!==this.h;)yield r.u,r=r.B}.bind(this)()}}var s=f;C.default=s},{"../../utils/throwError":71,"./Base":53}],56:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("../ContainerBase");class p extends l.Base{constructor(s=[],i=function(e,t){return e>t?-1:e<t?1:0},r=!0){if(super(),this.v=i,Array.isArray(s))this.C=r?[...s]:s;else{this.C=[];const t=this;s.forEach(function(n){t.C.push(n)})}this.i=this.C.length;const e=this.i>>1;for(let t=this.i-1>>1;t>=0;--t)this.k(t,e)}m(s){const i=this.C[s];for(;s>0;){const r=s-1>>1,e=this.C[r];if(this.v(e,i)<=0)break;this.C[s]=e,s=r}this.C[s]=i}k(s,i){const r=this.C[s];for(;s<i;){let e=s<<1|1;const t=e+1;let n=this.C[e];if(t<this.i&&this.v(n,this.C[t])>0&&(e=t,n=this.C[t]),this.v(n,r)>=0)break;this.C[s]=n,s=e}this.C[s]=r}clear(){this.i=0,this.C.length=0}push(s){this.C.push(s),this.m(this.i),this.i+=1}pop(){if(this.i===0)return;const s=this.C[0],i=this.C.pop();return this.i-=1,this.i&&(this.C[0]=i,this.k(0,this.i>>1)),s}top(){return this.C[0]}find(s){return this.C.indexOf(s)>=0}remove(s){const i=this.C.indexOf(s);return i<0?!1:(i===0?this.pop():i===this.i-1?(this.C.pop(),this.i-=1):(this.C.splice(i,1,this.C.pop()),this.i-=1,this.m(i),this.k(i,this.i>>1)),!0)}updateItem(s){const i=this.C.indexOf(s);return i<0?!1:(this.m(i),this.k(i,this.i>>1),!0)}toArray(){return[...this.C]}}var y=p;C.default=y},{"../ContainerBase":52}],57:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("../ContainerBase");class p extends l.Base{constructor(s=[]){super(),this.j=0,this.q=[];const i=this;s.forEach(function(r){i.push(r)})}clear(){this.q=[],this.i=this.j=0}push(s){const i=this.q.length;if(this.j/i>.5&&this.j+this.i>=i&&i>4096){const r=this.i;for(let e=0;e<r;++e)this.q[e]=this.q[this.j+e];this.j=0,this.q[this.i]=s}else this.q[this.j+this.i]=s;return++this.i}pop(){if(this.i===0)return;const s=this.q[this.j++];return this.i-=1,s}front(){if(this.i!==0)return this.q[this.j]}}var y=p;C.default=y},{"../ContainerBase":52}],58:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("../ContainerBase");class p extends l.Base{constructor(s=[]){super(),this.S=[];const i=this;s.forEach(function(r){i.push(r)})}clear(){this.i=0,this.S=[]}push(s){return this.S.push(s),this.i+=1,this.i}pop(){if(this.i!==0)return this.i-=1,this.S.pop()}top(){return this.S[this.i-1]}}var y=p;C.default=y},{"../ContainerBase":52}],59:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.RandomIterator=void 0;var l=g("../../ContainerBase"),p=g("../../../utils/throwError");class y extends l.ContainerIterator{constructor(s,i){super(i),this.o=s,this.iteratorType===0?(this.pre=function(){return this.o===0&&(0,p.throwIteratorAccessError)(),this.o-=1,this},this.next=function(){return this.o===this.container.size()&&(0,p.throwIteratorAccessError)(),this.o+=1,this}):(this.pre=function(){return this.o===this.container.size()-1&&(0,p.throwIteratorAccessError)(),this.o+=1,this},this.next=function(){return this.o===-1&&(0,p.throwIteratorAccessError)(),this.o-=1,this})}get pointer(){return this.container.getElementByPos(this.o)}set pointer(s){this.container.setElementByPos(this.o,s)}}C.RandomIterator=y},{"../../../utils/throwError":71,"../../ContainerBase":52}],60:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("../../ContainerBase");class p extends l.Container{}var y=p;C.default=y},{"../../ContainerBase":52}],61:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=y(g("./Base")),p=g("./Base/RandomIterator");function y(r){return r&&r.t?r:{default:r}}class f extends p.RandomIterator{constructor(e,t,n){super(e,n),this.container=t}copy(){return new f(this.o,this.container,this.iteratorType)}}class s extends l.default{constructor(e=[],t=1<<12){super(),this.j=0,this.D=0,this.R=0,this.N=0,this.P=0,this.A=[];const n=(()=>{if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size;if(typeof e.size=="function")return e.size();throw new TypeError("Cannot get the length or size of the container")})();this.F=t,this.P=Math.max(Math.ceil(n/this.F),1);for(let w=0;w<this.P;++w)this.A.push(new Array(this.F));const o=Math.ceil(n/this.F);this.j=this.R=(this.P>>1)-(o>>1),this.D=this.N=this.F-n%this.F>>1;const h=this;e.forEach(function(w){h.pushBack(w)})}T(){const e=[],t=Math.max(this.P>>1,1);for(let n=0;n<t;++n)e[n]=new Array(this.F);for(let n=this.j;n<this.P;++n)e[e.length]=this.A[n];for(let n=0;n<this.R;++n)e[e.length]=this.A[n];e[e.length]=[...this.A[this.R]],this.j=t,this.R=e.length-1;for(let n=0;n<t;++n)e[e.length]=new Array(this.F);this.A=e,this.P=e.length}O(e){const t=this.D+e+1,n=t%this.F;let o=n-1,h=this.j+(t-n)/this.F;return n===0&&(h-=1),h%=this.P,o<0&&(o+=this.F),{curNodeBucketIndex:h,curNodePointerIndex:o}}clear(){this.A=[new Array(this.F)],this.P=1,this.j=this.R=this.i=0,this.D=this.N=this.F>>1}begin(){return new f(0,this)}end(){return new f(this.i,this)}rBegin(){return new f(this.i-1,this,1)}rEnd(){return new f(-1,this,1)}front(){if(this.i!==0)return this.A[this.j][this.D]}back(){if(this.i!==0)return this.A[this.R][this.N]}pushBack(e){return this.i&&(this.N<this.F-1?this.N+=1:this.R<this.P-1?(this.R+=1,this.N=0):(this.R=0,this.N=0),this.R===this.j&&this.N===this.D&&this.T()),this.i+=1,this.A[this.R][this.N]=e,this.i}popBack(){if(this.i===0)return;const e=this.A[this.R][this.N];return this.i!==1&&(this.N>0?this.N-=1:this.R>0?(this.R-=1,this.N=this.F-1):(this.R=this.P-1,this.N=this.F-1)),this.i-=1,e}pushFront(e){return this.i&&(this.D>0?this.D-=1:this.j>0?(this.j-=1,this.D=this.F-1):(this.j=this.P-1,this.D=this.F-1),this.j===this.R&&this.D===this.N&&this.T()),this.i+=1,this.A[this.j][this.D]=e,this.i}popFront(){if(this.i===0)return;const e=this.A[this.j][this.D];return this.i!==1&&(this.D<this.F-1?this.D+=1:this.j<this.P-1?(this.j+=1,this.D=0):(this.j=0,this.D=0)),this.i-=1,e}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;const{curNodeBucketIndex:t,curNodePointerIndex:n}=this.O(e);return this.A[t][n]}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;const{curNodeBucketIndex:n,curNodePointerIndex:o}=this.O(e);this.A[n][o]=t}insert(e,t,n=1){if(e<0||e>this.i)throw new RangeError;if(e===0)for(;n--;)this.pushFront(t);else if(e===this.i)for(;n--;)this.pushBack(t);else{const o=[];for(let h=e;h<this.i;++h)o.push(this.getElementByPos(h));this.cut(e-1);for(let h=0;h<n;++h)this.pushBack(t);for(let h=0;h<o.length;++h)this.pushBack(o[h])}return this.i}cut(e){if(e<0)return this.clear(),0;const{curNodeBucketIndex:t,curNodePointerIndex:n}=this.O(e);return this.R=t,this.N=n,this.i=e+1,this.i}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;if(e===0)this.popFront();else if(e===this.i-1)this.popBack();else{const t=[];for(let o=e+1;o<this.i;++o)t.push(this.getElementByPos(o));this.cut(e),this.popBack();const n=this;t.forEach(function(o){n.pushBack(o)})}return this.i}eraseElementByValue(e){if(this.i===0)return 0;const t=[];for(let o=0;o<this.i;++o){const h=this.getElementByPos(o);h!==e&&t.push(h)}const n=t.length;for(let o=0;o<n;++o)this.setElementByPos(o,t[o]);return this.cut(n-1)}eraseElementByIterator(e){const t=e.o;return this.eraseElementByPos(t),e=e.next(),e}find(e){for(let t=0;t<this.i;++t)if(this.getElementByPos(t)===e)return new f(t,this);return this.end()}reverse(){let e=0,t=this.i-1;for(;e<t;){const n=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,n),e+=1,t-=1}}unique(){if(this.i<=1)return this.i;let e=1,t=this.getElementByPos(0);for(let n=1;n<this.i;++n){const o=this.getElementByPos(n);o!==t&&(t=o,this.setElementByPos(e++,o))}for(;this.i>e;)this.popBack();return this.i}sort(e){const t=[];for(let n=0;n<this.i;++n)t.push(this.getElementByPos(n));t.sort(e);for(let n=0;n<this.i;++n)this.setElementByPos(n,t[n])}shrinkToFit(){if(this.i===0)return;const e=[];this.forEach(function(t){e.push(t)}),this.P=Math.max(Math.ceil(this.i/this.F),1),this.i=this.j=this.R=this.D=this.N=0,this.A=[];for(let t=0;t<this.P;++t)this.A.push(new Array(this.F));for(let t=0;t<e.length;++t)this.pushBack(e[t])}forEach(e){for(let t=0;t<this.i;++t)e(this.getElementByPos(t),t,this)}[Symbol.iterator](){return function*(){for(let e=0;e<this.i;++e)yield this.getElementByPos(e)}.bind(this)()}}var i=s;C.default=i},{"./Base":60,"./Base/RandomIterator":59}],62:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=f(g("./Base")),p=g("../ContainerBase"),y=g("../../utils/throwError");function f(e){return e&&e.t?e:{default:e}}class s extends p.ContainerIterator{constructor(t,n,o,h){super(h),this.o=t,this.h=n,this.container=o,this.iteratorType===0?(this.pre=function(){return this.o.L===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.L,this},this.next=function(){return this.o===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.B,this}):(this.pre=function(){return this.o.B===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.B,this},this.next=function(){return this.o===this.h&&(0,y.throwIteratorAccessError)(),this.o=this.o.L,this})}get pointer(){return this.o===this.h&&(0,y.throwIteratorAccessError)(),this.o.l}set pointer(t){this.o===this.h&&(0,y.throwIteratorAccessError)(),this.o.l=t}copy(){return new s(this.o,this.h,this.container,this.iteratorType)}}class i extends l.default{constructor(t=[]){super(),this.h={},this.p=this._=this.h.L=this.h.B=this.h;const n=this;t.forEach(function(o){n.pushBack(o)})}V(t){const{L:n,B:o}=t;n.B=o,o.L=n,t===this.p&&(this.p=o),t===this._&&(this._=n),this.i-=1}G(t,n){const o=n.B,h={l:t,L:n,B:o};n.B=h,o.L=h,n===this.h&&(this.p=h),o===this.h&&(this._=h),this.i+=1}clear(){this.i=0,this.p=this._=this.h.L=this.h.B=this.h}begin(){return new s(this.p,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this._,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.p.l}back(){return this._.l}getElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return n.l}eraseElementByPos(t){if(t<0||t>this.i-1)throw new RangeError;let n=this.p;for(;t--;)n=n.B;return this.V(n),this.i}eraseElementByValue(t){let n=this.p;for(;n!==this.h;)n.l===t&&this.V(n),n=n.B;return this.i}eraseElementByIterator(t){const n=t.o;return n===this.h&&(0,y.throwIteratorAccessError)(),t=t.next(),this.V(n),t}pushBack(t){return this.G(t,this._),this.i}popBack(){if(this.i===0)return;const t=this._.l;return this.V(this._),t}pushFront(t){return this.G(t,this.h),this.i}popFront(){if(this.i===0)return;const t=this.p.l;return this.V(this.p),t}setElementByPos(t,n){if(t<0||t>this.i-1)throw new RangeError;let o=this.p;for(;t--;)o=o.B;o.l=n}insert(t,n,o=1){if(t<0||t>this.i)throw new RangeError;if(o<=0)return this.i;if(t===0)for(;o--;)this.pushFront(n);else if(t===this.i)for(;o--;)this.pushBack(n);else{let h=this.p;for(let E=1;E<t;++E)h=h.B;const w=h.B;for(this.i+=o;o--;)h.B={l:n,L:h},h.B.L=h,h=h.B;h.B=w,w.L=h}return this.i}find(t){let n=this.p;for(;n!==this.h;){if(n.l===t)return new s(n,this.h,this);n=n.B}return this.end()}reverse(){if(this.i<=1)return;let t=this.p,n=this._,o=0;for(;o<<1<this.i;){const h=t.l;t.l=n.l,n.l=h,t=t.B,n=n.L,o+=1}}unique(){if(this.i<=1)return this.i;let t=this.p;for(;t!==this.h;){let n=t;for(;n.B!==this.h&&n.l===n.B.l;)n=n.B,this.i-=1;t.B=n.B,t.B.L=t,t=t.B}return this.i}sort(t){if(this.i<=1)return;const n=[];this.forEach(function(h){n.push(h)}),n.sort(t);let o=this.p;n.forEach(function(h){o.l=h,o=o.B})}merge(t){const n=this;if(this.i===0)t.forEach(function(o){n.pushBack(o)});else{let o=this.p;t.forEach(function(h){for(;o!==n.h&&o.l<=h;)o=o.B;n.G(h,o.L)})}return this.i}forEach(t){let n=this.p,o=0;for(;n!==this.h;)t(n.l,o++,this),n=n.B}[Symbol.iterator](){return function*(){if(this.i===0)return;let t=this.p;for(;t!==this.h;)yield t.l,t=t.B}.bind(this)()}}var r=i;C.default=r},{"../../utils/throwError":71,"../ContainerBase":52,"./Base":60}],63:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=y(g("./Base")),p=g("./Base/RandomIterator");function y(r){return r&&r.t?r:{default:r}}class f extends p.RandomIterator{constructor(e,t,n){super(e,n),this.container=t}copy(){return new f(this.o,this.container,this.iteratorType)}}class s extends l.default{constructor(e=[],t=!0){if(super(),Array.isArray(e))this.J=t?[...e]:e,this.i=e.length;else{this.J=[];const n=this;e.forEach(function(o){n.pushBack(o)})}}clear(){this.i=0,this.J.length=0}begin(){return new f(0,this)}end(){return new f(this.i,this)}rBegin(){return new f(this.i-1,this,1)}rEnd(){return new f(-1,this,1)}front(){return this.J[0]}back(){return this.J[this.i-1]}getElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J[e]}eraseElementByPos(e){if(e<0||e>this.i-1)throw new RangeError;return this.J.splice(e,1),this.i-=1,this.i}eraseElementByValue(e){let t=0;for(let n=0;n<this.i;++n)this.J[n]!==e&&(this.J[t++]=this.J[n]);return this.i=this.J.length=t,this.i}eraseElementByIterator(e){const t=e.o;return e=e.next(),this.eraseElementByPos(t),e}pushBack(e){return this.J.push(e),this.i+=1,this.i}popBack(){if(this.i!==0)return this.i-=1,this.J.pop()}setElementByPos(e,t){if(e<0||e>this.i-1)throw new RangeError;this.J[e]=t}insert(e,t,n=1){if(e<0||e>this.i)throw new RangeError;return this.J.splice(e,0,...new Array(n).fill(t)),this.i+=n,this.i}find(e){for(let t=0;t<this.i;++t)if(this.J[t]===e)return new f(t,this);return this.end()}reverse(){this.J.reverse()}unique(){let e=1;for(let t=1;t<this.i;++t)this.J[t]!==this.J[t-1]&&(this.J[e++]=this.J[t]);return this.i=this.J.length=e,this.i}sort(e){this.J.sort(e)}forEach(e){for(let t=0;t<this.i;++t)e(this.J[t],t,this)}[Symbol.iterator](){return function*(){yield*this.J}.bind(this)()}}var i=s;C.default=i},{"./Base":60,"./Base/RandomIterator":59}],64:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("../../ContainerBase"),p=g("../../../utils/throwError");class y extends l.ContainerIterator{constructor(i,r,e){super(e),this.o=i,this.h=r,this.iteratorType===0?(this.pre=function(){return this.o===this.h.U&&(0,p.throwIteratorAccessError)(),this.o=this.o.L(),this},this.next=function(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o=this.o.B(),this}):(this.pre=function(){return this.o===this.h.W&&(0,p.throwIteratorAccessError)(),this.o=this.o.B(),this},this.next=function(){return this.o===this.h&&(0,p.throwIteratorAccessError)(),this.o=this.o.L(),this})}get index(){let i=this.o;const r=this.h.tt;if(i===this.h)return r?r.rt-1:0;let e=0;for(i.U&&(e+=i.U.rt);i!==r;){const t=i.tt;i===t.W&&(e+=1,t.U&&(e+=t.U.rt)),i=t}return e}}var f=y;C.default=f},{"../../../utils/throwError":71,"../../ContainerBase":52}],65:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.TreeNodeEnableIndex=C.TreeNode=void 0;class l{constructor(f,s){this.ee=1,this.u=void 0,this.l=void 0,this.U=void 0,this.W=void 0,this.tt=void 0,this.u=f,this.l=s}L(){let f=this;if(f.ee===1&&f.tt.tt===f)f=f.W;else if(f.U)for(f=f.U;f.W;)f=f.W;else{let s=f.tt;for(;s.U===f;)f=s,s=f.tt;f=s}return f}B(){let f=this;if(f.W){for(f=f.W;f.U;)f=f.U;return f}else{let s=f.tt;for(;s.W===f;)f=s,s=f.tt;return f.W!==s?s:f}}te(){const f=this.tt,s=this.W,i=s.U;return f.tt===this?f.tt=s:f.U===this?f.U=s:f.W=s,s.tt=f,s.U=this,this.tt=s,this.W=i,i&&(i.tt=this),s}se(){const f=this.tt,s=this.U,i=s.W;return f.tt===this?f.tt=s:f.U===this?f.U=s:f.W=s,s.tt=f,s.W=this,this.tt=s,this.U=i,i&&(i.tt=this),s}}C.TreeNode=l;class p extends l{constructor(){super(...arguments),this.rt=1}te(){const f=super.te();return this.ie(),f.ie(),f}se(){const f=super.se();return this.ie(),f.ie(),f}ie(){this.rt=1,this.U&&(this.rt+=this.U.rt),this.W&&(this.rt+=this.W.rt)}}C.TreeNodeEnableIndex=p},{}],66:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=g("./TreeNode"),p=g("../../ContainerBase"),y=g("../../../utils/throwError");class f extends p.Container{constructor(r=function(t,n){return t<n?-1:t>n?1:0},e=!1){super(),this.Y=void 0,this.v=r,e?(this.re=l.TreeNodeEnableIndex,this.M=function(t,n,o){const h=this.ne(t,n,o);if(h){let w=h.tt;for(;w!==this.h;)w.rt+=1,w=w.tt;const E=this.he(h);if(E){const{parentNode:v,grandParent:M,curNode:O}=E;v.ie(),M.ie(),O.ie()}}return this.i},this.V=function(t){let n=this.fe(t);for(;n!==this.h;)n.rt-=1,n=n.tt}):(this.re=l.TreeNode,this.M=function(t,n,o){const h=this.ne(t,n,o);return h&&this.he(h),this.i},this.V=this.fe),this.h=new this.re}X(r,e){let t=this.h;for(;r;){const n=this.v(r.u,e);if(n<0)r=r.W;else if(n>0)t=r,r=r.U;else return r}return t}Z(r,e){let t=this.h;for(;r;)this.v(r.u,e)<=0?r=r.W:(t=r,r=r.U);return t}$(r,e){let t=this.h;for(;r;){const n=this.v(r.u,e);if(n<0)t=r,r=r.W;else if(n>0)r=r.U;else return r}return t}rr(r,e){let t=this.h;for(;r;)this.v(r.u,e)<0?(t=r,r=r.W):r=r.U;return t}ue(r){for(;;){const e=r.tt;if(e===this.h)return;if(r.ee===1){r.ee=0;return}if(r===e.U){const t=e.W;if(t.ee===1)t.ee=0,e.ee=1,e===this.Y?this.Y=e.te():e.te();else if(t.W&&t.W.ee===1){t.ee=e.ee,e.ee=0,t.W.ee=0,e===this.Y?this.Y=e.te():e.te();return}else t.U&&t.U.ee===1?(t.ee=1,t.U.ee=0,t.se()):(t.ee=1,r=e)}else{const t=e.U;if(t.ee===1)t.ee=0,e.ee=1,e===this.Y?this.Y=e.se():e.se();else if(t.U&&t.U.ee===1){t.ee=e.ee,e.ee=0,t.U.ee=0,e===this.Y?this.Y=e.se():e.se();return}else t.W&&t.W.ee===1?(t.ee=1,t.W.ee=0,t.te()):(t.ee=1,r=e)}}}fe(r){if(this.i===1)return this.clear(),this.h;let e=r;for(;e.U||e.W;){if(e.W)for(e=e.W;e.U;)e=e.U;else e=e.U;[r.u,e.u]=[e.u,r.u],[r.l,e.l]=[e.l,r.l],r=e}this.h.U===e?this.h.U=e.tt:this.h.W===e&&(this.h.W=e.tt),this.ue(e);const t=e.tt;return e===t.U?t.U=void 0:t.W=void 0,this.i-=1,this.Y.ee=0,t}oe(r,e){return r===void 0?!1:this.oe(r.U,e)||e(r)?!0:this.oe(r.W,e)}he(r){for(;;){const e=r.tt;if(e.ee===0)return;const t=e.tt;if(e===t.U){const n=t.W;if(n&&n.ee===1){if(n.ee=e.ee=0,t===this.Y)return;t.ee=1,r=t;continue}else if(r===e.W){if(r.ee=0,r.U&&(r.U.tt=e),r.W&&(r.W.tt=t),e.W=r.U,t.U=r.W,r.U=e,r.W=t,t===this.Y)this.Y=r,this.h.tt=r;else{const o=t.tt;o.U===t?o.U=r:o.W=r}return r.tt=t.tt,e.tt=r,t.tt=r,t.ee=1,{parentNode:e,grandParent:t,curNode:r}}else e.ee=0,t===this.Y?this.Y=t.se():t.se(),t.ee=1}else{const n=t.U;if(n&&n.ee===1){if(n.ee=e.ee=0,t===this.Y)return;t.ee=1,r=t;continue}else if(r===e.U){if(r.ee=0,r.U&&(r.U.tt=t),r.W&&(r.W.tt=e),t.W=r.U,e.U=r.W,r.U=t,r.W=e,t===this.Y)this.Y=r,this.h.tt=r;else{const o=t.tt;o.U===t?o.U=r:o.W=r}return r.tt=t.tt,e.tt=r,t.tt=r,t.ee=1,{parentNode:e,grandParent:t,curNode:r}}else e.ee=0,t===this.Y?this.Y=t.te():t.te(),t.ee=1}return}}ne(r,e,t){if(this.Y===void 0){this.i+=1,this.Y=new this.re(r,e),this.Y.ee=0,this.Y.tt=this.h,this.h.tt=this.Y,this.h.U=this.Y,this.h.W=this.Y;return}let n;const o=this.h.U,h=this.v(o.u,r);if(h===0){o.l=e;return}else if(h>0)o.U=new this.re(r,e),o.U.tt=o,n=o.U,this.h.U=n;else{const w=this.h.W,E=this.v(w.u,r);if(E===0){w.l=e;return}else if(E<0)w.W=new this.re(r,e),w.W.tt=w,n=w.W,this.h.W=n;else{if(t!==void 0){const v=t.o;if(v!==this.h){const M=this.v(v.u,r);if(M===0){v.l=e;return}else if(M>0){const O=v.L(),x=this.v(O.u,r);if(x===0){O.l=e;return}else x<0&&(n=new this.re(r,e),O.W===void 0?(O.W=n,n.tt=O):(v.U=n,n.tt=v))}}}if(n===void 0)for(n=this.Y;;){const v=this.v(n.u,r);if(v>0){if(n.U===void 0){n.U=new this.re(r,e),n.U.tt=n,n=n.U;break}n=n.U}else if(v<0){if(n.W===void 0){n.W=new this.re(r,e),n.W.tt=n,n=n.W;break}n=n.W}else{n.l=e;return}}}}return this.i+=1,n}I(r,e){for(;r;){const t=this.v(r.u,e);if(t<0)r=r.W;else if(t>0)r=r.U;else return r}return r||this.h}clear(){this.i=0,this.Y=void 0,this.h.tt=void 0,this.h.U=this.h.W=void 0}updateKeyByIterator(r,e){const t=r.o;if(t===this.h&&(0,y.throwIteratorAccessError)(),this.i===1)return t.u=e,!0;if(t===this.h.U)return this.v(t.B().u,e)>0?(t.u=e,!0):!1;if(t===this.h.W)return this.v(t.L().u,e)<0?(t.u=e,!0):!1;const n=t.L().u;if(this.v(n,e)>=0)return!1;const o=t.B().u;return this.v(o,e)<=0?!1:(t.u=e,!0)}eraseElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let e=0;const t=this;return this.oe(this.Y,function(n){return r===e?(t.V(n),!0):(e+=1,!1)}),this.i}eraseElementByKey(r){if(this.i===0)return!1;const e=this.I(this.Y,r);return e===this.h?!1:(this.V(e),!0)}eraseElementByIterator(r){const e=r.o;e===this.h&&(0,y.throwIteratorAccessError)();const t=e.W===void 0;return r.iteratorType===0?t&&r.next():(!t||e.U===void 0)&&r.next(),this.V(e),r}forEach(r){let e=0;for(const t of this)r(t,e++,this)}getElementByPos(r){if(r<0||r>this.i-1)throw new RangeError;let e,t=0;for(const n of this){if(t===r){e=n;break}t+=1}return e}getHeight(){if(this.i===0)return 0;const r=function(e){return e?Math.max(r(e.U),r(e.W))+1:0};return r(this.Y)}}var s=f;C.default=s},{"../../../utils/throwError":71,"../../ContainerBase":52,"./TreeNode":65}],67:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=f(g("./Base")),p=f(g("./Base/TreeIterator")),y=g("../../utils/throwError");function f(e){return e&&e.t?e:{default:e}}class s extends p.default{constructor(t,n,o,h){super(t,n,h),this.container=o}get pointer(){this.o===this.h&&(0,y.throwIteratorAccessError)();const t=this;return new Proxy([],{get(n,o){if(o==="0")return t.o.u;if(o==="1")return t.o.l},set(n,o,h){if(o!=="1")throw new TypeError("props must be 1");return t.o.l=h,!0}})}copy(){return new s(this.o,this.h,this.container,this.iteratorType)}}class i extends l.default{constructor(t=[],n,o){super(n,o);const h=this;t.forEach(function(w){h.setElement(w[0],w[1])})}*K(t){t!==void 0&&(yield*this.K(t.U),yield[t.u,t.l],yield*this.K(t.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){if(this.i===0)return;const t=this.h.U;return[t.u,t.l]}back(){if(this.i===0)return;const t=this.h.W;return[t.u,t.l]}lowerBound(t){const n=this.X(this.Y,t);return new s(n,this.h,this)}upperBound(t){const n=this.Z(this.Y,t);return new s(n,this.h,this)}reverseLowerBound(t){const n=this.$(this.Y,t);return new s(n,this.h,this)}reverseUpperBound(t){const n=this.rr(this.Y,t);return new s(n,this.h,this)}setElement(t,n,o){return this.M(t,n,o)}find(t){const n=this.I(this.Y,t);return new s(n,this.h,this)}getElementByKey(t){return this.I(this.Y,t).l}union(t){const n=this;return t.forEach(function(o){n.setElement(o[0],o[1])}),this.i}[Symbol.iterator](){return this.K(this.Y)}}var r=i;C.default=r},{"../../utils/throwError":71,"./Base":66,"./Base/TreeIterator":64}],68:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=void 0;var l=f(g("./Base")),p=f(g("./Base/TreeIterator")),y=g("../../utils/throwError");function f(e){return e&&e.t?e:{default:e}}class s extends p.default{constructor(t,n,o,h){super(t,n,h),this.container=o}get pointer(){return this.o===this.h&&(0,y.throwIteratorAccessError)(),this.o.u}copy(){return new s(this.o,this.h,this.container,this.iteratorType)}}class i extends l.default{constructor(t=[],n,o){super(n,o);const h=this;t.forEach(function(w){h.insert(w)})}*K(t){t!==void 0&&(yield*this.K(t.U),yield t.u,yield*this.K(t.W))}begin(){return new s(this.h.U||this.h,this.h,this)}end(){return new s(this.h,this.h,this)}rBegin(){return new s(this.h.W||this.h,this.h,this,1)}rEnd(){return new s(this.h,this.h,this,1)}front(){return this.h.U?this.h.U.u:void 0}back(){return this.h.W?this.h.W.u:void 0}insert(t,n){return this.M(t,void 0,n)}find(t){const n=this.I(this.Y,t);return new s(n,this.h,this)}lowerBound(t){const n=this.X(this.Y,t);return new s(n,this.h,this)}upperBound(t){const n=this.Z(this.Y,t);return new s(n,this.h,this)}reverseLowerBound(t){const n=this.$(this.Y,t);return new s(n,this.h,this)}reverseUpperBound(t){const n=this.rr(this.Y,t);return new s(n,this.h,this)}union(t){const n=this;return t.forEach(function(o){n.insert(o)}),this.i}[Symbol.iterator](){return this.K(this.Y)}}var r=i;C.default=r},{"../../utils/throwError":71,"./Base":66,"./Base/TreeIterator":64}],69:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),Object.defineProperty(C,"Deque",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(C,"HashMap",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(C,"HashSet",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(C,"LinkList",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(C,"OrderedMap",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(C,"OrderedSet",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(C,"PriorityQueue",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(C,"Queue",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(C,"Stack",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(C,"Vector",{enumerable:!0,get:function(){return f.default}});var l=o(g("./container/OtherContainer/Stack")),p=o(g("./container/OtherContainer/Queue")),y=o(g("./container/OtherContainer/PriorityQueue")),f=o(g("./container/SequentialContainer/Vector")),s=o(g("./container/SequentialContainer/LinkList")),i=o(g("./container/SequentialContainer/Deque")),r=o(g("./container/TreeContainer/OrderedSet")),e=o(g("./container/TreeContainer/OrderedMap")),t=o(g("./container/HashContainer/HashSet")),n=o(g("./container/HashContainer/HashMap"));function o(h){return h&&h.t?h:{default:h}}},{"./container/HashContainer/HashMap":54,"./container/HashContainer/HashSet":55,"./container/OtherContainer/PriorityQueue":56,"./container/OtherContainer/Queue":57,"./container/OtherContainer/Stack":58,"./container/SequentialContainer/Deque":61,"./container/SequentialContainer/LinkList":62,"./container/SequentialContainer/Vector":63,"./container/TreeContainer/OrderedMap":67,"./container/TreeContainer/OrderedSet":68}],70:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.default=l;function l(p){const y=typeof p;return y==="object"&&p!==null||y==="function"}},{}],71:[function(g,D,C){Object.defineProperty(C,"t",{value:!0}),C.throwIteratorAccessError=l;function l(){throw new RangeError("Iterator access denied!")}},{}],72:[function(g,D,C){(function(l){(function(){const p=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,f=typeof AbortController=="function"?AbortController:class{constructor(){this.signal=new r}abort(R=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||R,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},s=typeof AbortSignal=="function",i=typeof f.AbortSignal=="function",r=s?AbortSignal:i?f.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(R){R.type==="abort"&&(this.aborted=!0,this.onabort(R),this._listeners.forEach(T=>T(R),this))}onabort(){}addEventListener(R,T){R==="abort"&&this._listeners.push(T)}removeEventListener(R,T){R==="abort"&&(this._listeners=this._listeners.filter(S=>S!==T))}},e=new Set,t=(j,R)=>{const T=`LRU_CACHE_OPTION_${j}`;w(T)&&E(T,`${j} option`,`options.${R}`,I)},n=(j,R)=>{const T=`LRU_CACHE_METHOD_${j}`;if(w(T)){const{prototype:S}=I,{get:A}=Object.getOwnPropertyDescriptor(S,j);E(T,`${j} method`,`cache.${R}()`,A)}},o=(j,R)=>{const T=`LRU_CACHE_PROPERTY_${j}`;if(w(T)){const{prototype:S}=I,{get:A}=Object.getOwnPropertyDescriptor(S,j);E(T,`${j} property`,`cache.${R}`,A)}},h=(...j)=>{typeof l=="object"&&l&&typeof l.emitWarning=="function"&&l.emitWarning(...j)},w=j=>!e.has(j),E=(j,R,T,S)=>{e.add(j);const A=`The ${R} is deprecated. Please use ${T} instead.`;h(A,"DeprecationWarning",j,S)},v=j=>j&&j===Math.floor(j)&&j>0&&isFinite(j),M=j=>v(j)?j<=Math.pow(2,8)?Uint8Array:j<=Math.pow(2,16)?Uint16Array:j<=Math.pow(2,32)?Uint32Array:j<=Number.MAX_SAFE_INTEGER?O:null:null;class O extends Array{constructor(R){super(R),this.fill(0)}}class x{constructor(R){if(R===0)return[];const T=M(R);this.heap=new T(R),this.length=0}push(R){this.heap[this.length++]=R}pop(){return this.heap[--this.length]}}class I{constructor(R={}){const{max:T=0,ttl:S,ttlResolution:A=1,ttlAutopurge:b,updateAgeOnGet:z,updateAgeOnHas:k,allowStale:V,dispose:G,disposeAfter:K,noDisposeOnSet:oe,noUpdateTTL:ie,maxSize:Y=0,maxEntrySize:le=0,sizeCalculation:se,fetchMethod:X,fetchContext:P,noDeleteOnFetchRejection:$,noDeleteOnStaleGet:te,allowStaleOnFetchRejection:ae,allowStaleOnFetchAbort:ee,ignoreFetchAbort:F}=R,{length:L,maxAge:Z,stale:U}=R instanceof I?{}:R;if(T!==0&&!v(T))throw new TypeError("max option must be a nonnegative integer");const H=T?M(T):Array;if(!H)throw new Error("invalid max value: "+T);if(this.max=T,this.maxSize=Y,this.maxEntrySize=le||this.maxSize,this.sizeCalculation=se||L,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=X||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=P,!this.fetchMethod&&P!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(T).fill(null),this.valList=new Array(T).fill(null),this.next=new H(T),this.prev=new H(T),this.head=0,this.tail=0,this.free=new x(T),this.initialFill=1,this.size=0,typeof G=="function"&&(this.dispose=G),typeof K=="function"?(this.disposeAfter=K,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!oe,this.noUpdateTTL=!!ie,this.noDeleteOnFetchRejection=!!$,this.allowStaleOnFetchRejection=!!ae,this.allowStaleOnFetchAbort=!!ee,this.ignoreFetchAbort=!!F,this.maxEntrySize!==0){if(this.maxSize!==0&&!v(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!v(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!V||!!U,this.noDeleteOnStaleGet=!!te,this.updateAgeOnGet=!!z,this.updateAgeOnHas=!!k,this.ttlResolution=v(A)||A===0?A:1,this.ttlAutopurge=!!b,this.ttl=S||Z||0,this.ttl){if(!v(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const Q="LRU_CACHE_UNBOUNDED";w(Q)&&(e.add(Q),h("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Q,I))}U&&t("stale","allowStale"),Z&&t("maxAge","ttl"),L&&t("length","sizeCalculation")}getRemainingTTL(R){return this.has(R,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new O(this.max),this.starts=new O(this.max),this.setItemTTL=(S,A,b=p.now())=>{if(this.starts[S]=A!==0?b:0,this.ttls[S]=A,A!==0&&this.ttlAutopurge){const z=setTimeout(()=>{this.isStale(S)&&this.delete(this.keyList[S])},A+1);z.unref&&z.unref()}},this.updateItemAge=S=>{this.starts[S]=this.ttls[S]!==0?p.now():0},this.statusTTL=(S,A)=>{S&&(S.ttl=this.ttls[A],S.start=this.starts[A],S.now=R||T(),S.remainingTTL=S.now+S.ttl-S.start)};let R=0;const T=()=>{const S=p.now();if(this.ttlResolution>0){R=S;const A=setTimeout(()=>R=0,this.ttlResolution);A.unref&&A.unref()}return S};this.getRemainingTTL=S=>{const A=this.keyMap.get(S);return A===void 0?0:this.ttls[A]===0||this.starts[A]===0?1/0:this.starts[A]+this.ttls[A]-(R||T())},this.isStale=S=>this.ttls[S]!==0&&this.starts[S]!==0&&(R||T())-this.starts[S]>this.ttls[S]}updateItemAge(R){}statusTTL(R,T){}setItemTTL(R,T,S){}isStale(R){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new O(this.max),this.removeItemSize=R=>{this.calculatedSize-=this.sizes[R],this.sizes[R]=0},this.requireSize=(R,T,S,A)=>{if(this.isBackgroundFetch(T))return 0;if(!v(S))if(A){if(typeof A!="function")throw new TypeError("sizeCalculation must be a function");if(S=A(T,R),!v(S))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return S},this.addItemSize=(R,T,S)=>{if(this.sizes[R]=T,this.maxSize){const A=this.maxSize-this.sizes[R];for(;this.calculatedSize>A;)this.evict(!0)}this.calculatedSize+=this.sizes[R],S&&(S.entrySize=T,S.totalCalculatedSize=this.calculatedSize)}}removeItemSize(R){}addItemSize(R,T){}requireSize(R,T,S,A){if(S||A)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:R=this.allowStale}={}){if(this.size)for(let T=this.tail;!(!this.isValidIndex(T)||((R||!this.isStale(T))&&(yield T),T===this.head));)T=this.prev[T]}*rindexes({allowStale:R=this.allowStale}={}){if(this.size)for(let T=this.head;!(!this.isValidIndex(T)||((R||!this.isStale(T))&&(yield T),T===this.tail));)T=this.next[T]}isValidIndex(R){return R!==void 0&&this.keyMap.get(this.keyList[R])===R}*entries(){for(const R of this.indexes())this.valList[R]!==void 0&&this.keyList[R]!==void 0&&!this.isBackgroundFetch(this.valList[R])&&(yield[this.keyList[R],this.valList[R]])}*rentries(){for(const R of this.rindexes())this.valList[R]!==void 0&&this.keyList[R]!==void 0&&!this.isBackgroundFetch(this.valList[R])&&(yield[this.keyList[R],this.valList[R]])}*keys(){for(const R of this.indexes())this.keyList[R]!==void 0&&!this.isBackgroundFetch(this.valList[R])&&(yield this.keyList[R])}*rkeys(){for(const R of this.rindexes())this.keyList[R]!==void 0&&!this.isBackgroundFetch(this.valList[R])&&(yield this.keyList[R])}*values(){for(const R of this.indexes())this.valList[R]!==void 0&&!this.isBackgroundFetch(this.valList[R])&&(yield this.valList[R])}*rvalues(){for(const R of this.rindexes())this.valList[R]!==void 0&&!this.isBackgroundFetch(this.valList[R])&&(yield this.valList[R])}[Symbol.iterator](){return this.entries()}find(R,T){for(const S of this.indexes()){const A=this.valList[S],b=this.isBackgroundFetch(A)?A.__staleWhileFetching:A;if(b!==void 0&&R(b,this.keyList[S],this))return this.get(this.keyList[S],T)}}forEach(R,T=this){for(const S of this.indexes()){const A=this.valList[S],b=this.isBackgroundFetch(A)?A.__staleWhileFetching:A;b!==void 0&&R.call(T,b,this.keyList[S],this)}}rforEach(R,T=this){for(const S of this.rindexes()){const A=this.valList[S],b=this.isBackgroundFetch(A)?A.__staleWhileFetching:A;b!==void 0&&R.call(T,b,this.keyList[S],this)}}get prune(){return n("prune","purgeStale"),this.purgeStale}purgeStale(){let R=!1;for(const T of this.rindexes({allowStale:!0}))this.isStale(T)&&(this.delete(this.keyList[T]),R=!0);return R}dump(){const R=[];for(const T of this.indexes({allowStale:!0})){const S=this.keyList[T],A=this.valList[T],b=this.isBackgroundFetch(A)?A.__staleWhileFetching:A;if(b===void 0)continue;const z={value:b};if(this.ttls){z.ttl=this.ttls[T];const k=p.now()-this.starts[T];z.start=Math.floor(Date.now()-k)}this.sizes&&(z.size=this.sizes[T]),R.unshift([S,z])}return R}load(R){this.clear();for(const[T,S]of R){if(S.start){const A=Date.now()-S.start;S.start=p.now()-A}this.set(T,S.value,S)}}dispose(R,T,S){}set(R,T,{ttl:S=this.ttl,start:A,noDisposeOnSet:b=this.noDisposeOnSet,size:z=0,sizeCalculation:k=this.sizeCalculation,noUpdateTTL:V=this.noUpdateTTL,status:G}={}){if(z=this.requireSize(R,T,z,k),this.maxEntrySize&&z>this.maxEntrySize)return G&&(G.set="miss",G.maxEntrySizeExceeded=!0),this.delete(R),this;let K=this.size===0?void 0:this.keyMap.get(R);if(K===void 0)K=this.newIndex(),this.keyList[K]=R,this.valList[K]=T,this.keyMap.set(R,K),this.next[this.tail]=K,this.prev[K]=this.tail,this.tail=K,this.size++,this.addItemSize(K,z,G),G&&(G.set="add"),V=!1;else{this.moveToTail(K);const oe=this.valList[K];if(T!==oe){if(this.isBackgroundFetch(oe)?oe.__abortController.abort(new Error("replaced")):b||(this.dispose(oe,R,"set"),this.disposeAfter&&this.disposed.push([oe,R,"set"])),this.removeItemSize(K),this.valList[K]=T,this.addItemSize(K,z,G),G){G.set="replace";const ie=oe&&this.isBackgroundFetch(oe)?oe.__staleWhileFetching:oe;ie!==void 0&&(G.oldValue=ie)}}else G&&(G.set="update")}if(S!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),V||this.setItemTTL(K,S,A),this.statusTTL(G,K),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const R=this.valList[this.head];return this.evict(!0),R}}evict(R){const T=this.head,S=this.keyList[T],A=this.valList[T];return this.isBackgroundFetch(A)?A.__abortController.abort(new Error("evicted")):(this.dispose(A,S,"evict"),this.disposeAfter&&this.disposed.push([A,S,"evict"])),this.removeItemSize(T),R&&(this.keyList[T]=null,this.valList[T]=null,this.free.push(T)),this.head=this.next[T],this.keyMap.delete(S),this.size--,T}has(R,{updateAgeOnHas:T=this.updateAgeOnHas,status:S}={}){const A=this.keyMap.get(R);if(A!==void 0)if(this.isStale(A))S&&(S.has="stale",this.statusTTL(S,A));else return T&&this.updateItemAge(A),S&&(S.has="hit"),this.statusTTL(S,A),!0;else S&&(S.has="miss");return!1}peek(R,{allowStale:T=this.allowStale}={}){const S=this.keyMap.get(R);if(S!==void 0&&(T||!this.isStale(S))){const A=this.valList[S];return this.isBackgroundFetch(A)?A.__staleWhileFetching:A}}backgroundFetch(R,T,S,A){const b=T===void 0?void 0:this.valList[T];if(this.isBackgroundFetch(b))return b;const z=new f;S.signal&&S.signal.addEventListener("abort",()=>z.abort(S.signal.reason));const k={signal:z.signal,options:S,context:A},V=(Y,le=!1)=>{const{aborted:se}=z.signal,X=S.ignoreFetchAbort&&Y!==void 0;return S.status&&(se&&!le?(S.status.fetchAborted=!0,S.status.fetchError=z.signal.reason,X&&(S.status.fetchAbortIgnored=!0)):S.status.fetchResolved=!0),se&&!X&&!le?K(z.signal.reason):(this.valList[T]===ie&&(Y===void 0?ie.__staleWhileFetching?this.valList[T]=ie.__staleWhileFetching:this.delete(R):(S.status&&(S.status.fetchUpdated=!0),this.set(R,Y,k.options))),Y)},G=Y=>(S.status&&(S.status.fetchRejected=!0,S.status.fetchError=Y),K(Y)),K=Y=>{const{aborted:le}=z.signal,se=le&&S.allowStaleOnFetchAbort,X=se||S.allowStaleOnFetchRejection,P=X||S.noDeleteOnFetchRejection;if(this.valList[T]===ie&&(!P||ie.__staleWhileFetching===void 0?this.delete(R):se||(this.valList[T]=ie.__staleWhileFetching)),X)return S.status&&ie.__staleWhileFetching!==void 0&&(S.status.returnedStale=!0),ie.__staleWhileFetching;if(ie.__returned===ie)throw Y},oe=(Y,le)=>{this.fetchMethod(R,b,k).then(se=>Y(se),le),z.signal.addEventListener("abort",()=>{(!S.ignoreFetchAbort||S.allowStaleOnFetchAbort)&&(Y(),S.allowStaleOnFetchAbort&&(Y=se=>V(se,!0)))})};S.status&&(S.status.fetchDispatched=!0);const ie=new Promise(oe).then(V,G);return ie.__abortController=z,ie.__staleWhileFetching=b,ie.__returned=null,T===void 0?(this.set(R,ie,{...k.options,status:void 0}),T=this.keyMap.get(R)):this.valList[T]=ie,ie}isBackgroundFetch(R){return R&&typeof R=="object"&&typeof R.then=="function"&&Object.prototype.hasOwnProperty.call(R,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(R,"__returned")&&(R.__returned===R||R.__returned===null)}async fetch(R,{allowStale:T=this.allowStale,updateAgeOnGet:S=this.updateAgeOnGet,noDeleteOnStaleGet:A=this.noDeleteOnStaleGet,ttl:b=this.ttl,noDisposeOnSet:z=this.noDisposeOnSet,size:k=0,sizeCalculation:V=this.sizeCalculation,noUpdateTTL:G=this.noUpdateTTL,noDeleteOnFetchRejection:K=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:oe=this.allowStaleOnFetchRejection,ignoreFetchAbort:ie=this.ignoreFetchAbort,allowStaleOnFetchAbort:Y=this.allowStaleOnFetchAbort,fetchContext:le=this.fetchContext,forceRefresh:se=!1,status:X,signal:P}={}){if(!this.fetchMethod)return X&&(X.fetch="get"),this.get(R,{allowStale:T,updateAgeOnGet:S,noDeleteOnStaleGet:A,status:X});const $={allowStale:T,updateAgeOnGet:S,noDeleteOnStaleGet:A,ttl:b,noDisposeOnSet:z,size:k,sizeCalculation:V,noUpdateTTL:G,noDeleteOnFetchRejection:K,allowStaleOnFetchRejection:oe,allowStaleOnFetchAbort:Y,ignoreFetchAbort:ie,status:X,signal:P};let te=this.keyMap.get(R);if(te===void 0){X&&(X.fetch="miss");const ae=this.backgroundFetch(R,te,$,le);return ae.__returned=ae}else{const ae=this.valList[te];if(this.isBackgroundFetch(ae)){const U=T&&ae.__staleWhileFetching!==void 0;return X&&(X.fetch="inflight",U&&(X.returnedStale=!0)),U?ae.__staleWhileFetching:ae.__returned=ae}const ee=this.isStale(te);if(!se&&!ee)return X&&(X.fetch="hit"),this.moveToTail(te),S&&this.updateItemAge(te),this.statusTTL(X,te),ae;const F=this.backgroundFetch(R,te,$,le),L=F.__staleWhileFetching!==void 0,Z=L&&T;return X&&(X.fetch=L&&ee?"stale":"refresh",Z&&ee&&(X.returnedStale=!0)),Z?F.__staleWhileFetching:F.__returned=F}}get(R,{allowStale:T=this.allowStale,updateAgeOnGet:S=this.updateAgeOnGet,noDeleteOnStaleGet:A=this.noDeleteOnStaleGet,status:b}={}){const z=this.keyMap.get(R);if(z!==void 0){const k=this.valList[z],V=this.isBackgroundFetch(k);return this.statusTTL(b,z),this.isStale(z)?(b&&(b.get="stale"),V?(b&&(b.returnedStale=T&&k.__staleWhileFetching!==void 0),T?k.__staleWhileFetching:void 0):(A||this.delete(R),b&&(b.returnedStale=T),T?k:void 0)):(b&&(b.get="hit"),V?k.__staleWhileFetching:(this.moveToTail(z),S&&this.updateItemAge(z),k))}else b&&(b.get="miss")}connect(R,T){this.prev[T]=R,this.next[R]=T}moveToTail(R){R!==this.tail&&(R===this.head?this.head=this.next[R]:this.connect(this.prev[R],this.next[R]),this.connect(this.tail,R),this.tail=R)}get del(){return n("del","delete"),this.delete}delete(R){let T=!1;if(this.size!==0){const S=this.keyMap.get(R);if(S!==void 0)if(T=!0,this.size===1)this.clear();else{this.removeItemSize(S);const A=this.valList[S];this.isBackgroundFetch(A)?A.__abortController.abort(new Error("deleted")):(this.dispose(A,R,"delete"),this.disposeAfter&&this.disposed.push([A,R,"delete"])),this.keyMap.delete(R),this.keyList[S]=null,this.valList[S]=null,S===this.tail?this.tail=this.prev[S]:S===this.head?this.head=this.next[S]:(this.next[this.prev[S]]=this.next[S],this.prev[this.next[S]]=this.prev[S]),this.size--,this.free.push(S)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return T}clear(){for(const R of this.rindexes({allowStale:!0})){const T=this.valList[R];if(this.isBackgroundFetch(T))T.__abortController.abort(new Error("deleted"));else{const S=this.keyList[R];this.dispose(T,S,"delete"),this.disposeAfter&&this.disposed.push([T,S,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return n("reset","clear"),this.clear}get length(){return o("length","size"),this.size}static get AbortController(){return f}static get AbortSignal(){return r}}D.exports=I}).call(this)}).call(this,g("_process"))},{_process:102}],73:[function(g,D,C){const l=D.exports,{Buffer:p}=g("buffer");l.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},l.requiredHeaderFlags={1:0,2:0,4:0,5:0,6:2,7:0,8:2,9:0,10:2,11:0,12:0,13:0,14:0,15:0},l.requiredHeaderFlagsErrors={};for(const f in l.requiredHeaderFlags){const s=l.requiredHeaderFlags[f];l.requiredHeaderFlagsErrors[f]="Invalid header flag bits, must be 0x"+s.toString(16)+" for "+l.types[f]+" packet"}l.codes={};for(const f in l.types){const s=l.types[f];l.codes[s]=f}l.CMD_SHIFT=4,l.CMD_MASK=240,l.DUP_MASK=8,l.QOS_MASK=3,l.QOS_SHIFT=1,l.RETAIN_MASK=1,l.VARBYTEINT_MASK=127,l.VARBYTEINT_FIN_MASK=128,l.VARBYTEINT_MAX=268435455,l.SESSIONPRESENT_MASK=1,l.SESSIONPRESENT_HEADER=p.from([l.SESSIONPRESENT_MASK]),l.CONNACK_HEADER=p.from([l.codes.connack<<l.CMD_SHIFT]),l.USERNAME_MASK=128,l.PASSWORD_MASK=64,l.WILL_RETAIN_MASK=32,l.WILL_QOS_MASK=24,l.WILL_QOS_SHIFT=3,l.WILL_FLAG_MASK=4,l.CLEAN_SESSION_MASK=2,l.CONNECT_HEADER=p.from([l.codes.connect<<l.CMD_SHIFT]),l.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},l.propertiesCodes={};for(const f in l.properties){const s=l.properties[f];l.propertiesCodes[s]=f}l.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function y(f){return[0,1,2].map(s=>[0,1].map(i=>[0,1].map(r=>{const e=p.alloc(1);return e.writeUInt8(l.codes[f]<<l.CMD_SHIFT|(i?l.DUP_MASK:0)|s<<l.QOS_SHIFT|r,0,!0),e})))}l.PUBLISH_HEADER=y("publish"),l.SUBSCRIBE_HEADER=y("subscribe"),l.SUBSCRIBE_OPTIONS_QOS_MASK=3,l.SUBSCRIBE_OPTIONS_NL_MASK=1,l.SUBSCRIBE_OPTIONS_NL_SHIFT=2,l.SUBSCRIBE_OPTIONS_RAP_MASK=1,l.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,l.SUBSCRIBE_OPTIONS_RH_MASK=3,l.SUBSCRIBE_OPTIONS_RH_SHIFT=4,l.SUBSCRIBE_OPTIONS_RH=[0,16,32],l.SUBSCRIBE_OPTIONS_NL=4,l.SUBSCRIBE_OPTIONS_RAP=8,l.SUBSCRIBE_OPTIONS_QOS=[0,1,2],l.UNSUBSCRIBE_HEADER=y("unsubscribe"),l.ACKS={unsuback:y("unsuback"),puback:y("puback"),pubcomp:y("pubcomp"),pubrel:y("pubrel"),pubrec:y("pubrec")},l.SUBACK_HEADER=p.from([l.codes.suback<<l.CMD_SHIFT]),l.VERSION3=p.from([3]),l.VERSION4=p.from([4]),l.VERSION5=p.from([5]),l.VERSION131=p.from([131]),l.VERSION132=p.from([132]),l.QOS=[0,1,2].map(f=>p.from([f])),l.EMPTY={pingreq:p.from([l.codes.pingreq<<4,0]),pingresp:p.from([l.codes.pingresp<<4,0]),disconnect:p.from([l.codes.disconnect<<4,0])},l.MQTT5_PUBACK_PUBREC_CODES={0:"Success",16:"No matching subscribers",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",144:"Topic Name invalid",145:"Packet identifier in use",151:"Quota exceeded",153:"Payload format invalid"},l.MQTT5_PUBREL_PUBCOMP_CODES={0:"Success",146:"Packet Identifier not found"},l.MQTT5_SUBACK_CODES={0:"Granted QoS 0",1:"Granted QoS 1",2:"Granted QoS 2",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use",151:"Quota exceeded",158:"Shared Subscriptions not supported",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},l.MQTT5_UNSUBACK_CODES={0:"Success",17:"No subscription existed",128:"Unspecified error",131:"Implementation specific error",135:"Not authorized",143:"Topic Filter invalid",145:"Packet Identifier in use"},l.MQTT5_DISCONNECT_CODES={0:"Normal disconnection",4:"Disconnect with Will Message",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",135:"Not authorized",137:"Server busy",139:"Server shutting down",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"},l.MQTT5_AUTH_CODES={0:"Success",24:"Continue authentication",25:"Re-authenticate"}},{buffer:29}],74:[function(g,D,C){const l=g("./writeToStream"),p=g("events"),{Buffer:y}=g("buffer");function f(i,r){const e=new s;return l(i,e,r),e.concat()}class s extends p{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0;const e=new Array(this._array.length),t=this._array;let n=0,o;for(o=0;o<t.length&&t[o]!==void 0;o++)typeof t[o]!="string"?e[o]=t[o].length:e[o]=y.byteLength(t[o]),r+=e[o];const h=y.allocUnsafe(r);for(o=0;o<t.length&&t[o]!==void 0;o++)typeof t[o]!="string"?(t[o].copy(h,n),n+=e[o]):(h.write(t[o],n),n+=e[o]);return h}destroy(r){r&&this.emit("error",r)}}D.exports=f},{"./writeToStream":96,buffer:29,events:49}],75:[function(g,D,C){C.parser=g("./parser").parser,C.generate=g("./generate"),C.writeToStream=g("./writeToStream")},{"./generate":74,"./parser":95,"./writeToStream":96}],76:[function(g,D,C){const{Buffer:l}=g("buffer"),p=Symbol.for("BufferList");function y(f){if(!(this instanceof y))return new y(f);y._init.call(this,f)}y._init=function(s){Object.defineProperty(this,p,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},y.prototype._new=function(s){return new y(s)},y.prototype._offset=function(s){if(s===0)return[0,0];let i=0;for(let r=0;r<this._bufs.length;r++){const e=i+this._bufs[r].length;if(s<e||r===this._bufs.length-1)return[r,s-i];i=e}},y.prototype._reverseOffset=function(f){const s=f[0];let i=f[1];for(let r=0;r<s;r++)i+=this._bufs[r].length;return i},y.prototype.get=function(s){if(s>this.length||s<0)return;const i=this._offset(s);return this._bufs[i[0]][i[1]]},y.prototype.slice=function(s,i){return typeof s=="number"&&s<0&&(s+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,s,i)},y.prototype.copy=function(s,i,r,e){if((typeof r!="number"||r<0)&&(r=0),(typeof e!="number"||e>this.length)&&(e=this.length),r>=this.length||e<=0)return s||l.alloc(0);const t=!!s,n=this._offset(r),o=e-r;let h=o,w=t&&i||0,E=n[1];if(r===0&&e===this.length){if(!t)return this._bufs.length===1?this._bufs[0]:l.concat(this._bufs,this.length);for(let v=0;v<this._bufs.length;v++)this._bufs[v].copy(s,w),w+=this._bufs[v].length;return s}if(h<=this._bufs[n[0]].length-E)return t?this._bufs[n[0]].copy(s,i,E,E+h):this._bufs[n[0]].slice(E,E+h);t||(s=l.allocUnsafe(o));for(let v=n[0];v<this._bufs.length;v++){const M=this._bufs[v].length-E;if(h>M)this._bufs[v].copy(s,w,E),w+=M;else{this._bufs[v].copy(s,w,E,E+h),w+=M;break}h-=M,E&&(E=0)}return s.length>w?s.slice(0,w):s},y.prototype.shallowSlice=function(s,i){if(s=s||0,i=typeof i!="number"?this.length:i,s<0&&(s+=this.length),i<0&&(i+=this.length),s===i)return this._new();const r=this._offset(s),e=this._offset(i),t=this._bufs.slice(r[0],e[0]+1);return e[1]===0?t.pop():t[t.length-1]=t[t.length-1].slice(0,e[1]),r[1]!==0&&(t[0]=t[0].slice(r[1])),this._new(t)},y.prototype.toString=function(s,i,r){return this.slice(i,r).toString(s)},y.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},y.prototype.duplicate=function(){const s=this._new();for(let i=0;i<this._bufs.length;i++)s.append(this._bufs[i]);return s},y.prototype.append=function(s){if(s==null)return this;if(s.buffer)this._appendBuffer(l.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let i=0;i<s.length;i++)this.append(s[i]);else if(this._isBufferList(s))for(let i=0;i<s._bufs.length;i++)this.append(s._bufs[i]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(l.from(s));return this},y.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},y.prototype.indexOf=function(f,s,i){if(i===void 0&&typeof s=="string"&&(i=s,s=void 0),typeof f=="function"||Array.isArray(f))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof f=="number"?f=l.from([f]):typeof f=="string"?f=l.from(f,i):this._isBufferList(f)?f=f.slice():Array.isArray(f.buffer)?f=l.from(f.buffer,f.byteOffset,f.byteLength):l.isBuffer(f)||(f=l.from(f)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),f.length===0)return s>this.length?this.length:s;const r=this._offset(s);let e=r[0],t=r[1];for(;e<this._bufs.length;e++){const n=this._bufs[e];for(;t<n.length;)if(n.length-t>=f.length){const h=n.indexOf(f,t);if(h!==-1)return this._reverseOffset([e,h]);t=n.length-f.length+1}else{const h=this._reverseOffset([e,t]);if(this._match(h,f))return h;t++}t=0}return-1},y.prototype._match=function(f,s){if(this.length-f<s.length)return!1;for(let i=0;i<s.length;i++)if(this.get(f+i)!==s[i])return!1;return!0},function(){const f={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in f)(function(i){f[i]===null?y.prototype[i]=function(r,e){return this.slice(r,r+e)[i](0,e)}:y.prototype[i]=function(r=0){return this.slice(r,r+f[i])[i](0)}})(s)}(),y.prototype._isBufferList=function(s){return s instanceof y||y.isBufferList(s)},y.isBufferList=function(s){return s!=null&&s[p]},D.exports=y},{buffer:29}],77:[function(g,D,C){const l=g("readable-stream").Duplex,p=g("inherits"),y=g("./BufferList");function f(s){if(!(this instanceof f))return new f(s);if(typeof s=="function"){this._callback=s;const i=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",i)}),this.on("unpipe",function(e){e.removeListener("error",i)}),s=null}y._init.call(this,s),l.call(this)}p(f,l),Object.assign(f.prototype,y.prototype),f.prototype._new=function(i){return new f(i)},f.prototype._write=function(i,r,e){this._appendBuffer(i),typeof e=="function"&&e()},f.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},f.prototype.end=function(i){l.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},f.prototype._destroy=function(i,r){this._bufs.length=0,this.length=0,r(i)},f.prototype._isBufferList=function(i){return i instanceof f||i instanceof y||f.isBufferList(i)},f.isBufferList=y.isBufferList,D.exports=f,D.exports.BufferListStream=f,D.exports.BufferList=y},{"./BufferList":76,inherits:51,"readable-stream":92}],78:[function(g,D,C){arguments[4][33][0].apply(C,arguments)},{dup:33}],79:[function(g,D,C){arguments[4][34][0].apply(C,arguments)},{"./_stream_readable":81,"./_stream_writable":83,_process:102,dup:34,inherits:51}],80:[function(g,D,C){arguments[4][35][0].apply(C,arguments)},{"./_stream_transform":82,dup:35,inherits:51}],81:[function(g,D,C){arguments[4][36][0].apply(C,arguments)},{"../errors":78,"./_stream_duplex":79,"./internal/streams/async_iterator":84,"./internal/streams/buffer_list":85,"./internal/streams/destroy":86,"./internal/streams/from":88,"./internal/streams/state":90,"./internal/streams/stream":91,_process:102,buffer:29,dup:36,events:49,inherits:51,"string_decoder/":136,util:26}],82:[function(g,D,C){arguments[4][37][0].apply(C,arguments)},{"../errors":78,"./_stream_duplex":79,dup:37,inherits:51}],83:[function(g,D,C){arguments[4][38][0].apply(C,arguments)},{"../errors":78,"./_stream_duplex":79,"./internal/streams/destroy":86,"./internal/streams/state":90,"./internal/streams/stream":91,_process:102,buffer:29,dup:38,inherits:51,"util-deprecate":139}],84:[function(g,D,C){arguments[4][39][0].apply(C,arguments)},{"./end-of-stream":87,_process:102,dup:39}],85:[function(g,D,C){arguments[4][40][0].apply(C,arguments)},{buffer:29,dup:40,util:26}],86:[function(g,D,C){arguments[4][41][0].apply(C,arguments)},{_process:102,dup:41}],87:[function(g,D,C){arguments[4][42][0].apply(C,arguments)},{"../../../errors":78,dup:42}],88:[function(g,D,C){arguments[4][43][0].apply(C,arguments)},{dup:43}],89:[function(g,D,C){arguments[4][44][0].apply(C,arguments)},{"../../../errors":78,"./end-of-stream":87,dup:44}],90:[function(g,D,C){arguments[4][45][0].apply(C,arguments)},{"../../../errors":78,dup:45}],91:[function(g,D,C){arguments[4][46][0].apply(C,arguments)},{dup:46,events:49}],92:[function(g,D,C){arguments[4][47][0].apply(C,arguments)},{"./lib/_stream_duplex.js":79,"./lib/_stream_passthrough.js":80,"./lib/_stream_readable.js":81,"./lib/_stream_transform.js":82,"./lib/_stream_writable.js":83,"./lib/internal/streams/end-of-stream.js":87,"./lib/internal/streams/pipeline.js":89,dup:47}],93:[function(g,D,C){const{Buffer:l}=g("buffer"),p=65536,y={},f=l.isBuffer(l.from([1,2]).subarray(0,1));function s(t){const n=l.allocUnsafe(2);return n.writeUInt8(t>>8,0),n.writeUInt8(t&255,0+1),n}function i(){for(let t=0;t<p;t++)y[t]=s(t)}function r(t){let o=0,h=0;const w=l.allocUnsafe(4);do o=t%128|0,t=t/128|0,t>0&&(o=o|128),w.writeUInt8(o,h++);while(t>0&&h<4);return t>0&&(h=0),f?w.subarray(0,h):w.slice(0,h)}function e(t){const n=l.allocUnsafe(4);return n.writeUInt32BE(t,0),n}D.exports={cache:y,generateCache:i,generateNumber:s,genBufVariableByteInt:r,generate4ByteBuffer:e}},{buffer:29}],94:[function(g,D,C){class l{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}D.exports=l},{}],95:[function(g,D,C){const l=g("bl"),p=g("events"),y=g("./packet"),f=g("./constants"),s=g("debug")("mqtt-packet:parser");class i extends p{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof i?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new i().parser(e)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new y,this.error=null,this._list=l(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0),t=e>>f.CMD_SHIFT;this.packet.cmd=f.types[t];const n=e&15,o=f.requiredHeaderFlags[t];return o!=null&&n!==o?this._emitError(new Error(f.requiredHeaderFlagsErrors[t])):(this.packet.retain=(e&f.RETAIN_MASK)!==0,this.packet.qos=e>>f.QOS_SHIFT&f.QOS_MASK,this.packet.qos>2?this._emitError(new Error("Packet must not have both QoS bits set to 1")):(this.packet.dup=(e&f.DUP_MASK)!==0,s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0))}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){s("_parseConnect");let e,t,n,o;const h={},w=this.packet,E=this._parseString();if(E===null)return this._emitError(new Error("Cannot parse protocolId"));if(E!=="MQTT"&&E!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(w.protocolId=E,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(w.protocolVersion=this._list.readUInt8(this._pos),w.protocolVersion>=128&&(w.bridgeMode=!0,w.protocolVersion=w.protocolVersion-128),w.protocolVersion!==3&&w.protocolVersion!==4&&w.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(this._list.readUInt8(this._pos)&1)return this._emitError(new Error("Connect flag bit 0 must be 0, but got 1"));h.username=this._list.readUInt8(this._pos)&f.USERNAME_MASK,h.password=this._list.readUInt8(this._pos)&f.PASSWORD_MASK,h.will=this._list.readUInt8(this._pos)&f.WILL_FLAG_MASK;const v=!!(this._list.readUInt8(this._pos)&f.WILL_RETAIN_MASK),M=(this._list.readUInt8(this._pos)&f.WILL_QOS_MASK)>>f.WILL_QOS_SHIFT;if(h.will)w.will={},w.will.retain=v,w.will.qos=M;else{if(v)return this._emitError(new Error("Will Retain Flag must be set to zero when Will Flag is set to 0"));if(M)return this._emitError(new Error("Will QoS must be set to zero when Will Flag is set to 0"))}if(w.clean=(this._list.readUInt8(this._pos)&f.CLEAN_SESSION_MASK)!==0,this._pos++,w.keepalive=this._parseNum(),w.keepalive===-1)return this._emitError(new Error("Packet too short"));if(w.protocolVersion===5){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(w.properties=x)}const O=this._parseString();if(O===null)return this._emitError(new Error("Packet too short"));if(w.clientId=O,s("_parseConnect: packet.clientId: %s",w.clientId),h.will){if(w.protocolVersion===5){const x=this._parseProperties();Object.getOwnPropertyNames(x).length&&(w.will.properties=x)}if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse will topic"));if(w.will.topic=e,s("_parseConnect: packet.will.topic: %s",w.will.topic),t=this._parseBuffer(),t===null)return this._emitError(new Error("Cannot parse will payload"));w.will.payload=t,s("_parseConnect: packet.will.paylaod: %s",w.will.payload)}if(h.username){if(o=this._parseString(),o===null)return this._emitError(new Error("Cannot parse username"));w.username=o,s("_parseConnect: packet.username: %s",w.username)}if(h.password){if(n=this._parseBuffer(),n===null)return this._emitError(new Error("Cannot parse password"));w.password=n}return this.settings=w,s("_parseConnect: complete"),w}_parseConnack(){s("_parseConnack");const e=this.packet;if(this._list.length<1)return null;const t=this._list.readUInt8(this._pos++);if(t>1)return this._emitError(new Error("Invalid connack flags, bits 7-1 must be set to 0"));if(e.sessionPresent=!!(t&f.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");const e=this.packet;let t,n,o,h,w,E,v;if(e.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const M=this._parseProperties();Object.getOwnPropertyNames(M).length&&(e.properties=M)}if(e.length<=0)return this._emitError(new Error("Malformed subscribe, no payload specified"));for(;this._pos<e.length;){if(t=this._parseString(),t===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));if(n=this._parseByte(),this.settings.protocolVersion===5){if(n&192)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-6 must be 0"))}else if(n&252)return this._emitError(new Error("Invalid subscribe topic flag bits, bits 7-2 must be 0"));if(o=n&f.SUBSCRIBE_OPTIONS_QOS_MASK,o>2)return this._emitError(new Error("Invalid subscribe QoS, must be <= 2"));if(E=(n>>f.SUBSCRIBE_OPTIONS_NL_SHIFT&f.SUBSCRIBE_OPTIONS_NL_MASK)!==0,w=(n>>f.SUBSCRIBE_OPTIONS_RAP_SHIFT&f.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,h=n>>f.SUBSCRIBE_OPTIONS_RH_SHIFT&f.SUBSCRIBE_OPTIONS_RH_MASK,h>2)return this._emitError(new Error("Invalid retain handling, must be <= 2"));v={topic:t,qos:o},this.settings.protocolVersion===5?(v.nl=E,v.rap=w,v.rh=h):this.settings.bridgeMode&&(v.rh=0,v.rap=!0,v.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",v),e.subscriptions.push(v)}}}_parseSuback(){s("_parseSuback");const e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed suback, no payload specified"));for(;this._pos<this.packet.length;){const t=this._list.readUInt8(this._pos++);if(this.settings.protocolVersion===5){if(!f.MQTT5_SUBACK_CODES[t])return this._emitError(new Error("Invalid suback code"))}else if(t>2&&t!==128)return this._emitError(new Error("Invalid suback QoS, must be 0, 1, 2 or 128"));this.packet.granted.push(t)}}}_parseUnsubscribe(){s("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}if(e.length<=0)return this._emitError(new Error("Malformed unsubscribe, no payload specified"));for(;this._pos<e.length;){const t=this._parseString();if(t===null)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){s("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if((this.settings.protocolVersion===3||this.settings.protocolVersion===4)&&e.length!==2)return this._emitError(new Error("Malformed unsuback, payload length must be 2"));if(e.length<=0)return this._emitError(new Error("Malformed unsuback, no payload specified"));if(this.settings.protocolVersion===5){const t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;){const n=this._list.readUInt8(this._pos++);if(!f.MQTT5_UNSUBACK_CODES[n])return this._emitError(new Error("Invalid unsuback code"));this.packet.granted.push(n)}}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5){if(e.length>2){switch(e.reasonCode=this._parseByte(),this.packet.cmd){case"puback":case"pubrec":if(!f.MQTT5_PUBACK_PUBREC_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break;case"pubrel":case"pubcomp":if(!f.MQTT5_PUBREL_PUBCOMP_CODES[e.reasonCode])return this._emitError(new Error("Invalid "+this.packet.cmd+" reason code"));break}s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)}else e.reasonCode=0;if(e.length>3){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}}return!0}_parseDisconnect(){const e=this.packet;if(s("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?(e.reasonCode=this._parseByte(),f.MQTT5_DISCONNECT_CODES[e.reasonCode]||this._emitError(new Error("Invalid disconnect reason code"))):e.reasonCode=0;const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");const e=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));if(e.reasonCode=this._parseByte(),!f.MQTT5_AUTH_CODES[e.reasonCode])return this._emitError(new Error("Invalid auth reason code"));const t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),s("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),e.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const t=this._parseNum(),n=t+this._pos;if(t===-1||n>this._list.length||n>this.packet.length)return null;const o=this._list.toString("utf8",this._pos,n);return this._pos+=t,s("_parseString: result: %s",o),o}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),t=e+this._pos;if(e===-1||t>this._list.length||t>this.packet.length)return null;const n=this._list.slice(this._pos,t);return this._pos+=e,s("_parseBuffer: result: %o",n),n}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");const t=4;let n=0,o=1,h=0,w=!1,E;const v=this._pos?this._pos:0;for(;n<t&&v+n<this._list.length;){if(E=this._list.readUInt8(v+n++),h+=o*(E&f.VARBYTEINT_MASK),o*=128,!(E&f.VARBYTEINT_FIN_MASK)){w=!0;break}if(this._list.length<=n)break}return!w&&n===t&&this._list.length>=n&&this._emitError(new Error("Invalid variable byte integer")),v&&(this._pos+=n),w?e?w={bytes:n,value:h}:w=h:w=!1,s("_parseVarByteNum: result: %o",w),w}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");const e=this._parseVarByteNum(),n=this._pos+e,o={};for(;this._pos<n;){const h=this._parseByte();if(!h)return this._emitError(new Error("Cannot parse property code type")),!1;const w=f.propertiesCodes[h];if(!w)return this._emitError(new Error("Unknown property")),!1;if(w==="userProperties"){o[w]||(o[w]=Object.create(null));const E=this._parseByType(f.propertiesTypes[w]);if(o[w][E.name])if(Array.isArray(o[w][E.name]))o[w][E.name].push(E.value);else{const v=o[w][E.name];o[w][E.name]=[v],o[w][E.name].push(E.value)}else o[w][E.name]=E.value;continue}o[w]?Array.isArray(o[w])?o[w].push(this._parseByType(f.propertiesTypes[w])):(o[w]=[o[w]],o[w].push(this._parseByType(f.propertiesTypes[w]))):o[w]=this._parseByType(f.propertiesTypes[w])}return o}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new y,this._pos=0,!0}_emitError(e){s("_emitError",e),this.error=e,this.emit("error",e)}}D.exports=i},{"./constants":73,"./packet":94,bl:77,debug:30,events:49}],96:[function(g,D,C){const l=g("./constants"),{Buffer:p}=g("buffer"),y=p.allocUnsafe(0),f=p.from([0]),s=g("./numbers"),i=g("process-nextick-args").nextTick,r=g("debug")("mqtt-packet:writeToStream"),e=s.cache,t=s.generateNumber,n=s.generateCache,o=s.genBufVariableByteInt,h=s.generate4ByteBuffer;let w=ie,E=!0;function v(F,L,Z){switch(r("generate called"),L.cork&&(L.cork(),i(M,L)),E&&(E=!1,n()),r("generate: packet.cmd: %s",F.cmd),F.cmd){case"connect":return O(F,L);case"connack":return x(F,L,Z);case"publish":return I(F,L,Z);case"puback":case"pubrec":case"pubrel":case"pubcomp":return j(F,L,Z);case"subscribe":return R(F,L,Z);case"suback":return T(F,L,Z);case"unsubscribe":return S(F,L,Z);case"unsuback":return A(F,L,Z);case"pingreq":case"pingresp":return b(F,L);case"disconnect":return z(F,L,Z);case"auth":return k(F,L,Z);default:return L.destroy(new Error("Unknown command")),!1}}Object.defineProperty(v,"cacheNumbers",{get(){return w===ie},set(F){F?((!e||Object.keys(e).length===0)&&(E=!0),w=ie):(E=!1,w=Y)}});function M(F){F.uncork()}function O(F,L,Z){const U=F||{},H=U.protocolId||"MQTT";let Q=U.protocolVersion||4;const q=U.will;let re=U.clean;const d=U.keepalive||0,m=U.clientId||"",c=U.username,a=U.password,u=U.properties;re===void 0&&(re=!0);let _=0;if(!H||typeof H!="string"&&!p.isBuffer(H))return L.destroy(new Error("Invalid protocolId")),!1;if(_+=H.length+2,Q!==3&&Q!==4&&Q!==5)return L.destroy(new Error("Invalid protocol version")),!1;if(_+=1,(typeof m=="string"||p.isBuffer(m))&&(m||Q>=4)&&(m||re))_+=p.byteLength(m)+2;else{if(Q<4)return L.destroy(new Error("clientId must be supplied before 3.1.1")),!1;if(re*1===0)return L.destroy(new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof d!="number"||d<0||d>65535||d%1!==0)return L.destroy(new Error("Invalid keepalive")),!1;_+=2,_+=1;let B,J;if(Q===5){if(B=X(L,u),!B)return!1;_+=B.length}if(q){if(typeof q!="object")return L.destroy(new Error("Invalid will")),!1;if(!q.topic||typeof q.topic!="string")return L.destroy(new Error("Invalid will topic")),!1;if(_+=p.byteLength(q.topic)+2,_+=2,q.payload)if(q.payload.length>=0)typeof q.payload=="string"?_+=p.byteLength(q.payload):_+=q.payload.length;else return L.destroy(new Error("Invalid will payload")),!1;if(J={},Q===5){if(J=X(L,q.properties),!J)return!1;_+=J.length}}let ne=!1;if(c!=null)if(ee(c))ne=!0,_+=p.byteLength(c)+2;else return L.destroy(new Error("Invalid username")),!1;if(a!=null){if(!ne)return L.destroy(new Error("Username is required to use password")),!1;if(ee(a))_+=ae(a)+2;else return L.destroy(new Error("Invalid password")),!1}L.write(l.CONNECT_HEADER),G(L,_),se(L,H),U.bridgeMode&&(Q+=128),L.write(Q===131?l.VERSION131:Q===132?l.VERSION132:Q===4?l.VERSION4:Q===5?l.VERSION5:l.VERSION3);let ce=0;return ce|=c!=null?l.USERNAME_MASK:0,ce|=a!=null?l.PASSWORD_MASK:0,ce|=q&&q.retain?l.WILL_RETAIN_MASK:0,ce|=q&&q.qos?q.qos<<l.WILL_QOS_SHIFT:0,ce|=q?l.WILL_FLAG_MASK:0,ce|=re?l.CLEAN_SESSION_MASK:0,L.write(p.from([ce])),w(L,d),Q===5&&B.write(),se(L,m),q&&(Q===5&&J.write(),K(L,q.topic),se(L,q.payload)),c!=null&&se(L,c),a!=null&&se(L,a),!0}function x(F,L,Z){const U=Z?Z.protocolVersion:4,H=F||{},Q=U===5?H.reasonCode:H.returnCode,q=H.properties;let re=2;if(typeof Q!="number")return L.destroy(new Error("Invalid return code")),!1;let d=null;if(U===5){if(d=X(L,q),!d)return!1;re+=d.length}return L.write(l.CONNACK_HEADER),G(L,re),L.write(H.sessionPresent?l.SESSIONPRESENT_HEADER:f),L.write(p.from([Q])),d!=null&&d.write(),!0}function I(F,L,Z){r("publish: packet: %o",F);const U=Z?Z.protocolVersion:4,H=F||{},Q=H.qos||0,q=H.retain?l.RETAIN_MASK:0,re=H.topic,d=H.payload||y,m=H.messageId,c=H.properties;let a=0;if(typeof re=="string")a+=p.byteLength(re)+2;else if(p.isBuffer(re))a+=re.length+2;else return L.destroy(new Error("Invalid topic")),!1;if(p.isBuffer(d)?a+=d.length:a+=p.byteLength(d),Q&&typeof m!="number")return L.destroy(new Error("Invalid messageId")),!1;Q&&(a+=2);let u=null;if(U===5){if(u=X(L,c),!u)return!1;a+=u.length}return L.write(l.PUBLISH_HEADER[Q][H.dup?1:0][q?1:0]),G(L,a),w(L,ae(re)),L.write(re),Q>0&&w(L,m),u!=null&&u.write(),r("publish: payload: %o",d),L.write(d)}function j(F,L,Z){const U=Z?Z.protocolVersion:4,H=F||{},Q=H.cmd||"puback",q=H.messageId,re=H.dup&&Q==="pubrel"?l.DUP_MASK:0;let d=0;const m=H.reasonCode,c=H.properties;let a=U===5?3:2;if(Q==="pubrel"&&(d=1),typeof q!="number")return L.destroy(new Error("Invalid messageId")),!1;let u=null;if(U===5&&typeof c=="object"){if(u=P(L,c,Z,a),!u)return!1;a+=u.length}return L.write(l.ACKS[Q][d][re][0]),a===3&&(a+=m!==0?1:-1),G(L,a),w(L,q),U===5&&a!==2&&L.write(p.from([m])),u!==null?u.write():a===4&&L.write(p.from([0])),!0}function R(F,L,Z){r("subscribe: packet: ");const U=Z?Z.protocolVersion:4,H=F||{},Q=H.dup?l.DUP_MASK:0,q=H.messageId,re=H.subscriptions,d=H.properties;let m=0;if(typeof q!="number")return L.destroy(new Error("Invalid messageId")),!1;m+=2;let c=null;if(U===5){if(c=X(L,d),!c)return!1;m+=c.length}if(typeof re=="object"&&re.length)for(let u=0;u<re.length;u+=1){const _=re[u].topic,B=re[u].qos;if(typeof _!="string")return L.destroy(new Error("Invalid subscriptions - invalid topic")),!1;if(typeof B!="number")return L.destroy(new Error("Invalid subscriptions - invalid qos")),!1;if(U===5){if(typeof(re[u].nl||!1)!="boolean")return L.destroy(new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(re[u].rap||!1)!="boolean")return L.destroy(new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ce=re[u].rh||0;if(typeof ce!="number"||ce>2)return L.destroy(new Error("Invalid subscriptions - invalid Retain Handling")),!1}m+=p.byteLength(_)+2+1}else return L.destroy(new Error("Invalid subscriptions")),!1;r("subscribe: writing to stream: %o",l.SUBSCRIBE_HEADER),L.write(l.SUBSCRIBE_HEADER[1][Q?1:0][0]),G(L,m),w(L,q),c!==null&&c.write();let a=!0;for(const u of re){const _=u.topic,B=u.qos,J=+u.nl,ne=+u.rap,ce=u.rh;let de;K(L,_),de=l.SUBSCRIBE_OPTIONS_QOS[B],U===5&&(de|=J?l.SUBSCRIBE_OPTIONS_NL:0,de|=ne?l.SUBSCRIBE_OPTIONS_RAP:0,de|=ce?l.SUBSCRIBE_OPTIONS_RH[ce]:0),a=L.write(p.from([de]))}return a}function T(F,L,Z){const U=Z?Z.protocolVersion:4,H=F||{},Q=H.messageId,q=H.granted,re=H.properties;let d=0;if(typeof Q!="number")return L.destroy(new Error("Invalid messageId")),!1;if(d+=2,typeof q=="object"&&q.length)for(let c=0;c<q.length;c+=1){if(typeof q[c]!="number")return L.destroy(new Error("Invalid qos vector")),!1;d+=1}else return L.destroy(new Error("Invalid qos vector")),!1;let m=null;if(U===5){if(m=P(L,re,Z,d),!m)return!1;d+=m.length}return L.write(l.SUBACK_HEADER),G(L,d),w(L,Q),m!==null&&m.write(),L.write(p.from(q))}function S(F,L,Z){const U=Z?Z.protocolVersion:4,H=F||{},Q=H.messageId,q=H.dup?l.DUP_MASK:0,re=H.unsubscriptions,d=H.properties;let m=0;if(typeof Q!="number")return L.destroy(new Error("Invalid messageId")),!1;if(m+=2,typeof re=="object"&&re.length)for(let u=0;u<re.length;u+=1){if(typeof re[u]!="string")return L.destroy(new Error("Invalid unsubscriptions")),!1;m+=p.byteLength(re[u])+2}else return L.destroy(new Error("Invalid unsubscriptions")),!1;let c=null;if(U===5){if(c=X(L,d),!c)return!1;m+=c.length}L.write(l.UNSUBSCRIBE_HEADER[1][q?1:0][0]),G(L,m),w(L,Q),c!==null&&c.write();let a=!0;for(let u=0;u<re.length;u++)a=K(L,re[u]);return a}function A(F,L,Z){const U=Z?Z.protocolVersion:4,H=F||{},Q=H.messageId,q=H.dup?l.DUP_MASK:0,re=H.granted,d=H.properties,m=H.cmd,c=0;let a=2;if(typeof Q!="number")return L.destroy(new Error("Invalid messageId")),!1;if(U===5)if(typeof re=="object"&&re.length)for(let _=0;_<re.length;_+=1){if(typeof re[_]!="number")return L.destroy(new Error("Invalid qos vector")),!1;a+=1}else return L.destroy(new Error("Invalid qos vector")),!1;let u=null;if(U===5){if(u=P(L,d,Z,a),!u)return!1;a+=u.length}return L.write(l.ACKS[m][c][q][0]),G(L,a),w(L,Q),u!==null&&u.write(),U===5&&L.write(p.from(re)),!0}function b(F,L,Z){return L.write(l.EMPTY[F.cmd])}function z(F,L,Z){const U=Z?Z.protocolVersion:4,H=F||{},Q=H.reasonCode,q=H.properties;let re=U===5?1:0,d=null;if(U===5){if(d=P(L,q,Z,re),!d)return!1;re+=d.length}return L.write(p.from([l.codes.disconnect<<4])),G(L,re),U===5&&L.write(p.from([Q])),d!==null&&d.write(),!0}function k(F,L,Z){const U=Z?Z.protocolVersion:4,H=F||{},Q=H.reasonCode,q=H.properties;let re=U===5?1:0;U!==5&&L.destroy(new Error("Invalid mqtt version for auth packet"));const d=P(L,q,Z,re);return d?(re+=d.length,L.write(p.from([l.codes.auth<<4])),G(L,re),L.write(p.from([Q])),d!==null&&d.write(),!0):!1}const V={};function G(F,L){if(L>l.VARBYTEINT_MAX)return F.destroy(new Error(`Invalid variable byte integer: ${L}`)),!1;let Z=V[L];return Z||(Z=o(L),L<16384&&(V[L]=Z)),r("writeVarByteInt: writing to stream: %o",Z),F.write(Z)}function K(F,L){const Z=p.byteLength(L);return w(F,Z),r("writeString: %s",L),F.write(L,"utf8")}function oe(F,L,Z){K(F,L),K(F,Z)}function ie(F,L){return r("writeNumberCached: number: %d",L),r("writeNumberCached: %o",e[L]),F.write(e[L])}function Y(F,L){const Z=t(L);return r("writeNumberGenerated: %o",Z),F.write(Z)}function le(F,L){const Z=h(L);return r("write4ByteNumber: %o",Z),F.write(Z)}function se(F,L){typeof L=="string"?K(F,L):L?(w(F,L.length),F.write(L)):w(F,0)}function X(F,L){if(typeof L!="object"||L.length!=null)return{length:1,write(){te(F,{},0)}};let Z=0;function U(Q,q){const re=l.propertiesTypes[Q];let d=0;switch(re){case"byte":{if(typeof q!="boolean")return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=1+1;break}case"int8":{if(typeof q!="number"||q<0||q>255)return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=1+1;break}case"binary":{if(q&&q===null)return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=1+p.byteLength(q)+2;break}case"int16":{if(typeof q!="number"||q<0||q>65535)return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=1+2;break}case"int32":{if(typeof q!="number"||q<0||q>4294967295)return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=1+4;break}case"var":{if(typeof q!="number"||q<0||q>268435455)return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=1+p.byteLength(o(q));break}case"string":{if(typeof q!="string")return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=1+2+p.byteLength(q.toString());break}case"pair":{if(typeof q!="object")return F.destroy(new Error(`Invalid ${Q}: ${q}`)),!1;d+=Object.getOwnPropertyNames(q).reduce((m,c)=>{const a=q[c];return Array.isArray(a)?m+=a.reduce((u,_)=>(u+=1+2+p.byteLength(c.toString())+2+p.byteLength(_.toString()),u),0):m+=1+2+p.byteLength(c.toString())+2+p.byteLength(q[c].toString()),m},0);break}default:return F.destroy(new Error(`Invalid property ${Q}: ${q}`)),!1}return d}if(L)for(const Q in L){let q=0,re=0;const d=L[Q];if(Array.isArray(d))for(let m=0;m<d.length;m++){if(re=U(Q,d[m]),!re)return!1;q+=re}else{if(re=U(Q,d),!re)return!1;q=re}if(!q)return!1;Z+=q}return{length:p.byteLength(o(Z))+Z,write(){te(F,L,Z)}}}function P(F,L,Z,U){const H=["reasonString","userProperties"],Q=Z&&Z.properties&&Z.properties.maximumPacketSize?Z.properties.maximumPacketSize:0;let q=X(F,L);if(Q)for(;U+q.length>Q;){const re=H.shift();if(re&&L[re])delete L[re],q=X(F,L);else return!1}return q}function $(F,L,Z){switch(l.propertiesTypes[L]){case"byte":{F.write(p.from([l.properties[L]])),F.write(p.from([+Z]));break}case"int8":{F.write(p.from([l.properties[L]])),F.write(p.from([Z]));break}case"binary":{F.write(p.from([l.properties[L]])),se(F,Z);break}case"int16":{F.write(p.from([l.properties[L]])),w(F,Z);break}case"int32":{F.write(p.from([l.properties[L]])),le(F,Z);break}case"var":{F.write(p.from([l.properties[L]])),G(F,Z);break}case"string":{F.write(p.from([l.properties[L]])),K(F,Z);break}case"pair":{Object.getOwnPropertyNames(Z).forEach(H=>{const Q=Z[H];Array.isArray(Q)?Q.forEach(q=>{F.write(p.from([l.properties[L]])),oe(F,H.toString(),q.toString())}):(F.write(p.from([l.properties[L]])),oe(F,H.toString(),Q.toString()))});break}default:return F.destroy(new Error(`Invalid property ${L} value: ${Z}`)),!1}}function te(F,L,Z){G(F,Z);for(const U in L)if(Object.prototype.hasOwnProperty.call(L,U)&&L[U]!==null){const H=L[U];if(Array.isArray(H))for(let Q=0;Q<H.length;Q++)$(F,U,H[Q]);else $(F,U,H)}}function ae(F){return F?F instanceof p?F.length:p.byteLength(F):0}function ee(F){return typeof F=="string"||F instanceof p}D.exports=v},{"./constants":73,"./numbers":93,buffer:29,debug:30,"process-nextick-args":101}],97:[function(g,D,C){var l=1e3,p=l*60,y=p*60,f=y*24,s=f*7,i=f*365.25;D.exports=function(o,h){h=h||{};var w=typeof o;if(w==="string"&&o.length>0)return r(o);if(w==="number"&&isFinite(o))return h.long?t(o):e(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function r(o){if(o=String(o),!(o.length>100)){var h=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(h){var w=parseFloat(h[1]),E=(h[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return w*i;case"weeks":case"week":case"w":return w*s;case"days":case"day":case"d":return w*f;case"hours":case"hour":case"hrs":case"hr":case"h":return w*y;case"minutes":case"minute":case"mins":case"min":case"m":return w*p;case"seconds":case"second":case"secs":case"sec":case"s":return w*l;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function e(o){var h=Math.abs(o);return h>=f?Math.round(o/f)+"d":h>=y?Math.round(o/y)+"h":h>=p?Math.round(o/p)+"m":h>=l?Math.round(o/l)+"s":o+"ms"}function t(o){var h=Math.abs(o);return h>=f?n(o,h,f,"day"):h>=y?n(o,h,y,"hour"):h>=p?n(o,h,p,"minute"):h>=l?n(o,h,l,"second"):o+" ms"}function n(o,h,w,E){var v=h>=w*1.5;return Math.round(o/w)+" "+E+(v?"s":"")}},{}],98:[function(g,D,C){const l=g("./lib/number-allocator.js");D.exports.NumberAllocator=l},{"./lib/number-allocator.js":99}],99:[function(g,D,C){const l=g("js-sdsl").OrderedSet,p=g("debug")("number-allocator:trace"),y=g("debug")("number-allocator:error");function f(i,r){this.low=i,this.high=r}f.prototype.equals=function(i){return this.low===i.low&&this.high===i.high},f.prototype.compare=function(i){return this.low<i.low&&this.high<i.low?-1:i.low<this.low&&i.high<this.low?1:0};function s(i,r){if(!(this instanceof s))return new s(i,r);this.min=i,this.max=r,this.ss=new l([],(e,t)=>e.compare(t)),p("Create"),this.clear()}s.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},s.prototype.alloc=function(){if(this.ss.size()===0)return p("alloc():empty"),null;const i=this.ss.begin(),r=i.pointer.low,e=i.pointer.high,t=r;return t+1<=e?this.ss.updateKeyByIterator(i,new f(r+1,e)):this.ss.eraseElementByPos(0),p("alloc():"+t),t},s.prototype.use=function(i){const r=new f(i,i),e=this.ss.lowerBound(r);if(!e.equals(this.ss.end())){const t=e.pointer.low,n=e.pointer.high;return e.pointer.equals(r)?(this.ss.eraseElementByIterator(e),p("use():"+i),!0):t>i?!1:t===i?(this.ss.updateKeyByIterator(e,new f(t+1,n)),p("use():"+i),!0):n===i?(this.ss.updateKeyByIterator(e,new f(t,n-1)),p("use():"+i),!0):(this.ss.updateKeyByIterator(e,new f(i+1,n)),this.ss.insert(new f(t,i-1)),p("use():"+i),!0)}return p("use():failed"),!1},s.prototype.free=function(i){if(i<this.min||i>this.max){y("free():"+i+" is out of range");return}const r=new f(i,i),e=this.ss.upperBound(r);if(e.equals(this.ss.end())){if(e.equals(this.ss.begin())){this.ss.insert(r);return}e.pre();const t=e.pointer.high;e.pointer.high+1===i?this.ss.updateKeyByIterator(e,new f(t,i)):this.ss.insert(r)}else if(e.equals(this.ss.begin()))if(i+1===e.pointer.low){const t=e.pointer.high;this.ss.updateKeyByIterator(e,new f(i,t))}else this.ss.insert(r);else{const t=e.pointer.low,n=e.pointer.high;e.pre();const o=e.pointer.low;e.pointer.high+1===i?i+1===t?(this.ss.eraseElementByIterator(e),this.ss.updateKeyByIterator(e,new f(o,n))):this.ss.updateKeyByIterator(e,new f(o,i)):i+1===t?(this.ss.eraseElementByIterator(e.next()),this.ss.insert(new f(i,n))):this.ss.insert(r)}p("free():"+i)},s.prototype.clear=function(){p("clear()"),this.ss.clear(),this.ss.insert(new f(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){for(const i of this.ss);},D.exports=s},{debug:30,"js-sdsl":69}],100:[function(g,D,C){var l=g("wrappy");D.exports=l(p),D.exports.strict=l(y),p.proto=p(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return p(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return y(this)},configurable:!0})});function p(f){var s=function(){return s.called?s.value:(s.called=!0,s.value=f.apply(this,arguments))};return s.called=!1,s}function y(f){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=f.apply(this,arguments)},i=f.name||"Function wrapped with `once`";return s.onceError=i+" shouldn't be called more than once",s.called=!1,s}},{wrappy:140}],101:[function(g,D,C){(function(l){(function(){typeof l>"u"||!l.version||l.version.indexOf("v0.")===0||l.version.indexOf("v1.")===0&&l.version.indexOf("v1.8.")!==0?D.exports={nextTick:p}:D.exports=l;function p(y,f,s,i){if(typeof y!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,e,t;switch(r){case 0:case 1:return l.nextTick(y);case 2:return l.nextTick(function(){y.call(null,f)});case 3:return l.nextTick(function(){y.call(null,f,s)});case 4:return l.nextTick(function(){y.call(null,f,s,i)});default:for(e=new Array(r-1),t=0;t<e.length;)e[t++]=arguments[t];return l.nextTick(function(){y.apply(null,e)})}}}).call(this)}).call(this,g("_process"))},{_process:102}],102:[function(g,D,C){var l=D.exports={},p,y;function f(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?p=setTimeout:p=f}catch{p=f}try{typeof clearTimeout=="function"?y=clearTimeout:y=s}catch{y=s}})();function i(M){if(p===setTimeout)return setTimeout(M,0);if((p===f||!p)&&setTimeout)return p=setTimeout,setTimeout(M,0);try{return p(M,0)}catch{try{return p.call(null,M,0)}catch{return p.call(this,M,0)}}}function r(M){if(y===clearTimeout)return clearTimeout(M);if((y===s||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(M);try{return y(M)}catch{try{return y.call(null,M)}catch{return y.call(this,M)}}}var e=[],t=!1,n,o=-1;function h(){!t||!n||(t=!1,n.length?e=n.concat(e):o=-1,e.length&&w())}function w(){if(!t){var M=i(h);t=!0;for(var O=e.length;O;){for(n=e,e=[];++o<O;)n&&n[o].run();o=-1,O=e.length}n=null,t=!1,r(M)}}l.nextTick=function(M){var O=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)O[x-1]=arguments[x];e.push(new E(M,O)),e.length===1&&!t&&i(w)};function E(M,O){this.fun=M,this.array=O}E.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={};function v(){}l.on=v,l.addListener=v,l.once=v,l.off=v,l.removeListener=v,l.removeAllListeners=v,l.emit=v,l.prependListener=v,l.prependOnceListener=v,l.listeners=function(M){return[]},l.binding=function(M){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(M){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},{}],103:[function(g,D,C){(function(l){(function(){(function(p){var y=typeof C=="object"&&C&&!C.nodeType&&C,f=typeof D=="object"&&D&&!D.nodeType&&D,s=typeof l=="object"&&l;(s.global===s||s.window===s||s.self===s)&&(p=s);var i,r=2147483647,e=36,t=1,n=26,o=38,h=700,w=72,E=128,v="-",M=/^xn--/,O=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=e-t,R=Math.floor,T=String.fromCharCode,S;function A(X){throw new RangeError(I[X])}function b(X,P){for(var $=X.length,te=[];$--;)te[$]=P(X[$]);return te}function z(X,P){var $=X.split("@"),te="";$.length>1&&(te=$[0]+"@",X=$[1]),X=X.replace(x,".");var ae=X.split("."),ee=b(ae,P).join(".");return te+ee}function k(X){for(var P=[],$=0,te=X.length,ae,ee;$<te;)ae=X.charCodeAt($++),ae>=55296&&ae<=56319&&$<te?(ee=X.charCodeAt($++),(ee&64512)==56320?P.push(((ae&1023)<<10)+(ee&1023)+65536):(P.push(ae),$--)):P.push(ae);return P}function V(X){return b(X,function(P){var $="";return P>65535&&(P-=65536,$+=T(P>>>10&1023|55296),P=56320|P&1023),$+=T(P),$}).join("")}function G(X){return X-48<10?X-22:X-65<26?X-65:X-97<26?X-97:e}function K(X,P){return X+22+75*(X<26)-((P!=0)<<5)}function oe(X,P,$){var te=0;for(X=$?R(X/h):X>>1,X+=R(X/P);X>j*n>>1;te+=e)X=R(X/j);return R(te+(j+1)*X/(X+o))}function ie(X){var P=[],$=X.length,te,ae=0,ee=E,F=w,L,Z,U,H,Q,q,re,d,m;for(L=X.lastIndexOf(v),L<0&&(L=0),Z=0;Z<L;++Z)X.charCodeAt(Z)>=128&&A("not-basic"),P.push(X.charCodeAt(Z));for(U=L>0?L+1:0;U<$;){for(H=ae,Q=1,q=e;U>=$&&A("invalid-input"),re=G(X.charCodeAt(U++)),(re>=e||re>R((r-ae)/Q))&&A("overflow"),ae+=re*Q,d=q<=F?t:q>=F+n?n:q-F,!(re<d);q+=e)m=e-d,Q>R(r/m)&&A("overflow"),Q*=m;te=P.length+1,F=oe(ae-H,te,H==0),R(ae/te)>r-ee&&A("overflow"),ee+=R(ae/te),ae%=te,P.splice(ae++,0,ee)}return V(P)}function Y(X){var P,$,te,ae,ee,F,L,Z,U,H,Q,q=[],re,d,m,c;for(X=k(X),re=X.length,P=E,$=0,ee=w,F=0;F<re;++F)Q=X[F],Q<128&&q.push(T(Q));for(te=ae=q.length,ae&&q.push(v);te<re;){for(L=r,F=0;F<re;++F)Q=X[F],Q>=P&&Q<L&&(L=Q);for(d=te+1,L-P>R((r-$)/d)&&A("overflow"),$+=(L-P)*d,P=L,F=0;F<re;++F)if(Q=X[F],Q<P&&++$>r&&A("overflow"),Q==P){for(Z=$,U=e;H=U<=ee?t:U>=ee+n?n:U-ee,!(Z<H);U+=e)c=Z-H,m=e-H,q.push(T(K(H+c%m,0))),Z=R(c/m);q.push(T(K(Z,0))),ee=oe($,d,te==ae),$=0,++te}++$,++P}return q.join("")}function le(X){return z(X,function(P){return M.test(P)?ie(P.slice(4).toLowerCase()):P})}function se(X){return z(X,function(P){return O.test(P)?"xn--"+Y(P):P})}if(i={version:"1.4.1",ucs2:{decode:k,encode:V},decode:ie,encode:Y,toASCII:se,toUnicode:le},y&&f)if(D.exports==y)f.exports=i;else for(S in i)i.hasOwnProperty(S)&&(y[S]=i[S]);else p.punycode=i})(this)}).call(this)}).call(this,typeof me<"u"?me:typeof self<"u"?self:typeof window<"u"?window:{})},{}],104:[function(g,D,C){function l(y,f){return Object.prototype.hasOwnProperty.call(y,f)}D.exports=function(y,f,s,i){f=f||"&",s=s||"=";var r={};if(typeof y!="string"||y.length===0)return r;var e=/\+/g;y=y.split(f);var t=1e3;i&&typeof i.maxKeys=="number"&&(t=i.maxKeys);var n=y.length;t>0&&n>t&&(n=t);for(var o=0;o<n;++o){var h=y[o].replace(e,"%20"),w=h.indexOf(s),E,v,M,O;w>=0?(E=h.substr(0,w),v=h.substr(w+1)):(E=h,v=""),M=decodeURIComponent(E),O=decodeURIComponent(v),l(r,M)?p(r[M])?r[M].push(O):r[M]=[r[M],O]:r[M]=O}return r};var p=Array.isArray||function(y){return Object.prototype.toString.call(y)==="[object Array]"}},{}],105:[function(g,D,C){var l=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}};D.exports=function(s,i,r,e){return i=i||"&",r=r||"=",s===null&&(s=void 0),typeof s=="object"?y(f(s),function(t){var n=encodeURIComponent(l(t))+r;return p(s[t])?y(s[t],function(o){return n+encodeURIComponent(l(o))}).join(i):n+encodeURIComponent(l(s[t]))}).join(i):e?encodeURIComponent(l(e))+r+encodeURIComponent(l(s)):""};var p=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function y(s,i){if(s.map)return s.map(i);for(var r=[],e=0;e<s.length;e++)r.push(i(s[e],e));return r}var f=Object.keys||function(s){var i=[];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&i.push(r);return i}},{}],106:[function(g,D,C){C.decode=C.parse=g("./decode"),C.encode=C.stringify=g("./encode")},{"./decode":104,"./encode":105}],107:[function(g,D,C){const{AbortError:l,codes:p}=g("../../ours/errors"),{isNodeStream:y,isWebStream:f,kControllerErrorFunction:s}=g("./utils"),i=g("./end-of-stream"),{ERR_INVALID_ARG_TYPE:r}=p,e=(t,n)=>{if(typeof t!="object"||!("aborted"in t))throw new r(n,"AbortSignal",t)};D.exports.addAbortSignal=function(n,o){if(e(n,"signal"),!y(o)&&!f(o))throw new r("stream",["ReadableStream","WritableStream","Stream"],o);return D.exports.addAbortSignalNoValidate(n,o)},D.exports.addAbortSignalNoValidate=function(t,n){if(typeof t!="object"||!("aborted"in t))return n;const o=y(n)?()=>{n.destroy(new l(void 0,{cause:t.reason}))}:()=>{n[s](new l(void 0,{cause:t.reason}))};return t.aborted?o():(t.addEventListener("abort",o),i(n,()=>t.removeEventListener("abort",o))),n}},{"../../ours/errors":126,"./end-of-stream":113,"./utils":122}],108:[function(g,D,C){const{StringPrototypeSlice:l,SymbolIterator:p,TypedArrayPrototypeSet:y,Uint8Array:f}=g("../../ours/primordials"),{Buffer:s}=g("buffer"),{inspect:i}=g("../../ours/util");D.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length}shift(){if(this.length===0)return;const e=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(this.length===0)return"";let t=this.head,n=""+t.data;for(;(t=t.next)!==null;)n+=e+t.data;return n}concat(e){if(this.length===0)return s.alloc(0);const t=s.allocUnsafe(e>>>0);let n=this.head,o=0;for(;n;)y(t,n.data,o),o+=n.data.length,n=n.next;return t}consume(e,t){const n=this.head.data;if(e<n.length){const o=n.slice(0,e);return this.head.data=n.slice(e),o}return e===n.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[p](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",n=this.head,o=0;do{const h=n.data;if(e>h.length)t+=h,e-=h.length;else{e===h.length?(t+=h,++o,n.next?this.head=n.next:this.head=this.tail=null):(t+=l(h,0,e),this.head=n,n.data=l(h,e));break}++o}while((n=n.next)!==null);return this.length-=o,t}_getBuffer(e){const t=s.allocUnsafe(e),n=e;let o=this.head,h=0;do{const w=o.data;if(e>w.length)y(t,w,n-e),e-=w.length;else{e===w.length?(y(t,w,n-e),++h,o.next?this.head=o.next:this.head=this.tail=null):(y(t,new f(w.buffer,w.byteOffset,e),n-e),this.head=o,o.data=w.slice(e));break}++h}while((o=o.next)!==null);return this.length-=h,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return i(this,{...t,depth:0,customInspect:!1})}}},{"../../ours/primordials":127,"../../ours/util":128,buffer:29}],109:[function(g,D,C){const{pipeline:l}=g("./pipeline"),p=g("./duplex"),{destroyer:y}=g("./destroy"),{isNodeStream:f,isReadable:s,isWritable:i,isWebStream:r,isTransformStream:e,isWritableStream:t,isReadableStream:n}=g("./utils"),{AbortError:o,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:w}}=g("../../ours/errors"),E=g("./end-of-stream");D.exports=function(...M){if(M.length===0)throw new w("streams");if(M.length===1)return p.from(M[0]);const O=[...M];if(typeof M[0]=="function"&&(M[0]=p.from(M[0])),typeof M[M.length-1]=="function"){const V=M.length-1;M[V]=p.from(M[V])}for(let V=0;V<M.length;++V)if(!(!f(M[V])&&!r(M[V]))){if(V<M.length-1&&!(s(M[V])||n(M[V])||e(M[V])))throw new h(`streams[${V}]`,O[V],"must be readable");if(V>0&&!(i(M[V])||t(M[V])||e(M[V])))throw new h(`streams[${V}]`,O[V],"must be writable")}let x,I,j,R,T;function S(V){const G=R;R=null,G?G(V):V?T.destroy(V):!k&&!z&&T.destroy()}const A=M[0],b=l(M,S),z=!!(i(A)||t(A)||e(A)),k=!!(s(b)||n(b)||e(b));if(T=new p({writableObjectMode:!!(A!=null&&A.writableObjectMode),readableObjectMode:!!(b!=null&&b.writableObjectMode),writable:z,readable:k}),z){if(f(A))T._write=function(G,K,oe){A.write(G,K)?oe():x=oe},T._final=function(G){A.end(),I=G},A.on("drain",function(){if(x){const G=x;x=null,G()}});else if(r(A)){const K=(e(A)?A.writable:A).getWriter();T._write=async function(oe,ie,Y){try{await K.ready,K.write(oe).catch(()=>{}),Y()}catch(le){Y(le)}},T._final=async function(oe){try{await K.ready,K.close().catch(()=>{}),I=oe}catch(ie){oe(ie)}}}const V=e(b)?b.readable:b;E(V,()=>{if(I){const G=I;I=null,G()}})}if(k){if(f(b))b.on("readable",function(){if(j){const V=j;j=null,V()}}),b.on("end",function(){T.push(null)}),T._read=function(){for(;;){const V=b.read();if(V===null){j=T._read;return}if(!T.push(V))return}};else if(r(b)){const G=(e(b)?b.readable:b).getReader();T._read=async function(){for(;;)try{const{value:K,done:oe}=await G.read();if(!T.push(K))return;if(oe){T.push(null);return}}catch{return}}}}return T._destroy=function(V,G){!V&&R!==null&&(V=new o),j=null,x=null,I=null,R===null?G(V):(R=G,f(b)&&y(b,V))},T}},{"../../ours/errors":126,"./destroy":110,"./duplex":111,"./end-of-stream":113,"./pipeline":118,"./utils":122}],110:[function(g,D,C){const l=g("process/"),{aggregateTwoErrors:p,codes:{ERR_MULTIPLE_CALLBACK:y},AbortError:f}=g("../../ours/errors"),{Symbol:s}=g("../../ours/primordials"),{kDestroyed:i,isDestroyed:r,isFinished:e,isServerRequest:t}=g("./utils"),n=s("kDestroy"),o=s("kConstruct");function h(k,V,G){k&&(k.stack,V&&!V.errored&&(V.errored=k),G&&!G.errored&&(G.errored=k))}function w(k,V){const G=this._readableState,K=this._writableState,oe=K||G;return K!=null&&K.destroyed||G!=null&&G.destroyed?(typeof V=="function"&&V(),this):(h(k,K,G),K&&(K.destroyed=!0),G&&(G.destroyed=!0),oe.constructed?E(this,k,V):this.once(n,function(ie){E(this,p(ie,k),V)}),this)}function E(k,V,G){let K=!1;function oe(ie){if(K)return;K=!0;const Y=k._readableState,le=k._writableState;h(ie,le,Y),le&&(le.closed=!0),Y&&(Y.closed=!0),typeof G=="function"&&G(ie),ie?l.nextTick(v,k,ie):l.nextTick(M,k)}try{k._destroy(V||null,oe)}catch(ie){oe(ie)}}function v(k,V){O(k,V),M(k)}function M(k){const V=k._readableState,G=k._writableState;G&&(G.closeEmitted=!0),V&&(V.closeEmitted=!0),(G!=null&&G.emitClose||V!=null&&V.emitClose)&&k.emit("close")}function O(k,V){const G=k._readableState,K=k._writableState;K!=null&&K.errorEmitted||G!=null&&G.errorEmitted||(K&&(K.errorEmitted=!0),G&&(G.errorEmitted=!0),k.emit("error",V))}function x(){const k=this._readableState,V=this._writableState;k&&(k.constructed=!0,k.closed=!1,k.closeEmitted=!1,k.destroyed=!1,k.errored=null,k.errorEmitted=!1,k.reading=!1,k.ended=k.readable===!1,k.endEmitted=k.readable===!1),V&&(V.constructed=!0,V.destroyed=!1,V.closed=!1,V.closeEmitted=!1,V.errored=null,V.errorEmitted=!1,V.finalCalled=!1,V.prefinished=!1,V.ended=V.writable===!1,V.ending=V.writable===!1,V.finished=V.writable===!1)}function I(k,V,G){const K=k._readableState,oe=k._writableState;if(oe!=null&&oe.destroyed||K!=null&&K.destroyed)return this;K!=null&&K.autoDestroy||oe!=null&&oe.autoDestroy?k.destroy(V):V&&(V.stack,oe&&!oe.errored&&(oe.errored=V),K&&!K.errored&&(K.errored=V),G?l.nextTick(O,k,V):O(k,V))}function j(k,V){if(typeof k._construct!="function")return;const G=k._readableState,K=k._writableState;G&&(G.constructed=!1),K&&(K.constructed=!1),k.once(o,V),!(k.listenerCount(o)>1)&&l.nextTick(R,k)}function R(k){let V=!1;function G(K){if(V){I(k,K??new y);return}V=!0;const oe=k._readableState,ie=k._writableState,Y=ie||oe;oe&&(oe.constructed=!0),ie&&(ie.constructed=!0),Y.destroyed?k.emit(n,K):K?I(k,K,!0):l.nextTick(T,k)}try{k._construct(K=>{l.nextTick(G,K)})}catch(K){l.nextTick(G,K)}}function T(k){k.emit(o)}function S(k){return(k==null?void 0:k.setHeader)&&typeof k.abort=="function"}function A(k){k.emit("close")}function b(k,V){k.emit("error",V),l.nextTick(A,k)}function z(k,V){!k||r(k)||(!V&&!e(k)&&(V=new f),t(k)?(k.socket=null,k.destroy(V)):S(k)?k.abort():S(k.req)?k.req.abort():typeof k.destroy=="function"?k.destroy(V):typeof k.close=="function"?k.close():V?l.nextTick(b,k,V):l.nextTick(A,k),k.destroyed||(k[i]=!0))}D.exports={construct:j,destroyer:z,destroy:w,undestroy:x,errorOrDestroy:I}},{"../../ours/errors":126,"../../ours/primordials":127,"./utils":122,"process/":102}],111:[function(g,D,C){const{ObjectDefineProperties:l,ObjectGetOwnPropertyDescriptor:p,ObjectKeys:y,ObjectSetPrototypeOf:f}=g("../../ours/primordials");D.exports=r;const s=g("./readable"),i=g("./writable");f(r.prototype,s.prototype),f(r,s);{const o=y(i.prototype);for(let h=0;h<o.length;h++){const w=o[h];r.prototype[w]||(r.prototype[w]=i.prototype[w])}}function r(o){if(!(this instanceof r))return new r(o);s.call(this,o),i.call(this,o),o?(this.allowHalfOpen=o.allowHalfOpen!==!1,o.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),o.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}l(r.prototype,{writable:{__proto__:null,...p(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...p(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...p(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...p(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...p(i.prototype,"writableLength")},writableFinished:{__proto__:null,...p(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...p(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...p(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...p(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(o){this._readableState&&this._writableState&&(this._readableState.destroyed=o,this._writableState.destroyed=o)}}});let e;function t(){return e===void 0&&(e={}),e}r.fromWeb=function(o,h){return t().newStreamDuplexFromReadableWritablePair(o,h)},r.toWeb=function(o){return t().newReadableWritablePairFromDuplex(o)};let n;r.from=function(o){return n||(n=g("./duplexify")),n(o,"body")}},{"../../ours/primordials":127,"./duplexify":112,"./readable":119,"./writable":123}],112:[function(g,D,C){const l=g("process/"),p=g("buffer"),{isReadable:y,isWritable:f,isIterable:s,isNodeStream:i,isReadableNodeStream:r,isWritableNodeStream:e,isDuplexNodeStream:t}=g("./utils"),n=g("./end-of-stream"),{AbortError:o,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:w}}=g("../../ours/errors"),{destroyer:E}=g("./destroy"),v=g("./duplex"),M=g("./readable"),{createDeferredPromise:O}=g("../../ours/util"),x=g("./from"),I=globalThis.Blob||p.Blob,j=typeof I<"u"?function(k){return k instanceof I}:function(k){return!1},R=globalThis.AbortController||g("abort-controller").AbortController,{FunctionPrototypeCall:T}=g("../../ours/primordials");class S extends v{constructor(k){super(k),(k==null?void 0:k.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(k==null?void 0:k.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}D.exports=function z(k,V){if(t(k))return k;if(r(k))return b({readable:k});if(e(k))return b({writable:k});if(i(k))return b({writable:!1,readable:!1});if(typeof k=="function"){const{value:K,write:oe,final:ie,destroy:Y}=A(k);if(s(K))return x(S,K,{objectMode:!0,write:oe,final:ie,destroy:Y});const le=K==null?void 0:K.then;if(typeof le=="function"){let se;const X=T(le,K,P=>{if(P!=null)throw new w("nully","body",P)},P=>{E(se,P)});return se=new S({objectMode:!0,readable:!1,write:oe,final(P){ie(async()=>{try{await X,l.nextTick(P,null)}catch($){l.nextTick(P,$)}})},destroy:Y})}throw new w("Iterable, AsyncIterable or AsyncFunction",V,K)}if(j(k))return z(k.arrayBuffer());if(s(k))return x(S,k,{objectMode:!0,writable:!1});if(typeof(k==null?void 0:k.writable)=="object"||typeof(k==null?void 0:k.readable)=="object"){const K=k!=null&&k.readable?r(k==null?void 0:k.readable)?k==null?void 0:k.readable:z(k.readable):void 0,oe=k!=null&&k.writable?e(k==null?void 0:k.writable)?k==null?void 0:k.writable:z(k.writable):void 0;return b({readable:K,writable:oe})}const G=k==null?void 0:k.then;if(typeof G=="function"){let K;return T(G,k,oe=>{oe!=null&&K.push(oe),K.push(null)},oe=>{E(K,oe)}),K=new S({objectMode:!0,writable:!1,read(){}})}throw new h(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],k)};function A(z){let{promise:k,resolve:V}=O();const G=new R,K=G.signal;return{value:z(async function*(){for(;;){const ie=k;k=null;const{chunk:Y,done:le,cb:se}=await ie;if(l.nextTick(se),le)return;if(K.aborted)throw new o(void 0,{cause:K.reason});({promise:k,resolve:V}=O()),yield Y}}(),{signal:K}),write(ie,Y,le){const se=V;V=null,se({chunk:ie,done:!1,cb:le})},final(ie){const Y=V;V=null,Y({done:!0,cb:ie})},destroy(ie,Y){G.abort(),Y(ie)}}}function b(z){const k=z.readable&&typeof z.readable.read!="function"?M.wrap(z.readable):z.readable,V=z.writable;let G=!!y(k),K=!!f(V),oe,ie,Y,le,se;function X(P){const $=le;le=null,$?$(P):P&&se.destroy(P)}return se=new S({readableObjectMode:!!(k!=null&&k.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:G,writable:K}),K&&(n(V,P=>{K=!1,P&&E(k,P),X(P)}),se._write=function(P,$,te){V.write(P,$)?te():oe=te},se._final=function(P){V.end(),ie=P},V.on("drain",function(){if(oe){const P=oe;oe=null,P()}}),V.on("finish",function(){if(ie){const P=ie;ie=null,P()}})),G&&(n(k,P=>{G=!1,P&&E(k,P),X(P)}),k.on("readable",function(){if(Y){const P=Y;Y=null,P()}}),k.on("end",function(){se.push(null)}),se._read=function(){for(;;){const P=k.read();if(P===null){Y=se._read;return}if(!se.push(P))return}}),se._destroy=function(P,$){!P&&le!==null&&(P=new o),Y=null,oe=null,ie=null,le===null?$(P):(le=$,E(V,P),E(k,P))},se}},{"../../ours/errors":126,"../../ours/primordials":127,"../../ours/util":128,"./destroy":110,"./duplex":111,"./end-of-stream":113,"./from":114,"./readable":119,"./utils":122,"abort-controller":24,buffer:29,"process/":102}],113:[function(g,D,C){const l=g("process/"),{AbortError:p,codes:y}=g("../../ours/errors"),{ERR_INVALID_ARG_TYPE:f,ERR_STREAM_PREMATURE_CLOSE:s}=y,{kEmptyObject:i,once:r}=g("../../ours/util"),{validateAbortSignal:e,validateFunction:t,validateObject:n,validateBoolean:o}=g("../validators"),{Promise:h,PromisePrototypeThen:w}=g("../../ours/primordials"),{isClosed:E,isReadable:v,isReadableNodeStream:M,isReadableStream:O,isReadableFinished:x,isReadableErrored:I,isWritable:j,isWritableNodeStream:R,isWritableStream:T,isWritableFinished:S,isWritableErrored:A,isNodeStream:b,willEmitClose:z,kIsClosedPromise:k}=g("./utils");function V(Y){return Y.setHeader&&typeof Y.abort=="function"}const G=()=>{};function K(Y,le,se){var X,P;if(arguments.length===2?(se=le,le=i):le==null?le=i:n(le,"options"),t(se,"callback"),e(le.signal,"options.signal"),se=r(se),O(Y)||T(Y))return oe(Y,le,se);if(!b(Y))throw new f("stream",["ReadableStream","WritableStream","Stream"],Y);const $=(X=le.readable)!==null&&X!==void 0?X:M(Y),te=(P=le.writable)!==null&&P!==void 0?P:R(Y),ae=Y._writableState,ee=Y._readableState,F=()=>{Y.writable||U()};let L=z(Y)&&M(Y)===$&&R(Y)===te,Z=S(Y,!1);const U=()=>{Z=!0,Y.destroyed&&(L=!1),!(L&&(!Y.readable||$))&&(!$||H)&&se.call(Y)};let H=x(Y,!1);const Q=()=>{H=!0,Y.destroyed&&(L=!1),!(L&&(!Y.writable||te))&&(!te||Z)&&se.call(Y)},q=u=>{se.call(Y,u)};let re=E(Y);const d=()=>{re=!0;const u=A(Y)||I(Y);if(u&&typeof u!="boolean")return se.call(Y,u);if($&&!H&&M(Y,!0)&&!x(Y,!1))return se.call(Y,new s);if(te&&!Z&&!S(Y,!1))return se.call(Y,new s);se.call(Y)},m=()=>{re=!0;const u=A(Y)||I(Y);if(u&&typeof u!="boolean")return se.call(Y,u);se.call(Y)},c=()=>{Y.req.on("finish",U)};V(Y)?(Y.on("complete",U),L||Y.on("abort",d),Y.req?c():Y.on("request",c)):te&&!ae&&(Y.on("end",F),Y.on("close",F)),!L&&typeof Y.aborted=="boolean"&&Y.on("aborted",d),Y.on("end",Q),Y.on("finish",U),le.error!==!1&&Y.on("error",q),Y.on("close",d),re?l.nextTick(d):ae!=null&&ae.errorEmitted||ee!=null&&ee.errorEmitted?L||l.nextTick(m):(!$&&(!L||v(Y))&&(Z||j(Y)===!1)||!te&&(!L||j(Y))&&(H||v(Y)===!1)||ee&&Y.req&&Y.aborted)&&l.nextTick(m);const a=()=>{se=G,Y.removeListener("aborted",d),Y.removeListener("complete",U),Y.removeListener("abort",d),Y.removeListener("request",c),Y.req&&Y.req.removeListener("finish",U),Y.removeListener("end",F),Y.removeListener("close",F),Y.removeListener("finish",U),Y.removeListener("end",Q),Y.removeListener("error",q),Y.removeListener("close",d)};if(le.signal&&!re){const u=()=>{const _=se;a(),_.call(Y,new p(void 0,{cause:le.signal.reason}))};if(le.signal.aborted)l.nextTick(u);else{const _=se;se=r((...B)=>{le.signal.removeEventListener("abort",u),_.apply(Y,B)}),le.signal.addEventListener("abort",u)}}return a}function oe(Y,le,se){let X=!1,P=G;if(le.signal)if(P=()=>{X=!0,se.call(Y,new p(void 0,{cause:le.signal.reason}))},le.signal.aborted)l.nextTick(P);else{const te=se;se=r((...ae)=>{le.signal.removeEventListener("abort",P),te.apply(Y,ae)}),le.signal.addEventListener("abort",P)}const $=(...te)=>{X||l.nextTick(()=>se.apply(Y,te))};return w(Y[k].promise,$,$),G}function ie(Y,le){var se;let X=!1;return le===null&&(le=i),(se=le)!==null&&se!==void 0&&se.cleanup&&(o(le.cleanup,"cleanup"),X=le.cleanup),new h((P,$)=>{const te=K(Y,le,ae=>{X&&te(),ae?$(ae):P()})})}D.exports=K,D.exports.finished=ie},{"../../ours/errors":126,"../../ours/primordials":127,"../../ours/util":128,"../validators":124,"./utils":122,"process/":102}],114:[function(g,D,C){const l=g("process/"),{PromisePrototypeThen:p,SymbolAsyncIterator:y,SymbolIterator:f}=g("../../ours/primordials"),{Buffer:s}=g("buffer"),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:r}=g("../../ours/errors").codes;function e(t,n,o){let h;if(typeof n=="string"||n instanceof s)return new t({objectMode:!0,...o,read(){this.push(n),this.push(null)}});let w;if(n&&n[y])w=!0,h=n[y]();else if(n&&n[f])w=!1,h=n[f]();else throw new i("iterable",["Iterable"],n);const E=new t({objectMode:!0,highWaterMark:1,...o});let v=!1;E._read=function(){v||(v=!0,O())},E._destroy=function(x,I){p(M(x),()=>l.nextTick(I,x),j=>l.nextTick(I,j||x))};async function M(x){const I=x!=null,j=typeof h.throw=="function";if(I&&j){const{value:R,done:T}=await h.throw(x);if(await R,T)return}if(typeof h.return=="function"){const{value:R}=await h.return();await R}}async function O(){for(;;){try{const{value:x,done:I}=w?await h.next():h.next();if(I)E.push(null);else{const j=x&&typeof x.then=="function"?await x:x;if(j===null)throw v=!1,new r;if(E.push(j))continue;v=!1}}catch(x){E.destroy(x)}break}}return E}D.exports=e},{"../../ours/errors":126,"../../ours/primordials":127,buffer:29,"process/":102}],115:[function(g,D,C){const{ArrayIsArray:l,ObjectSetPrototypeOf:p}=g("../../ours/primordials"),{EventEmitter:y}=g("events");function f(i){y.call(this,i)}p(f.prototype,y.prototype),p(f,y),f.prototype.pipe=function(i,r){const e=this;function t(M){i.writable&&i.write(M)===!1&&e.pause&&e.pause()}e.on("data",t);function n(){e.readable&&e.resume&&e.resume()}i.on("drain",n),!i._isStdio&&(!r||r.end!==!1)&&(e.on("end",h),e.on("close",w));let o=!1;function h(){o||(o=!0,i.end())}function w(){o||(o=!0,typeof i.destroy=="function"&&i.destroy())}function E(M){v(),y.listenerCount(this,"error")===0&&this.emit("error",M)}s(e,"error",E),s(i,"error",E);function v(){e.removeListener("data",t),i.removeListener("drain",n),e.removeListener("end",h),e.removeListener("close",w),e.removeListener("error",E),i.removeListener("error",E),e.removeListener("end",v),e.removeListener("close",v),i.removeListener("close",v)}return e.on("end",v),e.on("close",v),i.on("close",v),i.emit("pipe",e),i};function s(i,r,e){if(typeof i.prependListener=="function")return i.prependListener(r,e);!i._events||!i._events[r]?i.on(r,e):l(i._events[r])?i._events[r].unshift(e):i._events[r]=[e,i._events[r]]}D.exports={Stream:f,prependListener:s}},{"../../ours/primordials":127,events:49}],116:[function(g,D,C){const l=globalThis.AbortController||g("abort-controller").AbortController,{codes:{ERR_INVALID_ARG_VALUE:p,ERR_INVALID_ARG_TYPE:y,ERR_MISSING_ARGS:f,ERR_OUT_OF_RANGE:s},AbortError:i}=g("../../ours/errors"),{validateAbortSignal:r,validateInteger:e,validateObject:t}=g("../validators"),n=g("../../ours/primordials").Symbol("kWeak"),{finished:o}=g("./end-of-stream"),h=g("./compose"),{addAbortSignalNoValidate:w}=g("./add-abort-signal"),{isWritable:E,isNodeStream:v}=g("./utils"),{ArrayPrototypePush:M,MathFloor:O,Number:x,NumberIsNaN:I,Promise:j,PromiseReject:R,PromisePrototypeThen:T,Symbol:S}=g("../../ours/primordials"),A=S("kEmpty"),b=S("kEof");function z(ee,F){if(F!=null&&t(F,"options"),(F==null?void 0:F.signal)!=null&&r(F.signal,"options.signal"),v(ee)&&!E(ee))throw new p("stream",ee,"must be writable");const L=h(this,ee);return F!=null&&F.signal&&w(F.signal,L),L}function k(ee,F){if(typeof ee!="function")throw new y("fn",["Function","AsyncFunction"],ee);F!=null&&t(F,"options"),(F==null?void 0:F.signal)!=null&&r(F.signal,"options.signal");let L=1;return(F==null?void 0:F.concurrency)!=null&&(L=O(F.concurrency)),e(L,"concurrency",1),async function*(){var U,H;const Q=new l,q=this,re=[],d=Q.signal,m={signal:d},c=()=>Q.abort();F!=null&&(U=F.signal)!==null&&U!==void 0&&U.aborted&&c(),F==null||(H=F.signal)===null||H===void 0||H.addEventListener("abort",c);let a,u,_=!1;function B(){_=!0}async function J(){try{for await(let de of q){var ne;if(_)return;if(d.aborted)throw new i;try{de=ee(de,m)}catch(pe){de=R(pe)}de!==A&&(typeof((ne=de)===null||ne===void 0?void 0:ne.catch)=="function"&&de.catch(B),re.push(de),a&&(a(),a=null),!_&&re.length&&re.length>=L&&await new j(pe=>{u=pe}))}re.push(b)}catch(de){const pe=R(de);T(pe,void 0,B),re.push(pe)}finally{var ce;_=!0,a&&(a(),a=null),F==null||(ce=F.signal)===null||ce===void 0||ce.removeEventListener("abort",c)}}J();try{for(;;){for(;re.length>0;){const ne=await re[0];if(ne===b)return;if(d.aborted)throw new i;ne!==A&&(yield ne),re.shift(),u&&(u(),u=null)}await new j(ne=>{a=ne})}}finally{Q.abort(),_=!0,u&&(u(),u=null)}}.call(this)}function V(ee=void 0){return ee!=null&&t(ee,"options"),(ee==null?void 0:ee.signal)!=null&&r(ee.signal,"options.signal"),async function*(){let L=0;for await(const U of this){var Z;if(ee!=null&&(Z=ee.signal)!==null&&Z!==void 0&&Z.aborted)throw new i({cause:ee.signal.reason});yield[L++,U]}}.call(this)}async function G(ee,F=void 0){for await(const L of Y.call(this,ee,F))return!0;return!1}async function K(ee,F=void 0){if(typeof ee!="function")throw new y("fn",["Function","AsyncFunction"],ee);return!await G.call(this,async(...L)=>!await ee(...L),F)}async function oe(ee,F){for await(const L of Y.call(this,ee,F))return L}async function ie(ee,F){if(typeof ee!="function")throw new y("fn",["Function","AsyncFunction"],ee);async function L(Z,U){return await ee(Z,U),A}for await(const Z of k.call(this,L,F));}function Y(ee,F){if(typeof ee!="function")throw new y("fn",["Function","AsyncFunction"],ee);async function L(Z,U){return await ee(Z,U)?Z:A}return k.call(this,L,F)}class le extends f{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function se(ee,F,L){var Z;if(typeof ee!="function")throw new y("reducer",["Function","AsyncFunction"],ee);L!=null&&t(L,"options"),(L==null?void 0:L.signal)!=null&&r(L.signal,"options.signal");let U=arguments.length>1;if(L!=null&&(Z=L.signal)!==null&&Z!==void 0&&Z.aborted){const d=new i(void 0,{cause:L.signal.reason});throw this.once("error",()=>{}),await o(this.destroy(d)),d}const H=new l,Q=H.signal;if(L!=null&&L.signal){const d={once:!0,[n]:this};L.signal.addEventListener("abort",()=>H.abort(),d)}let q=!1;try{for await(const d of this){var re;if(q=!0,L!=null&&(re=L.signal)!==null&&re!==void 0&&re.aborted)throw new i;U?F=await ee(F,d,{signal:Q}):(F=d,U=!0)}if(!q&&!U)throw new le}finally{H.abort()}return F}async function X(ee){ee!=null&&t(ee,"options"),(ee==null?void 0:ee.signal)!=null&&r(ee.signal,"options.signal");const F=[];for await(const Z of this){var L;if(ee!=null&&(L=ee.signal)!==null&&L!==void 0&&L.aborted)throw new i(void 0,{cause:ee.signal.reason});M(F,Z)}return F}function P(ee,F){const L=k.call(this,ee,F);return async function*(){for await(const U of L)yield*U}.call(this)}function $(ee){if(ee=x(ee),I(ee))return 0;if(ee<0)throw new s("number",">= 0",ee);return ee}function te(ee,F=void 0){return F!=null&&t(F,"options"),(F==null?void 0:F.signal)!=null&&r(F.signal,"options.signal"),ee=$(ee),async function*(){var Z;if(F!=null&&(Z=F.signal)!==null&&Z!==void 0&&Z.aborted)throw new i;for await(const H of this){var U;if(F!=null&&(U=F.signal)!==null&&U!==void 0&&U.aborted)throw new i;ee--<=0&&(yield H)}}.call(this)}function ae(ee,F=void 0){return F!=null&&t(F,"options"),(F==null?void 0:F.signal)!=null&&r(F.signal,"options.signal"),ee=$(ee),async function*(){var Z;if(F!=null&&(Z=F.signal)!==null&&Z!==void 0&&Z.aborted)throw new i;for await(const H of this){var U;if(F!=null&&(U=F.signal)!==null&&U!==void 0&&U.aborted)throw new i;if(ee-- >0)yield H;else return}}.call(this)}D.exports.streamReturningOperators={asIndexedPairs:V,drop:te,filter:Y,flatMap:P,map:k,take:ae,compose:z},D.exports.promiseReturningOperators={every:K,forEach:ie,reduce:se,toArray:X,some:G,find:oe}},{"../../ours/errors":126,"../../ours/primordials":127,"../validators":124,"./add-abort-signal":107,"./compose":109,"./end-of-stream":113,"./utils":122,"abort-controller":24}],117:[function(g,D,C){const{ObjectSetPrototypeOf:l}=g("../../ours/primordials");D.exports=y;const p=g("./transform");l(y.prototype,p.prototype),l(y,p);function y(f){if(!(this instanceof y))return new y(f);p.call(this,f)}y.prototype._transform=function(f,s,i){i(null,f)}},{"../../ours/primordials":127,"./transform":121}],118:[function(g,D,C){const l=g("process/"),{ArrayIsArray:p,Promise:y,SymbolAsyncIterator:f}=g("../../ours/primordials"),s=g("./end-of-stream"),{once:i}=g("../../ours/util"),r=g("./destroy"),e=g("./duplex"),{aggregateTwoErrors:t,codes:{ERR_INVALID_ARG_TYPE:n,ERR_INVALID_RETURN_VALUE:o,ERR_MISSING_ARGS:h,ERR_STREAM_DESTROYED:w,ERR_STREAM_PREMATURE_CLOSE:E},AbortError:v}=g("../../ours/errors"),{validateFunction:M,validateAbortSignal:O}=g("../validators"),{isIterable:x,isReadable:I,isReadableNodeStream:j,isNodeStream:R,isTransformStream:T,isWebStream:S,isReadableStream:A,isReadableEnded:b}=g("./utils"),z=globalThis.AbortController||g("abort-controller").AbortController;let k,V;function G($,te,ae){let ee=!1;$.on("close",()=>{ee=!0});const F=s($,{readable:te,writable:ae},L=>{ee=!L});return{destroy:L=>{ee||(ee=!0,r.destroyer($,L||new w("pipe")))},cleanup:F}}function K($){return M($[$.length-1],"streams[stream.length - 1]"),$.pop()}function oe($){if(x($))return $;if(j($))return ie($);throw new n("val",["Readable","Iterable","AsyncIterable"],$)}async function*ie($){V||(V=g("./readable")),yield*V.prototype[f].call($)}async function Y($,te,ae,{end:ee}){let F,L=null;const Z=Q=>{if(Q&&(F=Q),L){const q=L;L=null,q()}},U=()=>new y((Q,q)=>{F?q(F):L=()=>{F?q(F):Q()}});te.on("drain",Z);const H=s(te,{readable:!1},Z);try{te.writableNeedDrain&&await U();for await(const Q of $)te.write(Q)||await U();ee&&te.end(),await U(),ae()}catch(Q){ae(F!==Q?t(F,Q):Q)}finally{H(),te.off("drain",Z)}}async function le($,te,ae,{end:ee}){T(te)&&(te=te.writable);const F=te.getWriter();try{for await(const L of $)await F.ready,F.write(L).catch(()=>{});await F.ready,ee&&await F.close(),ae()}catch(L){try{await F.abort(L),ae(L)}catch(Z){ae(Z)}}}function se(...$){return X($,i(K($)))}function X($,te,ae){if($.length===1&&p($[0])&&($=$[0]),$.length<2)throw new h("streams");const ee=new z,F=ee.signal,L=ae==null?void 0:ae.signal,Z=[];O(L,"options.signal");function U(){m(new v)}L==null||L.addEventListener("abort",U);let H,Q;const q=[];let re=0;function d(_){m(_,--re===0)}function m(_,B){if(_&&(!H||H.code==="ERR_STREAM_PREMATURE_CLOSE")&&(H=_),!(!H&&!B)){for(;q.length;)q.shift()(H);L==null||L.removeEventListener("abort",U),ee.abort(),B&&(H||Z.forEach(J=>J()),l.nextTick(te,H,Q))}}let c;for(let _=0;_<$.length;_++){const B=$[_],J=_<$.length-1,ne=_>0,ce=J||(ae==null?void 0:ae.end)!==!1,de=_===$.length-1;if(R(B)){let pe=function(N){N&&N.name!=="AbortError"&&N.code!=="ERR_STREAM_PREMATURE_CLOSE"&&d(N)};if(ce){const{destroy:N,cleanup:W}=G(B,J,ne);q.push(N),I(B)&&de&&Z.push(W)}B.on("error",pe),I(B)&&de&&Z.push(()=>{B.removeListener("error",pe)})}if(_===0)if(typeof B=="function"){if(c=B({signal:F}),!x(c))throw new o("Iterable, AsyncIterable or Stream","source",c)}else x(B)||j(B)||T(B)?c=B:c=e.from(B);else if(typeof B=="function"){if(T(c)){var a;c=oe((a=c)===null||a===void 0?void 0:a.readable)}else c=oe(c);if(c=B(c,{signal:F}),J){if(!x(c,!0))throw new o("AsyncIterable",`transform[${_-1}]`,c)}else{var u;k||(k=g("./passthrough"));const pe=new k({objectMode:!0}),N=(u=c)===null||u===void 0?void 0:u.then;if(typeof N=="function")re++,N.call(c,ue=>{Q=ue,ue!=null&&pe.write(ue),ce&&pe.end(),l.nextTick(d)},ue=>{pe.destroy(ue),l.nextTick(d,ue)});else if(x(c,!0))re++,Y(c,pe,d,{end:ce});else if(A(c)||T(c)){const ue=c.readable||c;re++,Y(ue,pe,d,{end:ce})}else throw new o("AsyncIterable or Promise","destination",c);c=pe;const{destroy:W,cleanup:fe}=G(c,!1,!0);q.push(W),de&&Z.push(fe)}}else if(R(B)){if(j(c)){re+=2;const pe=P(c,B,d,{end:ce});I(B)&&de&&Z.push(pe)}else if(T(c)||A(c)){const pe=c.readable||c;re++,Y(pe,B,d,{end:ce})}else if(x(c))re++,Y(c,B,d,{end:ce});else throw new n("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],c);c=B}else if(S(B)){if(j(c))re++,le(oe(c),B,d,{end:ce});else if(A(c)||x(c))re++,le(c,B,d,{end:ce});else if(T(c))re++,le(c.readable,B,d,{end:ce});else throw new n("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],c);c=B}else c=e.from(B)}return(F!=null&&F.aborted||L!=null&&L.aborted)&&l.nextTick(U),c}function P($,te,ae,{end:ee}){let F=!1;if(te.on("close",()=>{F||ae(new E)}),$.pipe(te,{end:!1}),ee){let L=function(){F=!0,te.end()};b($)?l.nextTick(L):$.once("end",L)}else ae();return s($,{readable:!0,writable:!1},L=>{const Z=$._readableState;L&&L.code==="ERR_STREAM_PREMATURE_CLOSE"&&Z&&Z.ended&&!Z.errored&&!Z.errorEmitted?$.once("end",ae).once("error",ae):ae(L)}),s(te,{readable:!1,writable:!0},ae)}D.exports={pipelineImpl:X,pipeline:se}},{"../../ours/errors":126,"../../ours/primordials":127,"../../ours/util":128,"../validators":124,"./destroy":110,"./duplex":111,"./end-of-stream":113,"./passthrough":117,"./readable":119,"./utils":122,"abort-controller":24,"process/":102}],119:[function(g,D,C){const l=g("process/"),{ArrayPrototypeIndexOf:p,NumberIsInteger:y,NumberIsNaN:f,NumberParseInt:s,ObjectDefineProperties:i,ObjectKeys:r,ObjectSetPrototypeOf:e,Promise:t,SafeSet:n,SymbolAsyncIterator:o,Symbol:h}=g("../../ours/primordials");D.exports=P,P.ReadableState=X;const{EventEmitter:w}=g("events"),{Stream:E,prependListener:v}=g("./legacy"),{Buffer:M}=g("buffer"),{addAbortSignal:O}=g("./add-abort-signal"),x=g("./end-of-stream");let I=g("../../ours/util").debuglog("stream",N=>{I=N});const j=g("./buffer_list"),R=g("./destroy"),{getHighWaterMark:T,getDefaultHighWaterMark:S}=g("./state"),{aggregateTwoErrors:A,codes:{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:z,ERR_OUT_OF_RANGE:k,ERR_STREAM_PUSH_AFTER_EOF:V,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:G}}=g("../../ours/errors"),{validateObject:K}=g("../validators"),oe=h("kPaused"),{StringDecoder:ie}=g("string_decoder"),Y=g("./from");e(P.prototype,E.prototype),e(P,E);const le=()=>{},{errorOrDestroy:se}=R;function X(N,W,fe){typeof fe!="boolean"&&(fe=W instanceof g("./duplex")),this.objectMode=!!(N&&N.objectMode),fe&&(this.objectMode=this.objectMode||!!(N&&N.readableObjectMode)),this.highWaterMark=N?T(this,N,"readableHighWaterMark",fe):S(!1),this.buffer=new j,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[oe]=null,this.errorEmitted=!1,this.emitClose=!N||N.emitClose!==!1,this.autoDestroy=!N||N.autoDestroy!==!1,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=N&&N.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,N&&N.encoding&&(this.decoder=new ie(N.encoding),this.encoding=N.encoding)}function P(N){if(!(this instanceof P))return new P(N);const W=this instanceof g("./duplex");this._readableState=new X(N,this,W),N&&(typeof N.read=="function"&&(this._read=N.read),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.construct=="function"&&(this._construct=N.construct),N.signal&&!W&&O(N.signal,this)),E.call(this,N),R.construct(this,()=>{this._readableState.needReadable&&H(this,this._readableState)})}P.prototype.destroy=R.destroy,P.prototype._undestroy=R.undestroy,P.prototype._destroy=function(N,W){W(N)},P.prototype[w.captureRejectionSymbol]=function(N){this.destroy(N)},P.prototype.push=function(N,W){return $(this,N,W,!1)},P.prototype.unshift=function(N,W){return $(this,N,W,!0)};function $(N,W,fe,ue){I("readableAddChunk",W);const he=N._readableState;let ge;if(he.objectMode||(typeof W=="string"?(fe=fe||he.defaultEncoding,he.encoding!==fe&&(ue&&he.encoding?W=M.from(W,fe).toString(he.encoding):(W=M.from(W,fe),fe=""))):W instanceof M?fe="":E._isUint8Array(W)?(W=E._uint8ArrayToBuffer(W),fe=""):W!=null&&(ge=new b("chunk",["string","Buffer","Uint8Array"],W))),ge)se(N,ge);else if(W===null)he.reading=!1,L(N,he);else if(he.objectMode||W&&W.length>0)if(ue)if(he.endEmitted)se(N,new G);else{if(he.destroyed||he.errored)return!1;te(N,he,W,!0)}else if(he.ended)se(N,new V);else{if(he.destroyed||he.errored)return!1;he.reading=!1,he.decoder&&!fe?(W=he.decoder.write(W),he.objectMode||W.length!==0?te(N,he,W,!1):H(N,he)):te(N,he,W,!1)}else ue||(he.reading=!1,H(N,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function te(N,W,fe,ue){W.flowing&&W.length===0&&!W.sync&&N.listenerCount("data")>0?(W.multiAwaitDrain?W.awaitDrainWriters.clear():W.awaitDrainWriters=null,W.dataEmitted=!0,N.emit("data",fe)):(W.length+=W.objectMode?1:fe.length,ue?W.buffer.unshift(fe):W.buffer.push(fe),W.needReadable&&Z(N)),H(N,W)}P.prototype.isPaused=function(){const N=this._readableState;return N[oe]===!0||N.flowing===!1},P.prototype.setEncoding=function(N){const W=new ie(N);this._readableState.decoder=W,this._readableState.encoding=this._readableState.decoder.encoding;const fe=this._readableState.buffer;let ue="";for(const he of fe)ue+=W.write(he);return fe.clear(),ue!==""&&fe.push(ue),this._readableState.length=ue.length,this};const ae=1073741824;function ee(N){if(N>ae)throw new k("size","<= 1GiB",N);return N--,N|=N>>>1,N|=N>>>2,N|=N>>>4,N|=N>>>8,N|=N>>>16,N++,N}function F(N,W){return N<=0||W.length===0&&W.ended?0:W.objectMode?1:f(N)?W.flowing&&W.length?W.buffer.first().length:W.length:N<=W.length?N:W.ended?W.length:0}P.prototype.read=function(N){I("read",N),N===void 0?N=NaN:y(N)||(N=s(N,10));const W=this._readableState,fe=N;if(N>W.highWaterMark&&(W.highWaterMark=ee(N)),N!==0&&(W.emittedReadable=!1),N===0&&W.needReadable&&((W.highWaterMark!==0?W.length>=W.highWaterMark:W.length>0)||W.ended))return I("read: emitReadable",W.length,W.ended),W.length===0&&W.ended?J(this):Z(this),null;if(N=F(N,W),N===0&&W.ended)return W.length===0&&J(this),null;let ue=W.needReadable;if(I("need readable",ue),(W.length===0||W.length-N<W.highWaterMark)&&(ue=!0,I("length less than watermark",ue)),W.ended||W.reading||W.destroyed||W.errored||!W.constructed)ue=!1,I("reading, ended or constructing",ue);else if(ue){I("do read"),W.reading=!0,W.sync=!0,W.length===0&&(W.needReadable=!0);try{this._read(W.highWaterMark)}catch(ge){se(this,ge)}W.sync=!1,W.reading||(N=F(fe,W))}let he;return N>0?he=B(N,W):he=null,he===null?(W.needReadable=W.length<=W.highWaterMark,N=0):(W.length-=N,W.multiAwaitDrain?W.awaitDrainWriters.clear():W.awaitDrainWriters=null),W.length===0&&(W.ended||(W.needReadable=!0),fe!==N&&W.ended&&J(this)),he!==null&&!W.errorEmitted&&!W.closeEmitted&&(W.dataEmitted=!0,this.emit("data",he)),he};function L(N,W){if(I("onEofChunk"),!W.ended){if(W.decoder){const fe=W.decoder.end();fe&&fe.length&&(W.buffer.push(fe),W.length+=W.objectMode?1:fe.length)}W.ended=!0,W.sync?Z(N):(W.needReadable=!1,W.emittedReadable=!0,U(N))}}function Z(N){const W=N._readableState;I("emitReadable",W.needReadable,W.emittedReadable),W.needReadable=!1,W.emittedReadable||(I("emitReadable",W.flowing),W.emittedReadable=!0,l.nextTick(U,N))}function U(N){const W=N._readableState;I("emitReadable_",W.destroyed,W.length,W.ended),!W.destroyed&&!W.errored&&(W.length||W.ended)&&(N.emit("readable"),W.emittedReadable=!1),W.needReadable=!W.flowing&&!W.ended&&W.length<=W.highWaterMark,a(N)}function H(N,W){!W.readingMore&&W.constructed&&(W.readingMore=!0,l.nextTick(Q,N,W))}function Q(N,W){for(;!W.reading&&!W.ended&&(W.length<W.highWaterMark||W.flowing&&W.length===0);){const fe=W.length;if(I("maybeReadMore read 0"),N.read(0),fe===W.length)break}W.readingMore=!1}P.prototype._read=function(N){throw new z("_read()")},P.prototype.pipe=function(N,W){const fe=this,ue=this._readableState;ue.pipes.length===1&&(ue.multiAwaitDrain||(ue.multiAwaitDrain=!0,ue.awaitDrainWriters=new n(ue.awaitDrainWriters?[ue.awaitDrainWriters]:[]))),ue.pipes.push(N),I("pipe count=%d opts=%j",ue.pipes.length,W);const ge=(!W||W.end!==!1)&&N!==l.stdout&&N!==l.stderr?Ue:Pe;ue.endEmitted?l.nextTick(ge):fe.once("end",ge),N.on("unpipe",we);function we(Se,Ee){I("onunpipe"),Se===fe&&Ee&&Ee.hasUnpiped===!1&&(Ee.hasUnpiped=!0,Je())}function Ue(){I("onend"),N.end()}let ve,je=!1;function Je(){I("cleanup"),N.removeListener("close",Fe),N.removeListener("finish",De),ve&&N.removeListener("drain",ve),N.removeListener("error",Ne),N.removeListener("unpipe",we),fe.removeListener("end",Ue),fe.removeListener("end",Pe),fe.removeListener("data",He),je=!0,ve&&ue.awaitDrainWriters&&(!N._writableState||N._writableState.needDrain)&&ve()}function We(){je||(ue.pipes.length===1&&ue.pipes[0]===N?(I("false write response, pause",0),ue.awaitDrainWriters=N,ue.multiAwaitDrain=!1):ue.pipes.length>1&&ue.pipes.includes(N)&&(I("false write response, pause",ue.awaitDrainWriters.size),ue.awaitDrainWriters.add(N)),fe.pause()),ve||(ve=q(fe,N),N.on("drain",ve))}fe.on("data",He);function He(Se){I("ondata");const Ee=N.write(Se);I("dest.write",Ee),Ee===!1&&We()}function Ne(Se){if(I("onerror",Se),Pe(),N.removeListener("error",Ne),N.listenerCount("error")===0){const Ee=N._writableState||N._readableState;Ee&&!Ee.errorEmitted?se(N,Se):N.emit("error",Se)}}v(N,"error",Ne);function Fe(){N.removeListener("finish",De),Pe()}N.once("close",Fe);function De(){I("onfinish"),N.removeListener("close",Fe),Pe()}N.once("finish",De);function Pe(){I("unpipe"),fe.unpipe(N)}return N.emit("pipe",fe),N.writableNeedDrain===!0?ue.flowing&&We():ue.flowing||(I("pipe resume"),fe.resume()),N};function q(N,W){return function(){const ue=N._readableState;ue.awaitDrainWriters===W?(I("pipeOnDrain",1),ue.awaitDrainWriters=null):ue.multiAwaitDrain&&(I("pipeOnDrain",ue.awaitDrainWriters.size),ue.awaitDrainWriters.delete(W)),(!ue.awaitDrainWriters||ue.awaitDrainWriters.size===0)&&N.listenerCount("data")&&N.resume()}}P.prototype.unpipe=function(N){const W=this._readableState,fe={hasUnpiped:!1};if(W.pipes.length===0)return this;if(!N){const he=W.pipes;W.pipes=[],this.pause();for(let ge=0;ge<he.length;ge++)he[ge].emit("unpipe",this,{hasUnpiped:!1});return this}const ue=p(W.pipes,N);return ue===-1?this:(W.pipes.splice(ue,1),W.pipes.length===0&&this.pause(),N.emit("unpipe",this,fe),this)},P.prototype.on=function(N,W){const fe=E.prototype.on.call(this,N,W),ue=this._readableState;return N==="data"?(ue.readableListening=this.listenerCount("readable")>0,ue.flowing!==!1&&this.resume()):N==="readable"&&!ue.endEmitted&&!ue.readableListening&&(ue.readableListening=ue.needReadable=!0,ue.flowing=!1,ue.emittedReadable=!1,I("on readable",ue.length,ue.reading),ue.length?Z(this):ue.reading||l.nextTick(d,this)),fe},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(N,W){const fe=E.prototype.removeListener.call(this,N,W);return N==="readable"&&l.nextTick(re,this),fe},P.prototype.off=P.prototype.removeListener,P.prototype.removeAllListeners=function(N){const W=E.prototype.removeAllListeners.apply(this,arguments);return(N==="readable"||N===void 0)&&l.nextTick(re,this),W};function re(N){const W=N._readableState;W.readableListening=N.listenerCount("readable")>0,W.resumeScheduled&&W[oe]===!1?W.flowing=!0:N.listenerCount("data")>0?N.resume():W.readableListening||(W.flowing=null)}function d(N){I("readable nexttick read 0"),N.read(0)}P.prototype.resume=function(){const N=this._readableState;return N.flowing||(I("resume"),N.flowing=!N.readableListening,m(this,N)),N[oe]=!1,this};function m(N,W){W.resumeScheduled||(W.resumeScheduled=!0,l.nextTick(c,N,W))}function c(N,W){I("resume",W.reading),W.reading||N.read(0),W.resumeScheduled=!1,N.emit("resume"),a(N),W.flowing&&!W.reading&&N.read(0)}P.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[oe]=!0,this};function a(N){const W=N._readableState;for(I("flow",W.flowing);W.flowing&&N.read()!==null;);}P.prototype.wrap=function(N){let W=!1;N.on("data",ue=>{!this.push(ue)&&N.pause&&(W=!0,N.pause())}),N.on("end",()=>{this.push(null)}),N.on("error",ue=>{se(this,ue)}),N.on("close",()=>{this.destroy()}),N.on("destroy",()=>{this.destroy()}),this._read=()=>{W&&N.resume&&(W=!1,N.resume())};const fe=r(N);for(let ue=1;ue<fe.length;ue++){const he=fe[ue];this[he]===void 0&&typeof N[he]=="function"&&(this[he]=N[he].bind(N))}return this},P.prototype[o]=function(){return u(this)},P.prototype.iterator=function(N){return N!==void 0&&K(N,"options"),u(this,N)};function u(N,W){typeof N.read!="function"&&(N=P.wrap(N,{objectMode:!0}));const fe=_(N,W);return fe.stream=N,fe}async function*_(N,W){let fe=le;function ue(we){this===N?(fe(),fe=le):fe=we}N.on("readable",ue);let he;const ge=x(N,{writable:!1},we=>{he=we?A(he,we):null,fe(),fe=le});try{for(;;){const we=N.destroyed?null:N.read();if(we!==null)yield we;else{if(he)throw he;if(he===null)return;await new t(ue)}}}catch(we){throw he=A(he,we),he}finally{(he||(W==null?void 0:W.destroyOnReturn)!==!1)&&(he===void 0||N._readableState.autoDestroy)?R.destroyer(N,null):(N.off("readable",ue),ge())}}i(P.prototype,{readable:{__proto__:null,get(){const N=this._readableState;return!!N&&N.readable!==!1&&!N.destroyed&&!N.errorEmitted&&!N.endEmitted},set(N){this._readableState&&(this._readableState.readable=!!N)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(N){this._readableState&&(this._readableState.flowing=N)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(N){this._readableState&&(this._readableState.destroyed=N)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(X.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[oe]!==!1},set(N){this[oe]=!!N}}}),P._fromList=B;function B(N,W){if(W.length===0)return null;let fe;return W.objectMode?fe=W.buffer.shift():!N||N>=W.length?(W.decoder?fe=W.buffer.join(""):W.buffer.length===1?fe=W.buffer.first():fe=W.buffer.concat(W.length),W.buffer.clear()):fe=W.buffer.consume(N,W.decoder),fe}function J(N){const W=N._readableState;I("endReadable",W.endEmitted),W.endEmitted||(W.ended=!0,l.nextTick(ne,W,N))}function ne(N,W){if(I("endReadableNT",N.endEmitted,N.length),!N.errored&&!N.closeEmitted&&!N.endEmitted&&N.length===0){if(N.endEmitted=!0,W.emit("end"),W.writable&&W.allowHalfOpen===!1)l.nextTick(ce,W);else if(N.autoDestroy){const fe=W._writableState;(!fe||fe.autoDestroy&&(fe.finished||fe.writable===!1))&&W.destroy()}}}function ce(N){N.writable&&!N.writableEnded&&!N.destroyed&&N.end()}P.from=function(N,W){return Y(P,N,W)};let de;function pe(){return de===void 0&&(de={}),de}P.fromWeb=function(N,W){return pe().newStreamReadableFromReadableStream(N,W)},P.toWeb=function(N,W){return pe().newReadableStreamFromStreamReadable(N,W)},P.wrap=function(N,W){var fe,ue;return new P({objectMode:(fe=(ue=N.readableObjectMode)!==null&&ue!==void 0?ue:N.objectMode)!==null&&fe!==void 0?fe:!0,...W,destroy(he,ge){R.destroyer(N,he),ge(he)}}).wrap(N)}},{"../../ours/errors":126,"../../ours/primordials":127,"../../ours/util":128,"../validators":124,"./add-abort-signal":107,"./buffer_list":108,"./destroy":110,"./duplex":111,"./end-of-stream":113,"./from":114,"./legacy":115,"./state":120,buffer:29,events:49,"process/":102,string_decoder:28}],120:[function(g,D,C){const{MathFloor:l,NumberIsInteger:p}=g("../../ours/primordials"),{ERR_INVALID_ARG_VALUE:y}=g("../../ours/errors").codes;function f(r,e,t){return r.highWaterMark!=null?r.highWaterMark:e?r[t]:null}function s(r){return r?16:16*1024}function i(r,e,t,n){const o=f(e,n,t);if(o!=null){if(!p(o)||o<0){const h=n?`options.${t}`:"options.highWaterMark";throw new y(h,o)}return l(o)}return s(r.objectMode)}D.exports={getHighWaterMark:i,getDefaultHighWaterMark:s}},{"../../ours/errors":126,"../../ours/primordials":127}],121:[function(g,D,C){const{ObjectSetPrototypeOf:l,Symbol:p}=g("../../ours/primordials");D.exports=r;const{ERR_METHOD_NOT_IMPLEMENTED:y}=g("../../ours/errors").codes,f=g("./duplex"),{getHighWaterMark:s}=g("./state");l(r.prototype,f.prototype),l(r,f);const i=p("kCallback");function r(n){if(!(this instanceof r))return new r(n);const o=n?s(this,n,"readableHighWaterMark",!0):null;o===0&&(n={...n,highWaterMark:null,readableHighWaterMark:o,writableHighWaterMark:n.writableHighWaterMark||0}),f.call(this,n),this._readableState.sync=!1,this[i]=null,n&&(typeof n.transform=="function"&&(this._transform=n.transform),typeof n.flush=="function"&&(this._flush=n.flush)),this.on("prefinish",t)}function e(n){typeof this._flush=="function"&&!this.destroyed?this._flush((o,h)=>{if(o){n?n(o):this.destroy(o);return}h!=null&&this.push(h),this.push(null),n&&n()}):(this.push(null),n&&n())}function t(){this._final!==e&&e.call(this)}r.prototype._final=e,r.prototype._transform=function(n,o,h){throw new y("_transform()")},r.prototype._write=function(n,o,h){const w=this._readableState,E=this._writableState,v=w.length;this._transform(n,o,(M,O)=>{if(M){h(M);return}O!=null&&this.push(O),E.ended||v===w.length||w.length<w.highWaterMark?h():this[i]=h})},r.prototype._read=function(){if(this[i]){const n=this[i];this[i]=null,n()}}},{"../../ours/errors":126,"../../ours/primordials":127,"./duplex":111,"./state":120}],122:[function(g,D,C){const{Symbol:l,SymbolAsyncIterator:p,SymbolIterator:y,SymbolFor:f}=g("../../ours/primordials"),s=l("kDestroyed"),i=l("kIsErrored"),r=l("kIsReadable"),e=l("kIsDisturbed"),t=f("nodejs.webstream.isClosedPromise"),n=f("nodejs.webstream.controllerErrorFunction");function o(P,$=!1){var te;return!!(P&&typeof P.pipe=="function"&&typeof P.on=="function"&&(!$||typeof P.pause=="function"&&typeof P.resume=="function")&&(!P._writableState||((te=P._readableState)===null||te===void 0?void 0:te.readable)!==!1)&&(!P._writableState||P._readableState))}function h(P){var $;return!!(P&&typeof P.write=="function"&&typeof P.on=="function"&&(!P._readableState||(($=P._writableState)===null||$===void 0?void 0:$.writable)!==!1))}function w(P){return!!(P&&typeof P.pipe=="function"&&P._readableState&&typeof P.on=="function"&&typeof P.write=="function")}function E(P){return P&&(P._readableState||P._writableState||typeof P.write=="function"&&typeof P.on=="function"||typeof P.pipe=="function"&&typeof P.on=="function")}function v(P){return!!(P&&!E(P)&&typeof P.pipeThrough=="function"&&typeof P.getReader=="function"&&typeof P.cancel=="function")}function M(P){return!!(P&&!E(P)&&typeof P.getWriter=="function"&&typeof P.abort=="function")}function O(P){return!!(P&&!E(P)&&typeof P.readable=="object"&&typeof P.writable=="object")}function x(P){return v(P)||M(P)||O(P)}function I(P,$){return P==null?!1:$===!0?typeof P[p]=="function":$===!1?typeof P[y]=="function":typeof P[p]=="function"||typeof P[y]=="function"}function j(P){if(!E(P))return null;const $=P._writableState,te=P._readableState,ae=$||te;return!!(P.destroyed||P[s]||ae!=null&&ae.destroyed)}function R(P){if(!h(P))return null;if(P.writableEnded===!0)return!0;const $=P._writableState;return $!=null&&$.errored?!1:typeof($==null?void 0:$.ended)!="boolean"?null:$.ended}function T(P,$){if(!h(P))return null;if(P.writableFinished===!0)return!0;const te=P._writableState;return te!=null&&te.errored?!1:typeof(te==null?void 0:te.finished)!="boolean"?null:!!(te.finished||$===!1&&te.ended===!0&&te.length===0)}function S(P){if(!o(P))return null;if(P.readableEnded===!0)return!0;const $=P._readableState;return!$||$.errored?!1:typeof($==null?void 0:$.ended)!="boolean"?null:$.ended}function A(P,$){if(!o(P))return null;const te=P._readableState;return te!=null&&te.errored?!1:typeof(te==null?void 0:te.endEmitted)!="boolean"?null:!!(te.endEmitted||$===!1&&te.ended===!0&&te.length===0)}function b(P){return P&&P[r]!=null?P[r]:typeof(P==null?void 0:P.readable)!="boolean"?null:j(P)?!1:o(P)&&P.readable&&!A(P)}function z(P){return typeof(P==null?void 0:P.writable)!="boolean"?null:j(P)?!1:h(P)&&P.writable&&!R(P)}function k(P,$){return E(P)?j(P)?!0:!(($==null?void 0:$.readable)!==!1&&b(P)||($==null?void 0:$.writable)!==!1&&z(P)):null}function V(P){var $,te;return E(P)?P.writableErrored?P.writableErrored:($=(te=P._writableState)===null||te===void 0?void 0:te.errored)!==null&&$!==void 0?$:null:null}function G(P){var $,te;return E(P)?P.readableErrored?P.readableErrored:($=(te=P._readableState)===null||te===void 0?void 0:te.errored)!==null&&$!==void 0?$:null:null}function K(P){if(!E(P))return null;if(typeof P.closed=="boolean")return P.closed;const $=P._writableState,te=P._readableState;return typeof($==null?void 0:$.closed)=="boolean"||typeof(te==null?void 0:te.closed)=="boolean"?($==null?void 0:$.closed)||(te==null?void 0:te.closed):typeof P._closed=="boolean"&&oe(P)?P._closed:null}function oe(P){return typeof P._closed=="boolean"&&typeof P._defaultKeepAlive=="boolean"&&typeof P._removedConnection=="boolean"&&typeof P._removedContLen=="boolean"}function ie(P){return typeof P._sent100=="boolean"&&oe(P)}function Y(P){var $;return typeof P._consuming=="boolean"&&typeof P._dumped=="boolean"&&(($=P.req)===null||$===void 0?void 0:$.upgradeOrConnect)===void 0}function le(P){if(!E(P))return null;const $=P._writableState,te=P._readableState,ae=$||te;return!ae&&ie(P)||!!(ae&&ae.autoDestroy&&ae.emitClose&&ae.closed===!1)}function se(P){var $;return!!(P&&(($=P[e])!==null&&$!==void 0?$:P.readableDidRead||P.readableAborted))}function X(P){var $,te,ae,ee,F,L,Z,U,H,Q;return!!(P&&(($=(te=(ae=(ee=(F=(L=P[i])!==null&&L!==void 0?L:P.readableErrored)!==null&&F!==void 0?F:P.writableErrored)!==null&&ee!==void 0?ee:(Z=P._readableState)===null||Z===void 0?void 0:Z.errorEmitted)!==null&&ae!==void 0?ae:(U=P._writableState)===null||U===void 0?void 0:U.errorEmitted)!==null&&te!==void 0?te:(H=P._readableState)===null||H===void 0?void 0:H.errored)!==null&&$!==void 0?$:!((Q=P._writableState)===null||Q===void 0)&&Q.errored))}D.exports={kDestroyed:s,isDisturbed:se,kIsDisturbed:e,isErrored:X,kIsErrored:i,isReadable:b,kIsReadable:r,kIsClosedPromise:t,kControllerErrorFunction:n,isClosed:K,isDestroyed:j,isDuplexNodeStream:w,isFinished:k,isIterable:I,isReadableNodeStream:o,isReadableStream:v,isReadableEnded:S,isReadableFinished:A,isReadableErrored:G,isNodeStream:E,isWebStream:x,isWritable:z,isWritableNodeStream:h,isWritableStream:M,isWritableEnded:R,isWritableFinished:T,isWritableErrored:V,isServerRequest:Y,isServerResponse:ie,willEmitClose:le,isTransformStream:O}},{"../../ours/primordials":127}],123:[function(g,D,C){const l=g("process/"),{ArrayPrototypeSlice:p,Error:y,FunctionPrototypeSymbolHasInstance:f,ObjectDefineProperty:s,ObjectDefineProperties:i,ObjectSetPrototypeOf:r,StringPrototypeToLowerCase:e,Symbol:t,SymbolHasInstance:n}=g("../../ours/primordials");D.exports=ie,ie.WritableState=K;const{EventEmitter:o}=g("events"),h=g("./legacy").Stream,{Buffer:w}=g("buffer"),E=g("./destroy"),{addAbortSignal:v}=g("./add-abort-signal"),{getHighWaterMark:M,getDefaultHighWaterMark:O}=g("./state"),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_MULTIPLE_CALLBACK:j,ERR_STREAM_CANNOT_PIPE:R,ERR_STREAM_DESTROYED:T,ERR_STREAM_ALREADY_FINISHED:S,ERR_STREAM_NULL_VALUES:A,ERR_STREAM_WRITE_AFTER_END:b,ERR_UNKNOWN_ENCODING:z}=g("../../ours/errors").codes,{errorOrDestroy:k}=E;r(ie.prototype,h.prototype),r(ie,h);function V(){}const G=t("kOnFinished");function K(d,m,c){typeof c!="boolean"&&(c=m instanceof g("./duplex")),this.objectMode=!!(d&&d.objectMode),c&&(this.objectMode=this.objectMode||!!(d&&d.writableObjectMode)),this.highWaterMark=d?M(this,d,"writableHighWaterMark",c):O(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const a=!!(d&&d.decodeStrings===!1);this.decodeStrings=!a,this.defaultEncoding=d&&d.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=P.bind(void 0,m),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,oe(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!d||d.emitClose!==!1,this.autoDestroy=!d||d.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[G]=[]}function oe(d){d.buffered=[],d.bufferedIndex=0,d.allBuffers=!0,d.allNoop=!0}K.prototype.getBuffer=function(){return p(this.buffered,this.bufferedIndex)},s(K.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ie(d){const m=this instanceof g("./duplex");if(!m&&!f(ie,this))return new ie(d);this._writableState=new K(d,this,m),d&&(typeof d.write=="function"&&(this._write=d.write),typeof d.writev=="function"&&(this._writev=d.writev),typeof d.destroy=="function"&&(this._destroy=d.destroy),typeof d.final=="function"&&(this._final=d.final),typeof d.construct=="function"&&(this._construct=d.construct),d.signal&&v(d.signal,this)),h.call(this,d),E.construct(this,()=>{const c=this._writableState;c.writing||ee(this,c),U(this,c)})}s(ie,n,{__proto__:null,value:function(d){return f(this,d)?!0:this!==ie?!1:d&&d._writableState instanceof K}}),ie.prototype.pipe=function(){k(this,new R)};function Y(d,m,c,a){const u=d._writableState;if(typeof c=="function")a=c,c=u.defaultEncoding;else{if(!c)c=u.defaultEncoding;else if(c!=="buffer"&&!w.isEncoding(c))throw new z(c);typeof a!="function"&&(a=V)}if(m===null)throw new A;if(!u.objectMode)if(typeof m=="string")u.decodeStrings!==!1&&(m=w.from(m,c),c="buffer");else if(m instanceof w)c="buffer";else if(h._isUint8Array(m))m=h._uint8ArrayToBuffer(m),c="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],m);let _;return u.ending?_=new b:u.destroyed&&(_=new T("write")),_?(l.nextTick(a,_),k(d,_,!0),_):(u.pendingcb++,le(d,u,m,c,a))}ie.prototype.write=function(d,m,c){return Y(this,d,m,c)===!0},ie.prototype.cork=function(){this._writableState.corked++},ie.prototype.uncork=function(){const d=this._writableState;d.corked&&(d.corked--,d.writing||ee(this,d))},ie.prototype.setDefaultEncoding=function(m){if(typeof m=="string"&&(m=e(m)),!w.isEncoding(m))throw new z(m);return this._writableState.defaultEncoding=m,this};function le(d,m,c,a,u){const _=m.objectMode?1:c.length;m.length+=_;const B=m.length<m.highWaterMark;return B||(m.needDrain=!0),m.writing||m.corked||m.errored||!m.constructed?(m.buffered.push({chunk:c,encoding:a,callback:u}),m.allBuffers&&a!=="buffer"&&(m.allBuffers=!1),m.allNoop&&u!==V&&(m.allNoop=!1)):(m.writelen=_,m.writecb=u,m.writing=!0,m.sync=!0,d._write(c,a,m.onwrite),m.sync=!1),B&&!m.errored&&!m.destroyed}function se(d,m,c,a,u,_,B){m.writelen=a,m.writecb=B,m.writing=!0,m.sync=!0,m.destroyed?m.onwrite(new T("write")):c?d._writev(u,m.onwrite):d._write(u,_,m.onwrite),m.sync=!1}function X(d,m,c,a){--m.pendingcb,a(c),ae(m),k(d,c)}function P(d,m){const c=d._writableState,a=c.sync,u=c.writecb;if(typeof u!="function"){k(d,new j);return}c.writing=!1,c.writecb=null,c.length-=c.writelen,c.writelen=0,m?(m.stack,c.errored||(c.errored=m),d._readableState&&!d._readableState.errored&&(d._readableState.errored=m),a?l.nextTick(X,d,c,m,u):X(d,c,m,u)):(c.buffered.length>c.bufferedIndex&&ee(d,c),a?c.afterWriteTickInfo!==null&&c.afterWriteTickInfo.cb===u?c.afterWriteTickInfo.count++:(c.afterWriteTickInfo={count:1,cb:u,stream:d,state:c},l.nextTick($,c.afterWriteTickInfo)):te(d,c,1,u))}function $({stream:d,state:m,count:c,cb:a}){return m.afterWriteTickInfo=null,te(d,m,c,a)}function te(d,m,c,a){for(!m.ending&&!d.destroyed&&m.length===0&&m.needDrain&&(m.needDrain=!1,d.emit("drain"));c-- >0;)m.pendingcb--,a();m.destroyed&&ae(m),U(d,m)}function ae(d){if(d.writing)return;for(let u=d.bufferedIndex;u<d.buffered.length;++u){var m;const{chunk:_,callback:B}=d.buffered[u],J=d.objectMode?1:_.length;d.length-=J,B((m=d.errored)!==null&&m!==void 0?m:new T("write"))}const c=d[G].splice(0);for(let u=0;u<c.length;u++){var a;c[u]((a=d.errored)!==null&&a!==void 0?a:new T("end"))}oe(d)}function ee(d,m){if(m.corked||m.bufferProcessing||m.destroyed||!m.constructed)return;const{buffered:c,bufferedIndex:a,objectMode:u}=m,_=c.length-a;if(!_)return;let B=a;if(m.bufferProcessing=!0,_>1&&d._writev){m.pendingcb-=_-1;const J=m.allNoop?V:ce=>{for(let de=B;de<c.length;++de)c[de].callback(ce)},ne=m.allNoop&&B===0?c:p(c,B);ne.allBuffers=m.allBuffers,se(d,m,!0,m.length,ne,"",J),oe(m)}else{do{const{chunk:J,encoding:ne,callback:ce}=c[B];c[B++]=null;const de=u?1:J.length;se(d,m,!1,de,J,ne,ce)}while(B<c.length&&!m.writing);B===c.length?oe(m):B>256?(c.splice(0,B),m.bufferedIndex=0):m.bufferedIndex=B}m.bufferProcessing=!1}ie.prototype._write=function(d,m,c){if(this._writev)this._writev([{chunk:d,encoding:m}],c);else throw new I("_write()")},ie.prototype._writev=null,ie.prototype.end=function(d,m,c){const a=this._writableState;typeof d=="function"?(c=d,d=null,m=null):typeof m=="function"&&(c=m,m=null);let u;if(d!=null){const _=Y(this,d,m);_ instanceof y&&(u=_)}return a.corked&&(a.corked=1,this.uncork()),u||(!a.errored&&!a.ending?(a.ending=!0,U(this,a,!0),a.ended=!0):a.finished?u=new S("end"):a.destroyed&&(u=new T("end"))),typeof c=="function"&&(u||a.finished?l.nextTick(c,u):a[G].push(c)),this};function F(d){return d.ending&&!d.destroyed&&d.constructed&&d.length===0&&!d.errored&&d.buffered.length===0&&!d.finished&&!d.writing&&!d.errorEmitted&&!d.closeEmitted}function L(d,m){let c=!1;function a(u){if(c){k(d,u??j());return}if(c=!0,m.pendingcb--,u){const _=m[G].splice(0);for(let B=0;B<_.length;B++)_[B](u);k(d,u,m.sync)}else F(m)&&(m.prefinished=!0,d.emit("prefinish"),m.pendingcb++,l.nextTick(H,d,m))}m.sync=!0,m.pendingcb++;try{d._final(a)}catch(u){a(u)}m.sync=!1}function Z(d,m){!m.prefinished&&!m.finalCalled&&(typeof d._final=="function"&&!m.destroyed?(m.finalCalled=!0,L(d,m)):(m.prefinished=!0,d.emit("prefinish")))}function U(d,m,c){F(m)&&(Z(d,m),m.pendingcb===0&&(c?(m.pendingcb++,l.nextTick((a,u)=>{F(u)?H(a,u):u.pendingcb--},d,m)):F(m)&&(m.pendingcb++,H(d,m))))}function H(d,m){m.pendingcb--,m.finished=!0;const c=m[G].splice(0);for(let a=0;a<c.length;a++)c[a]();if(d.emit("finish"),m.autoDestroy){const a=d._readableState;(!a||a.autoDestroy&&(a.endEmitted||a.readable===!1))&&d.destroy()}}i(ie.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(d){this._writableState&&(this._writableState.destroyed=d)}},writable:{__proto__:null,get(){const d=this._writableState;return!!d&&d.writable!==!1&&!d.destroyed&&!d.errored&&!d.ending&&!d.ended},set(d){this._writableState&&(this._writableState.writable=!!d)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const d=this._writableState;return d?!d.destroyed&&!d.ending&&d.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Q=E.destroy;ie.prototype.destroy=function(d,m){const c=this._writableState;return!c.destroyed&&(c.bufferedIndex<c.buffered.length||c[G].length)&&l.nextTick(ae,c),Q.call(this,d,m),this},ie.prototype._undestroy=E.undestroy,ie.prototype._destroy=function(d,m){m(d)},ie.prototype[o.captureRejectionSymbol]=function(d){this.destroy(d)};let q;function re(){return q===void 0&&(q={}),q}ie.fromWeb=function(d,m){return re().newStreamWritableFromWritableStream(d,m)},ie.toWeb=function(d){return re().newWritableStreamFromStreamWritable(d)}},{"../../ours/errors":126,"../../ours/primordials":127,"./add-abort-signal":107,"./destroy":110,"./duplex":111,"./legacy":115,"./state":120,buffer:29,events:49,"process/":102}],124:[function(g,D,C){const{ArrayIsArray:l,ArrayPrototypeIncludes:p,ArrayPrototypeJoin:y,ArrayPrototypeMap:f,NumberIsInteger:s,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:r,NumberMIN_SAFE_INTEGER:e,NumberParseInt:t,ObjectPrototypeHasOwnProperty:n,RegExpPrototypeExec:o,String:h,StringPrototypeToUpperCase:w,StringPrototypeTrim:E}=g("../ours/primordials"),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:M,ERR_INVALID_ARG_TYPE:O,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:I,ERR_UNKNOWN_SIGNAL:j}}=g("../ours/errors"),{normalizeEncoding:R}=g("../ours/util"),{isAsyncFunction:T,isArrayBufferView:S}=g("../ours/util").types,A={};function b(_){return _===(_|0)}function z(_){return _===_>>>0}const k=/^[0-7]+$/,V="must be a 32-bit unsigned integer or an octal string";function G(_,B,J){if(typeof _>"u"&&(_=J),typeof _=="string"){if(o(k,_)===null)throw new x(B,_,V);_=t(_,8)}return ie(_,B),_}const K=v((_,B,J=e,ne=r)=>{if(typeof _!="number")throw new O(B,"number",_);if(!s(_))throw new I(B,"an integer",_);if(_<J||_>ne)throw new I(B,`>= ${J} && <= ${ne}`,_)}),oe=v((_,B,J=-2147483648,ne=2147483647)=>{if(typeof _!="number")throw new O(B,"number",_);if(!s(_))throw new I(B,"an integer",_);if(_<J||_>ne)throw new I(B,`>= ${J} && <= ${ne}`,_)}),ie=v((_,B,J=!1)=>{if(typeof _!="number")throw new O(B,"number",_);if(!s(_))throw new I(B,"an integer",_);const ne=J?1:0,ce=4294967295;if(_<ne||_>ce)throw new I(B,`>= ${ne} && <= ${ce}`,_)});function Y(_,B){if(typeof _!="string")throw new O(B,"string",_)}function le(_,B,J=void 0,ne){if(typeof _!="number")throw new O(B,"number",_);if(J!=null&&_<J||ne!=null&&_>ne||(J!=null||ne!=null)&&i(_))throw new I(B,`${J!=null?`>= ${J}`:""}${J!=null&&ne!=null?" && ":""}${ne!=null?`<= ${ne}`:""}`,_)}const se=v((_,B,J)=>{if(!p(J,_)){const ce="must be one of: "+y(f(J,de=>typeof de=="string"?`'${de}'`:h(de)),", ");throw new x(B,_,ce)}});function X(_,B){if(typeof _!="boolean")throw new O(B,"boolean",_)}function P(_,B,J){return _==null||!n(_,B)?J:_[B]}const $=v((_,B,J=null)=>{const ne=P(J,"allowArray",!1),ce=P(J,"allowFunction",!1);if(!P(J,"nullable",!1)&&_===null||!ne&&l(_)||typeof _!="object"&&(!ce||typeof _!="function"))throw new O(B,"Object",_)}),te=v((_,B)=>{if(_!=null&&typeof _!="object"&&typeof _!="function")throw new O(B,"a dictionary",_)}),ae=v((_,B,J=0)=>{if(!l(_))throw new O(B,"Array",_);if(_.length<J){const ne=`must be longer than ${J}`;throw new x(B,_,ne)}});function ee(_,B){ae(_,B);for(let J=0;J<_.length;J++)Y(_[J],`${B}[${J}]`)}function F(_,B){ae(_,B);for(let J=0;J<_.length;J++)X(_[J],`${B}[${J}]`)}function L(_,B="signal"){if(Y(_,B),A[_]===void 0)throw A[w(_)]!==void 0?new j(_+" (signals must use all capital letters)"):new j(_)}const Z=v((_,B="buffer")=>{if(!S(_))throw new O(B,["Buffer","TypedArray","DataView"],_)});function U(_,B){const J=R(B),ne=_.length;if(J==="hex"&&ne%2!==0)throw new x("encoding",B,`is invalid for data of length ${ne}`)}function H(_,B="Port",J=!0){if(typeof _!="number"&&typeof _!="string"||typeof _=="string"&&E(_).length===0||+_!==+_>>>0||_>65535||_===0&&!J)throw new M(B,_,J);return _|0}const Q=v((_,B)=>{if(_!==void 0&&(_===null||typeof _!="object"||!("aborted"in _)))throw new O(B,"AbortSignal",_)}),q=v((_,B)=>{if(typeof _!="function")throw new O(B,"Function",_)}),re=v((_,B)=>{if(typeof _!="function"||T(_))throw new O(B,"Function",_)}),d=v((_,B)=>{if(_!==void 0)throw new O(B,"undefined",_)});function m(_,B,J){if(!p(J,_))throw new O(B,`('${y(J,"|")}')`,_)}const c=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function a(_,B){if(typeof _>"u"||!o(c,_))throw new x(B,_,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function u(_){if(typeof _=="string")return a(_,"hints"),_;if(l(_)){const B=_.length;let J="";if(B===0)return J;for(let ne=0;ne<B;ne++){const ce=_[ne];a(ce,"hints"),J+=ce,ne!==B-1&&(J+=", ")}return J}throw new x("hints",_,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}D.exports={isInt32:b,isUint32:z,parseFileMode:G,validateArray:ae,validateStringArray:ee,validateBooleanArray:F,validateBoolean:X,validateBuffer:Z,validateDictionary:te,validateEncoding:U,validateFunction:q,validateInt32:oe,validateInteger:K,validateNumber:le,validateObject:$,validateOneOf:se,validatePlainFunction:re,validatePort:H,validateSignalName:L,validateString:Y,validateUint32:ie,validateUndefined:d,validateUnion:m,validateAbortSignal:Q,validateLinkHeaderValue:u}},{"../ours/errors":126,"../ours/primordials":127,"../ours/util":128}],125:[function(g,D,C){const l=g("../stream"),p=g("../stream/promises"),y=l.Readable.destroy;D.exports=l.Readable,D.exports._uint8ArrayToBuffer=l._uint8ArrayToBuffer,D.exports._isUint8Array=l._isUint8Array,D.exports.isDisturbed=l.isDisturbed,D.exports.isErrored=l.isErrored,D.exports.isReadable=l.isReadable,D.exports.Readable=l.Readable,D.exports.Writable=l.Writable,D.exports.Duplex=l.Duplex,D.exports.Transform=l.Transform,D.exports.PassThrough=l.PassThrough,D.exports.addAbortSignal=l.addAbortSignal,D.exports.finished=l.finished,D.exports.destroy=l.destroy,D.exports.destroy=y,D.exports.pipeline=l.pipeline,D.exports.compose=l.compose,Object.defineProperty(l,"promises",{configurable:!0,enumerable:!0,get(){return p}}),D.exports.Stream=l.Stream,D.exports.default=D.exports},{"../stream":129,"../stream/promises":130}],126:[function(g,D,C){const{format:l,inspect:p,AggregateError:y}=g("./util"),f=globalThis.AggregateError||y,s=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],r=/^([A-Z][a-z0-9]*)+$/,e="__node_internal_",t={};function n(O,x){if(!O)throw new t.ERR_INTERNAL_ASSERTION(x)}function o(O){let x="",I=O.length;const j=O[0]==="-"?1:0;for(;I>=j+4;I-=3)x=`_${O.slice(I-3,I)}${x}`;return`${O.slice(0,I)}${x}`}function h(O,x,I){if(typeof x=="function")return n(x.length<=I.length,`Code: ${O}; The provided arguments length (${I.length}) does not match the required ones (${x.length}).`),x(...I);const j=(x.match(/%[dfijoOs]/g)||[]).length;return n(j===I.length,`Code: ${O}; The provided arguments length (${I.length}) does not match the required ones (${j}).`),I.length===0?x:l(x,...I)}function w(O,x,I){I||(I=Error);class j extends I{constructor(...T){super(h(O,x,T))}toString(){return`${this.name} [${O}]: ${this.message}`}}Object.defineProperties(j.prototype,{name:{value:I.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${O}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),j.prototype.code=O,j.prototype[s]=!0,t[O]=j}function E(O){const x=e+O.name;return Object.defineProperty(O,"name",{value:x}),O}function v(O,x){if(O&&x&&O!==x){if(Array.isArray(x.errors))return x.errors.push(O),x;const I=new f([x,O],x.message);return I.code=x.code,I}return O||x}class M extends Error{constructor(x="The operation was aborted",I=void 0){if(I!==void 0&&typeof I!="object")throw new t.ERR_INVALID_ARG_TYPE("options","Object",I);super(x,I),this.code="ABORT_ERR",this.name="AbortError"}}w("ERR_ASSERTION","%s",Error),w("ERR_INVALID_ARG_TYPE",(O,x,I)=>{n(typeof O=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let j="The ";O.endsWith(" argument")?j+=`${O} `:j+=`"${O}" ${O.includes(".")?"property":"argument"} `,j+="must be ";const R=[],T=[],S=[];for(const b of x)n(typeof b=="string","All expected entries have to be of type string"),i.includes(b)?R.push(b.toLowerCase()):r.test(b)?T.push(b):(n(b!=="object",'The value "object" should be written as "Object"'),S.push(b));if(T.length>0){const b=R.indexOf("object");b!==-1&&(R.splice(R,b,1),T.push("Object"))}if(R.length>0){switch(R.length){case 1:j+=`of type ${R[0]}`;break;case 2:j+=`one of type ${R[0]} or ${R[1]}`;break;default:{const b=R.pop();j+=`one of type ${R.join(", ")}, or ${b}`}}(T.length>0||S.length>0)&&(j+=" or ")}if(T.length>0){switch(T.length){case 1:j+=`an instance of ${T[0]}`;break;case 2:j+=`an instance of ${T[0]} or ${T[1]}`;break;default:{const b=T.pop();j+=`an instance of ${T.join(", ")}, or ${b}`}}S.length>0&&(j+=" or ")}switch(S.length){case 0:break;case 1:S[0].toLowerCase()!==S[0]&&(j+="an "),j+=`${S[0]}`;break;case 2:j+=`one of ${S[0]} or ${S[1]}`;break;default:{const b=S.pop();j+=`one of ${S.join(", ")}, or ${b}`}}if(I==null)j+=`. Received ${I}`;else if(typeof I=="function"&&I.name)j+=`. Received function ${I.name}`;else if(typeof I=="object"){var A;if((A=I.constructor)!==null&&A!==void 0&&A.name)j+=`. Received an instance of ${I.constructor.name}`;else{const b=p(I,{depth:-1});j+=`. Received ${b}`}}else{let b=p(I,{colors:!1});b.length>25&&(b=`${b.slice(0,25)}...`),j+=`. Received type ${typeof I} (${b})`}return j},TypeError),w("ERR_INVALID_ARG_VALUE",(O,x,I="is invalid")=>{let j=p(x);return j.length>128&&(j=j.slice(0,128)+"..."),`The ${O.includes(".")?"property":"argument"} '${O}' ${I}. Received ${j}`},TypeError),w("ERR_INVALID_RETURN_VALUE",(O,x,I)=>{var j;const R=I!=null&&(j=I.constructor)!==null&&j!==void 0&&j.name?`instance of ${I.constructor.name}`:`type ${typeof I}`;return`Expected ${O} to be returned from the "${x}" function but got ${R}.`},TypeError),w("ERR_MISSING_ARGS",(...O)=>{n(O.length>0,"At least one arg needs to be specified");let x;const I=O.length;switch(O=(Array.isArray(O)?O:[O]).map(j=>`"${j}"`).join(" or "),I){case 1:x+=`The ${O[0]} argument`;break;case 2:x+=`The ${O[0]} and ${O[1]} arguments`;break;default:{const j=O.pop();x+=`The ${O.join(", ")}, and ${j} arguments`}break}return`${x} must be specified`},TypeError),w("ERR_OUT_OF_RANGE",(O,x,I)=>{n(x,'Missing "range" argument');let j;return Number.isInteger(I)&&Math.abs(I)>2**32?j=o(String(I)):typeof I=="bigint"?(j=String(I),(I>2n**32n||I<-(2n**32n))&&(j=o(j)),j+="n"):j=p(I),`The value of "${O}" is out of range. It must be ${x}. Received ${j}`},RangeError),w("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),w("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),w("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),w("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),w("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),w("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),w("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),w("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),w("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),w("ERR_STREAM_WRITE_AFTER_END","write after end",Error),w("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),D.exports={AbortError:M,aggregateTwoErrors:E(v),hideStackFrames:E,codes:t}},{"./util":128}],127:[function(g,D,C){D.exports={ArrayIsArray(l){return Array.isArray(l)},ArrayPrototypeIncludes(l,p){return l.includes(p)},ArrayPrototypeIndexOf(l,p){return l.indexOf(p)},ArrayPrototypeJoin(l,p){return l.join(p)},ArrayPrototypeMap(l,p){return l.map(p)},ArrayPrototypePop(l,p){return l.pop(p)},ArrayPrototypePush(l,p){return l.push(p)},ArrayPrototypeSlice(l,p,y){return l.slice(p,y)},Error,FunctionPrototypeCall(l,p,...y){return l.call(p,...y)},FunctionPrototypeSymbolHasInstance(l,p){return Function.prototype[Symbol.hasInstance].call(l,p)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(l,p){return Object.defineProperties(l,p)},ObjectDefineProperty(l,p,y){return Object.defineProperty(l,p,y)},ObjectGetOwnPropertyDescriptor(l,p){return Object.getOwnPropertyDescriptor(l,p)},ObjectKeys(l){return Object.keys(l)},ObjectSetPrototypeOf(l,p){return Object.setPrototypeOf(l,p)},Promise,PromisePrototypeCatch(l,p){return l.catch(p)},PromisePrototypeThen(l,p,y){return l.then(p,y)},PromiseReject(l){return Promise.reject(l)},ReflectApply:Reflect.apply,RegExpPrototypeTest(l,p){return l.test(p)},SafeSet:Set,String,StringPrototypeSlice(l,p,y){return l.slice(p,y)},StringPrototypeToLowerCase(l){return l.toLowerCase()},StringPrototypeToUpperCase(l){return l.toUpperCase()},StringPrototypeTrim(l){return l.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet(l,p,y){return l.set(p,y)},Uint8Array}},{}],128:[function(g,D,C){const l=g("buffer"),p=Object.getPrototypeOf(async function(){}).constructor,y=globalThis.Blob||l.Blob,f=typeof y<"u"?function(r){return r instanceof y}:function(r){return!1};class s extends Error{constructor(r){if(!Array.isArray(r))throw new TypeError(`Expected input to be an Array, got ${typeof r}`);let e="";for(let t=0;t<r.length;t++)e+=`    ${r[t].stack}
`;super(e),this.name="AggregateError",this.errors=r}}D.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(i){let r=!1;return function(...e){r||(r=!0,i.apply(this,e))}},createDeferredPromise:function(){let i,r;return{promise:new Promise((t,n)=>{i=t,r=n}),resolve:i,reject:r}},promisify(i){return new Promise((r,e)=>{i((t,...n)=>t?e(t):r(...n))})},debuglog(){return function(){}},format(i,...r){return i.replace(/%([sdifj])/g,function(...[e,t]){const n=r.shift();return t==="f"?n.toFixed(6):t==="j"?JSON.stringify(n):t==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(i){switch(typeof i){case"string":if(i.includes("'"))if(i.includes('"')){if(!i.includes("`")&&!i.includes("${"))return`\`${i}\``}else return`"${i}"`;return`'${i}'`;case"number":return isNaN(i)?"NaN":Object.is(i,-0)?String(i):i;case"bigint":return`${String(i)}n`;case"boolean":case"undefined":return String(i);case"object":return"{}"}},types:{isAsyncFunction(i){return i instanceof p},isArrayBufferView(i){return ArrayBuffer.isView(i)}},isBlob:f},D.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},{buffer:29}],129:[function(g,D,C){const{Buffer:l}=g("buffer"),{ObjectDefineProperty:p,ObjectKeys:y,ReflectApply:f}=g("./ours/primordials"),{promisify:{custom:s}}=g("./ours/util"),{streamReturningOperators:i,promiseReturningOperators:r}=g("./internal/streams/operators"),{codes:{ERR_ILLEGAL_CONSTRUCTOR:e}}=g("./ours/errors"),t=g("./internal/streams/compose"),{pipeline:n}=g("./internal/streams/pipeline"),{destroyer:o}=g("./internal/streams/destroy"),h=g("./internal/streams/end-of-stream"),w=g("./stream/promises"),E=g("./internal/streams/utils"),v=D.exports=g("./internal/streams/legacy").Stream;v.isDisturbed=E.isDisturbed,v.isErrored=E.isErrored,v.isReadable=E.isReadable,v.Readable=g("./internal/streams/readable");for(const O of y(i)){let I=function(...j){if(new.target)throw e();return v.Readable.from(f(x,this,j))};const x=i[O];p(I,"name",{__proto__:null,value:x.name}),p(I,"length",{__proto__:null,value:x.length}),p(v.Readable.prototype,O,{__proto__:null,value:I,enumerable:!1,configurable:!0,writable:!0})}for(const O of y(r)){let I=function(...j){if(new.target)throw e();return f(x,this,j)};const x=r[O];p(I,"name",{__proto__:null,value:x.name}),p(I,"length",{__proto__:null,value:x.length}),p(v.Readable.prototype,O,{__proto__:null,value:I,enumerable:!1,configurable:!0,writable:!0})}v.Writable=g("./internal/streams/writable"),v.Duplex=g("./internal/streams/duplex"),v.Transform=g("./internal/streams/transform"),v.PassThrough=g("./internal/streams/passthrough"),v.pipeline=n;const{addAbortSignal:M}=g("./internal/streams/add-abort-signal");v.addAbortSignal=M,v.finished=h,v.destroy=o,v.compose=t,p(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return w}}),p(n,s,{__proto__:null,enumerable:!0,get(){return w.pipeline}}),p(h,s,{__proto__:null,enumerable:!0,get(){return w.finished}}),v.Stream=v,v._isUint8Array=function(x){return x instanceof Uint8Array},v._uint8ArrayToBuffer=function(x){return l.from(x.buffer,x.byteOffset,x.byteLength)}},{"./internal/streams/add-abort-signal":107,"./internal/streams/compose":109,"./internal/streams/destroy":110,"./internal/streams/duplex":111,"./internal/streams/end-of-stream":113,"./internal/streams/legacy":115,"./internal/streams/operators":116,"./internal/streams/passthrough":117,"./internal/streams/pipeline":118,"./internal/streams/readable":119,"./internal/streams/transform":121,"./internal/streams/utils":122,"./internal/streams/writable":123,"./ours/errors":126,"./ours/primordials":127,"./ours/util":128,"./stream/promises":130,buffer:29}],130:[function(g,D,C){const{ArrayPrototypePop:l,Promise:p}=g("../ours/primordials"),{isIterable:y,isNodeStream:f,isWebStream:s}=g("../internal/streams/utils"),{pipelineImpl:i}=g("../internal/streams/pipeline"),{finished:r}=g("../internal/streams/end-of-stream");g("../../lib/stream.js");function e(...t){return new p((n,o)=>{let h,w;const E=t[t.length-1];if(E&&typeof E=="object"&&!f(E)&&!y(E)&&!s(E)){const v=l(t);h=v.signal,w=v.end}i(t,(v,M)=>{v?o(v):n(M)},{signal:h,end:w})})}D.exports={finished:r,pipeline:e}},{"../../lib/stream.js":129,"../internal/streams/end-of-stream":113,"../internal/streams/pipeline":118,"../internal/streams/utils":122,"../ours/primordials":127}],131:[function(g,D,C){function l(y,f,s){var i=this;this._callback=y,this._args=s,this._interval=setInterval(y,f,this._args),this.reschedule=function(r){r||(r=i._interval),i._interval&&clearInterval(i._interval),i._interval=setInterval(i._callback,r,i._args)},this.clear=function(){i._interval&&(clearInterval(i._interval),i._interval=void 0)},this.destroy=function(){i._interval&&clearInterval(i._interval),i._callback=void 0,i._interval=void 0,i._args=void 0}}function p(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var y;if(arguments.length>0){y=new Array(arguments.length-2);for(var f=0;f<y.length;f++)y[f]=arguments[f+2]}return new l(arguments[0],arguments[1],y)}D.exports=p},{}],132:[function(g,D,C){D.exports=g("./index.js")()},{"./index.js":133}],133:[function(g,D,C){(function(l){(function(){D.exports=y;function p(s){return s instanceof l?l.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function y(s){if(s=s||{},s.circles)return f(s);return s.proto?e:r;function i(t,n){for(var o=Object.keys(t),h=new Array(o.length),w=0;w<o.length;w++){var E=o[w],v=t[E];typeof v!="object"||v===null?h[E]=v:v instanceof Date?h[E]=new Date(v):ArrayBuffer.isView(v)?h[E]=p(v):h[E]=n(v)}return h}function r(t){if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return i(t,r);if(t instanceof Map)return new Map(i(Array.from(t),r));if(t instanceof Set)return new Set(i(Array.from(t),r));var n={};for(var o in t)if(Object.hasOwnProperty.call(t,o)!==!1){var h=t[o];typeof h!="object"||h===null?n[o]=h:h instanceof Date?n[o]=new Date(h):h instanceof Map?n[o]=new Map(i(Array.from(h),r)):h instanceof Set?n[o]=new Set(i(Array.from(h),r)):ArrayBuffer.isView(h)?n[o]=p(h):n[o]=r(h)}return n}function e(t){if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t);if(Array.isArray(t))return i(t,e);if(t instanceof Map)return new Map(i(Array.from(t),e));if(t instanceof Set)return new Set(i(Array.from(t),e));var n={};for(var o in t){var h=t[o];typeof h!="object"||h===null?n[o]=h:h instanceof Date?n[o]=new Date(h):h instanceof Map?n[o]=new Map(i(Array.from(h),e)):h instanceof Set?n[o]=new Set(i(Array.from(h),e)):ArrayBuffer.isView(h)?n[o]=p(h):n[o]=e(h)}return n}}function f(s){var i=[],r=[];return s.proto?n:t;function e(o,h){for(var w=Object.keys(o),E=new Array(w.length),v=0;v<w.length;v++){var M=w[v],O=o[M];if(typeof O!="object"||O===null)E[M]=O;else if(O instanceof Date)E[M]=new Date(O);else if(ArrayBuffer.isView(O))E[M]=p(O);else{var x=i.indexOf(O);x!==-1?E[M]=r[x]:E[M]=h(O)}}return E}function t(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return e(o,t);if(o instanceof Map)return new Map(e(Array.from(o),t));if(o instanceof Set)return new Set(e(Array.from(o),t));var h={};i.push(o),r.push(h);for(var w in o)if(Object.hasOwnProperty.call(o,w)!==!1){var E=o[w];if(typeof E!="object"||E===null)h[w]=E;else if(E instanceof Date)h[w]=new Date(E);else if(E instanceof Map)h[w]=new Map(e(Array.from(E),t));else if(E instanceof Set)h[w]=new Set(e(Array.from(E),t));else if(ArrayBuffer.isView(E))h[w]=p(E);else{var v=i.indexOf(E);v!==-1?h[w]=r[v]:h[w]=t(E)}}return i.pop(),r.pop(),h}function n(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return e(o,n);if(o instanceof Map)return new Map(e(Array.from(o),n));if(o instanceof Set)return new Set(e(Array.from(o),n));var h={};i.push(o),r.push(h);for(var w in o){var E=o[w];if(typeof E!="object"||E===null)h[w]=E;else if(E instanceof Date)h[w]=new Date(E);else if(E instanceof Map)h[w]=new Map(e(Array.from(E),n));else if(E instanceof Set)h[w]=new Set(e(Array.from(E),n));else if(ArrayBuffer.isView(E))h[w]=p(E);else{var v=i.indexOf(E);v!==-1?h[w]=r[v]:h[w]=n(E)}}return i.pop(),r.pop(),h}}}).call(this)}).call(this,g("buffer").Buffer)},{buffer:29}],134:[function(g,D,C){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var l=g("buffer"),p=l.Buffer;function y(s,i){for(var r in s)i[r]=s[r]}p.from&&p.alloc&&p.allocUnsafe&&p.allocUnsafeSlow?D.exports=l:(y(l,C),C.Buffer=f);function f(s,i,r){return p(s,i,r)}f.prototype=Object.create(p.prototype),y(p,f),f.from=function(s,i,r){if(typeof s=="number")throw new TypeError("Argument must not be a number");return p(s,i,r)},f.alloc=function(s,i,r){if(typeof s!="number")throw new TypeError("Argument must be a number");var e=p(s);return i!==void 0?typeof r=="string"?e.fill(i,r):e.fill(i):e.fill(0),e},f.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return p(s)},f.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return l.SlowBuffer(s)}},{buffer:29}],135:[function(g,D,C){D.exports=l;function l(y){var f=y._readableState;return f?f.objectMode||typeof y._duplexState=="number"?y.read():y.read(p(f)):null}function p(y){return y.buffer.length?y.buffer.head?y.buffer.head.data.length:y.buffer[0].length:y.length}},{}],136:[function(g,D,C){arguments[4][28][0].apply(C,arguments)},{dup:28,"safe-buffer":134}],137:[function(g,D,C){var l=g("punycode"),p=g("./util");C.parse=I,C.resolve=R,C.resolveObject=T,C.format=j,C.Url=y;function y(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var f=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,i=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["<",">",'"',"`"," ","\r",`
`,"	"],e=["{","}","|","\\","^","`"].concat(r),t=["'"].concat(e),n=["%","/","?",";","#"].concat(t),o=["/","?","#"],h=255,w=/^[+a-z0-9A-Z_-]{0,63}$/,E=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},M={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=g("querystring");function I(S,A,b){if(S&&p.isObject(S)&&S instanceof y)return S;var z=new y;return z.parse(S,A,b),z}y.prototype.parse=function(S,A,b){if(!p.isString(S))throw new TypeError("Parameter 'url' must be a string, not "+typeof S);var z=S.indexOf("?"),k=z!==-1&&z<S.indexOf("#")?"?":"#",V=S.split(k),G=/\\/g;V[0]=V[0].replace(G,"/"),S=V.join(k);var K=S;if(K=K.trim(),!b&&S.split("#").length===1){var oe=i.exec(K);if(oe)return this.path=K,this.href=K,this.pathname=oe[1],oe[2]?(this.search=oe[2],A?this.query=x.parse(this.search.substr(1)):this.query=this.search.substr(1)):A&&(this.search="",this.query={}),this}var ie=f.exec(K);if(ie){ie=ie[0];var Y=ie.toLowerCase();this.protocol=Y,K=K.substr(ie.length)}if(b||ie||K.match(/^\/\/[^@\/]+@[^@\/]+/)){var le=K.substr(0,2)==="//";le&&!(ie&&M[ie])&&(K=K.substr(2),this.slashes=!0)}if(!M[ie]&&(le||ie&&!O[ie])){for(var se=-1,X=0;X<o.length;X++){var P=K.indexOf(o[X]);P!==-1&&(se===-1||P<se)&&(se=P)}var $,te;se===-1?te=K.lastIndexOf("@"):te=K.lastIndexOf("@",se),te!==-1&&($=K.slice(0,te),K=K.slice(te+1),this.auth=decodeURIComponent($)),se=-1;for(var X=0;X<n.length;X++){var P=K.indexOf(n[X]);P!==-1&&(se===-1||P<se)&&(se=P)}se===-1&&(se=K.length),this.host=K.slice(0,se),K=K.slice(se),this.parseHost(),this.hostname=this.hostname||"";var ae=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ae)for(var ee=this.hostname.split(/\./),X=0,F=ee.length;X<F;X++){var L=ee[X];if(L&&!L.match(w)){for(var Z="",U=0,H=L.length;U<H;U++)L.charCodeAt(U)>127?Z+="x":Z+=L[U];if(!Z.match(w)){var Q=ee.slice(0,X),q=ee.slice(X+1),re=L.match(E);re&&(Q.push(re[1]),q.unshift(re[2])),q.length&&(K="/"+q.join(".")+K),this.hostname=Q.join(".");break}}}this.hostname.length>h?this.hostname="":this.hostname=this.hostname.toLowerCase(),ae||(this.hostname=l.toASCII(this.hostname));var d=this.port?":"+this.port:"",m=this.hostname||"";this.host=m+d,this.href+=this.host,ae&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),K[0]!=="/"&&(K="/"+K))}if(!v[Y])for(var X=0,F=t.length;X<F;X++){var c=t[X];if(K.indexOf(c)!==-1){var a=encodeURIComponent(c);a===c&&(a=escape(c)),K=K.split(c).join(a)}}var u=K.indexOf("#");u!==-1&&(this.hash=K.substr(u),K=K.slice(0,u));var _=K.indexOf("?");if(_!==-1?(this.search=K.substr(_),this.query=K.substr(_+1),A&&(this.query=x.parse(this.query)),K=K.slice(0,_)):A&&(this.search="",this.query={}),K&&(this.pathname=K),O[Y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var d=this.pathname||"",B=this.search||"";this.path=d+B}return this.href=this.format(),this};function j(S){return p.isString(S)&&(S=I(S)),S instanceof y?S.format():y.prototype.format.call(S)}y.prototype.format=function(){var S=this.auth||"";S&&(S=encodeURIComponent(S),S=S.replace(/%3A/i,":"),S+="@");var A=this.protocol||"",b=this.pathname||"",z=this.hash||"",k=!1,V="";this.host?k=S+this.host:this.hostname&&(k=S+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(k+=":"+this.port)),this.query&&p.isObject(this.query)&&Object.keys(this.query).length&&(V=x.stringify(this.query));var G=this.search||V&&"?"+V||"";return A&&A.substr(-1)!==":"&&(A+=":"),this.slashes||(!A||O[A])&&k!==!1?(k="//"+(k||""),b&&b.charAt(0)!=="/"&&(b="/"+b)):k||(k=""),z&&z.charAt(0)!=="#"&&(z="#"+z),G&&G.charAt(0)!=="?"&&(G="?"+G),b=b.replace(/[?#]/g,function(K){return encodeURIComponent(K)}),G=G.replace("#","%23"),A+k+b+G+z};function R(S,A){return I(S,!1,!0).resolve(A)}y.prototype.resolve=function(S){return this.resolveObject(I(S,!1,!0)).format()};function T(S,A){return S?I(S,!1,!0).resolveObject(A):A}y.prototype.resolveObject=function(S){if(p.isString(S)){var A=new y;A.parse(S,!1,!0),S=A}for(var b=new y,z=Object.keys(this),k=0;k<z.length;k++){var V=z[k];b[V]=this[V]}if(b.hash=S.hash,S.href==="")return b.href=b.format(),b;if(S.slashes&&!S.protocol){for(var G=Object.keys(S),K=0;K<G.length;K++){var oe=G[K];oe!=="protocol"&&(b[oe]=S[oe])}return O[b.protocol]&&b.hostname&&!b.pathname&&(b.path=b.pathname="/"),b.href=b.format(),b}if(S.protocol&&S.protocol!==b.protocol){if(!O[S.protocol]){for(var ie=Object.keys(S),Y=0;Y<ie.length;Y++){var le=ie[Y];b[le]=S[le]}return b.href=b.format(),b}if(b.protocol=S.protocol,!S.host&&!M[S.protocol]){for(var F=(S.pathname||"").split("/");F.length&&!(S.host=F.shift()););S.host||(S.host=""),S.hostname||(S.hostname=""),F[0]!==""&&F.unshift(""),F.length<2&&F.unshift(""),b.pathname=F.join("/")}else b.pathname=S.pathname;if(b.search=S.search,b.query=S.query,b.host=S.host||"",b.auth=S.auth,b.hostname=S.hostname||S.host,b.port=S.port,b.pathname||b.search){var se=b.pathname||"",X=b.search||"";b.path=se+X}return b.slashes=b.slashes||S.slashes,b.href=b.format(),b}var P=b.pathname&&b.pathname.charAt(0)==="/",$=S.host||S.pathname&&S.pathname.charAt(0)==="/",te=$||P||b.host&&S.pathname,ae=te,ee=b.pathname&&b.pathname.split("/")||[],F=S.pathname&&S.pathname.split("/")||[],L=b.protocol&&!O[b.protocol];if(L&&(b.hostname="",b.port=null,b.host&&(ee[0]===""?ee[0]=b.host:ee.unshift(b.host)),b.host="",S.protocol&&(S.hostname=null,S.port=null,S.host&&(F[0]===""?F[0]=S.host:F.unshift(S.host)),S.host=null),te=te&&(F[0]===""||ee[0]==="")),$)b.host=S.host||S.host===""?S.host:b.host,b.hostname=S.hostname||S.hostname===""?S.hostname:b.hostname,b.search=S.search,b.query=S.query,ee=F;else if(F.length)ee||(ee=[]),ee.pop(),ee=ee.concat(F),b.search=S.search,b.query=S.query;else if(!p.isNullOrUndefined(S.search)){if(L){b.hostname=b.host=ee.shift();var Z=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;Z&&(b.auth=Z.shift(),b.host=b.hostname=Z.shift())}return b.search=S.search,b.query=S.query,(!p.isNull(b.pathname)||!p.isNull(b.search))&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.href=b.format(),b}if(!ee.length)return b.pathname=null,b.search?b.path="/"+b.search:b.path=null,b.href=b.format(),b;for(var U=ee.slice(-1)[0],H=(b.host||S.host||ee.length>1)&&(U==="."||U==="..")||U==="",Q=0,q=ee.length;q>=0;q--)U=ee[q],U==="."?ee.splice(q,1):U===".."?(ee.splice(q,1),Q++):Q&&(ee.splice(q,1),Q--);if(!te&&!ae)for(;Q--;Q)ee.unshift("..");te&&ee[0]!==""&&(!ee[0]||ee[0].charAt(0)!=="/")&&ee.unshift(""),H&&ee.join("/").substr(-1)!=="/"&&ee.push("");var re=ee[0]===""||ee[0]&&ee[0].charAt(0)==="/";if(L){b.hostname=b.host=re?"":ee.length?ee.shift():"";var Z=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;Z&&(b.auth=Z.shift(),b.host=b.hostname=Z.shift())}return te=te||b.host&&ee.length,te&&!re&&ee.unshift(""),ee.length?b.pathname=ee.join("/"):(b.pathname=null,b.path=null),(!p.isNull(b.pathname)||!p.isNull(b.search))&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.auth=S.auth||b.auth,b.slashes=b.slashes||S.slashes,b.href=b.format(),b},y.prototype.parseHost=function(){var S=this.host,A=s.exec(S);A&&(A=A[0],A!==":"&&(this.port=A.substr(1)),S=S.substr(0,S.length-A.length)),S&&(this.hostname=S)}},{"./util":138,punycode:103,querystring:106}],138:[function(g,D,C){D.exports={isString:function(l){return typeof l=="string"},isObject:function(l){return typeof l=="object"&&l!==null},isNull:function(l){return l===null},isNullOrUndefined:function(l){return l==null}}},{}],139:[function(g,D,C){(function(l){(function(){D.exports=p;function p(f,s){if(y("noDeprecation"))return f;var i=!1;function r(){if(!i){if(y("throwDeprecation"))throw new Error(s);y("traceDeprecation"),i=!0}return f.apply(this,arguments)}return r}function y(f){try{if(!l.localStorage)return!1}catch{return!1}var s=l.localStorage[f];return s==null?!1:String(s).toLowerCase()==="true"}}).call(this)}).call(this,typeof me<"u"?me:typeof self<"u"?self:typeof window<"u"?window:{})},{}],140:[function(g,D,C){D.exports=l;function l(p,y){if(p&&y)return l(p)(y);if(typeof p!="function")throw new TypeError("need wrapper function");return Object.keys(p).forEach(function(s){f[s]=p[s]}),f;function f(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];var r=p.apply(this,s),e=s[s.length-1];return typeof r=="function"&&r!==e&&Object.keys(e).forEach(function(t){r[t]=e[t]}),r}}},{}],141:[function(g,D,C){D.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}]},{},[23])(23)})})(qe);var ht=qe.exports;class dt{constructor(_e,g,D){this.client=null,this.url=_e,this.config=g,this.subscribe=D}init(){this.client=ht.connect(this.url,this.config),this.client.on("connect",_e=>{this.onConnect&&this.onConnect(_e);for(const g of this.subscribe)this.client.subscribe(g,function(D){})}),this.client.on("message",(_e,g,D)=>{this.onMessage&&this.onMessage(_e,g.toString())}),this.client.on("reconnect",_e=>{this.onReconnect&&this.onReconnect(_e)}),this.client.on("error",_e=>{this.onError&&this.onError(_e)}),this.client.on("close",_e=>{this.onClose&&this.onClose(_e)})}publish(_e,g){this.client.publish(_e,typeof g=="string"?g:JSON.stringify(g))}end(){this.client.end()}}function pt(ye,_e,g){const D=new dt(ye,_e,g);return Ge(()=>{window.ononline=()=>{},window.onoffline=()=>{}}),Ze(()=>{D.end()}),D}const gt=ye=>(Ke("data-v-7ad6694d"),ye=ye(),Qe(),ye),_t=gt(()=>be("a",{href:"https://gitee.com/ch-ke/my-server"},"my-server",-1)),bt={class:"warp"},yt={class:"mqtt-status"},wt={class:"is-success-text"},mt={class:"is-error-text"},Et={class:"mqtt-warp"},vt={key:0,class:"mqtt-scroller-target"},St=["src"],At={class:"mqtt-scroller-content"},Rt={class:"is-push-time"},It={key:1,class:"mqtt-scroller-oneself"},Tt={class:"mqtt-scroller-content"},xt={class:"is-push-time"},Ct=["src"],Pt={class:"mqtt-textarea"},kt={class:"mqtt-textarea__box"},Ot={class:"mqtt-textarea__handle"},Mt={__name:"index",setup(ye){const _e=st(),g=ot(),D=pt("mqtt://localhost:1883",{connectTimeout:4e3,clientId:`${_e.visitorId}-${g.userInfo.accountId}-${Date.now()}`,username:"admin",password:"123456"},["message","online"]),C=Oe(),l=Oe([]),p=Ve({list:[],onlineNum:0,offlineNum:0}),y=Oe(0),f=Oe(""),s=Ve({viewEndIdx:0}),i=()=>{tt(()=>{C.value&&C.value.scrollToBottom()})},r=(x,I)=>{s.viewEndIdx=I},e=x=>{f.value+=x},t=()=>{},n=()=>{},o=()=>{},h=()=>{},w=()=>{},E=()=>{},v=async()=>{let x={visitorId:_e.visitorId,content:f.value,userInfo:g.userInfo};D.publish("client",x)},M=()=>{D.onMessage=(x,I)=>{let j=JSON.parse(I);if(x=="message"&&(l.value=l.value.concat(j.map(R=>{let T=_e.visitorId==R.visitorId,S=g.userInfo.accountId==R.userInfo.accountId;return{...R,role:T&&S?"ONESELF":"TARGET"}})),i()),x=="online"){p.list=j;let R=0,T=0;for(let S=0;S<p.list.length;S++)p.list[S].status==0&&T++,p.list[S].status==1&&R++;p.onlineNum=R,p.offlineNum=T}}},O=()=>{D.onError=x=>{y.value=0},D.onClose=x=>{y.value=0},D.onConnect=x=>{y.value=1}};return Ge(()=>{D.init(),M(),O()}),(x,I)=>{const j=Te("el-alert"),R=Te("c-empty"),T=Te("el-input"),S=Te("el-button"),A=Te("c-card");return xe(),Le(A,{isAffix:""},{header:Re(()=>[Ae(" mqtt "),_t,Ae(" 30fingerprintjs ")]),default:Re(()=>[be("div",bt,[be("div",yt,[be("span",null,[Ae(" "),be("span",wt,Ie(p.onlineNum),1)]),be("span",null,[Ae(" "),be("span",mt,Ie(p.offlineNum),1)])]),y.value==0?(xe(),Le(j,{key:0,title:"",type:"error"})):Me("",!0),be("div",Et,[l.value.length?Me("",!0):(xe(),Le(R,{key:0})),Ce(ze(rt),{ref_key:"scrollerRef",ref:C,class:"mqtt-scroller",items:l.value,"key-field":"id","min-item-size":52,"emit-update":!0,onResize:i,onUpdate:r},{default:Re(({item:b,index:z,active:k})=>[Ce(ze(nt),{class:et(["mqtt-scroller-item"]),"size-dependencies":[b.id],item:b,active:k,"data-index":z},{default:Re(()=>[b.role==="TARGET"?(xe(),$e("div",vt,[be("img",{src:b.userInfo.avatarUrl,alt:""},null,8,St),be("span",At,[be("span",Rt,Ie(b.pushTime),1),Ae(" "+Ie(b.content),1)])])):Me("",!0),b.role==="ONESELF"?(xe(),$e("div",It,[be("span",Tt,[be("span",xt,Ie(b.pushTime),1),Ae(" "+Ie(b.content),1)]),be("img",{src:b.userInfo.avatarUrl,alt:""},null,8,Ct)])):Me("",!0)]),_:2},1032,["size-dependencies","item","active","data-index"])]),_:1},8,["items"]),be("div",Pt,[be("div",kt,[Ce(T,{ref:"textArea",modelValue:f.value,"onUpdate:modelValue":I[0]||(I[0]=b=>f.value=b),type:"textarea",placeholder:"",resize:"none",rows:5,maxlength:1e3,onKeydown:[I[1]||(I[1]=ke(b=>t(b),["enter"])),I[2]||(I[2]=ke(b=>n(b),["up"])),I[3]||(I[3]=ke(b=>n(b),["down"])),I[4]||(I[4]=ke(b=>n(b),["left"])),I[5]||(I[5]=ke(b=>n(b),["right"]))],onInput:o,onBlur:h,onPasteCapture:w,onFocus:E},null,8,["modelValue"]),be("div",Ot,[Ce(ct,{onChange:e}),Ce(S,{type:"success",plain:"",onClick:I[6]||(I[6]=b=>v())},{default:Re(()=>[Ae(" ")]),_:1})])])])])])]),_:1})}}},Gt=Ye(Mt,[["__scopeId","data-v-7ad6694d"]]);export{Gt as default};
