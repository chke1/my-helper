import A from"./widget-list-69c6e9eb.js";import q from"./add-widget-popup-f51e79d2.js";import{_ as J,c as K,v as k,m as Q}from"./index-4158e2fb.js";import{a as i,c as R,w as L,x as j,y as n,W as s,Q as u,M as G,u as H,ag as c,v as X,U as F,aw as Y,ax as Z,p as $}from"./main/chunk-vue-32374f64.js";import"./vue-draggable-plus-647d122b.js";import"./message-box-4866a89d.js";import"./main/chunk-element-plus-b8cc1db0.js";import"./main/chunk-lodash-es-21c98b27.js";import"./select-widget-4c5321d2.js";import"./main/chunk-vue-router-c3f0a4ff.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";const ee=b=>(Y("data-v-4578ee39"),b=b(),Z(),b),le={class:"form-designer"},te={class:"form-widget"},oe={class:"form-widget__list"},ae={class:"form-widget__add"},re={class:"form-container"},pe={class:"form-container__handle"},ie=ee(()=>n("div",null,null,-1)),se={class:"form-container__preview"},de={class:"form-set"},ne={__name:"index",setup(b){const W=K(),e=o=>JSON.parse(JSON.stringify(o)),M={text:"",button:"",input:"",switch:1,select:"",cascader:[],checkbox:"",date:"",time:"",slider:0,slot:"","input-number":1,"checkbox-group":[],"radio-group":"","upload-img":"","upload-imgs":[],"upload-file":[]},l={data:{required:!0,label:"",prop:"",labelWidth:120,disabled:!1},rows:[{formType:"title",label:"基础设置",type:"divider"},{formType:"switch",prop:"required",label:"必填项:"},{formType:"input",prop:"label",label:"标签文本:"},{formType:"input",prop:"prop",label:"字段名称:"},{formType:"input-number",prop:"labelWidth",label:"标签宽度:"},{formType:"switch",prop:"disabled",label:"是否禁用:"},{formType:"input",prop:"tips",label:"提示语:"}]},y={title:{data:{label:"",type:"text"},rows:[{formType:"title",label:"基础设置",type:"divider"},{formType:"input",prop:"label",label:"标签文本:"},{formType:"select",prop:"type",label:"类型:",optionList:[{label:"分割线",value:"divider"},{label:"文字",value:"text"}]}]},text:{data:{...e(l.data)},rows:[...e(l.rows)]},input:{data:{...e(l.data),maxlength:200,placeholder:"请输入",clearable:!1,showWordLimit:!1,type:"text",rows:3},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"select",prop:"type",label:"类型:",optionList:[{label:"text",value:"text"},{label:"textarea",value:"textarea"}]},{formType:"input",prop:"placeholder",label:"占位文本:"},{formType:"switch",prop:"showWordLimit",label:"显示统计字数:"},{formType:"input-number",prop:"maxlength",label:"最大长度:"},{formType:"switch",prop:"clearable",label:"清空选项:"},{formType:"input-number",prop:"rows",label:"输入框行数:"}]},select:{data:{...e(l.data),placeholder:"",switch:!1,clearable:!1,collapseTags:!1,collapseTagsTooltip:!1},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"placeholder",label:"占位文本:"},{formType:"switch",prop:"multiple",label:"是否多选:"},{formType:"switch",prop:"clearable",label:"清空选项:"},{formType:"switch",prop:"collapseTags",label:"是否按文字显示:"},{formType:"title",label:"选项设置",type:"divider"}]},button:{data:{...e(l.data),text:!1,buttonText:"按钮",type:"primary"},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"select",prop:"type",label:"样式类型:",optionList:[{label:"primary",value:"primary"},{label:"success",value:"success"},{label:"info",value:"info"},{label:"warning",value:"warning"},{label:"danger",value:"danger"}]},{formType:"switch",prop:"text",label:"是否文字按钮:"},{formType:"input",prop:"buttonText",label:"按钮文本:"}]},"input-number":{data:{...e(l.data),step:1,controlsPosition:"",stepStrictly:!1,precision:2},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input-number",prop:"step",label:"步长:"},{formType:"switch",prop:"stepStrictly",label:"严格步进:"},{formType:"input-number",prop:"precision",label:"精度:"},{formType:"input-number",prop:"min",label:"最小值:"},{formType:"input-number",prop:"max",label:"最大值:"},{formType:"input-number",prop:"valueOnClear",label:"清空时显示的值:"},{formType:"select",prop:"controlsPosition",label:"控制按钮位置:",optionList:[{label:"默认",value:""},{label:"right",value:"right"}]}]},switch:{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"activeValue",label:"状态为on的值:"},{formType:"input",prop:"inactiveValue",label:"状态为off的值:"},{formType:"input",prop:"activeText",label:"状态为on的文字描述:"},{formType:"input",prop:"inactiveText",label:"状态为off的文字描述:"}]},cascader:{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"placeholder",label:"占位文本:"},{formType:"switch",prop:"clearable",label:"清空选项:"}]},"checkbox-group":{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input-number",prop:"min",label:"最小数量:"},{formType:"input-number",prop:"max",label:"最大数量:"}]},checkbox:{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"falseLabel",label:"选中的值:"},{formType:"input",prop:"trueLabel",label:"没有选中的值:"}]},"radio-group":{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"switch",prop:"border",label:"是否显示边框:"}]},date:{data:{...e(l.data),type:"date"},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"placeholder",label:"占位文本:"},{formType:"switch",prop:"clearable",label:"清空选项:"},{formType:"select",prop:"type",label:"显示类型:",optionList:[{label:"year",value:"year"},{label:"month",value:"month"},{label:"date",value:"date"},{label:"datetime",value:"datetime"},{label:"week",value:"week"},{label:"datetimerange",value:"datetimerange"},{label:"daterange",value:"daterange"}]}]},time:{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"placeholder",label:"占位文本:"},{formType:"switch",prop:"clearable",label:"清空选项:"},{formType:"switch",prop:"isRange",label:"是否为时间范围选择:"}]},slider:{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input-number",prop:"min",label:"最小值:"},{formType:"input-number",prop:"max",label:"最大值:"},{formType:"input-number",prop:"step",label:"步长:"},{formType:"switch",prop:"vertical",label:"垂直模式:"},{formType:"switch",prop:"range",label:"	是否开启选择范围:"},{formType:"switch",prop:"showStops",label:"是否显示间断点:"},{formType:"switch",prop:"showTooltip",label:"	是否显示提示信息:"}]},"upload-img":{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"width",label:"宽度:"},{formType:"input",prop:"height",label:"高度:"},{formType:"input",prop:"size",label:"图片大小/MB:"},{formType:"input",prop:"ratio",label:"图片上传比例:"},{formType:"input",prop:"desc",label:"图片描述:"},{formType:"switch",prop:"isPreview",label:"是否使用base64预览:"}]},"upload-imgs":{data:{...e(l.data)},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"width",label:"宽度:"},{formType:"input",prop:"height",label:"高度:"},{formType:"input",prop:"size",label:"图片大小/MB:"},{formType:"input",prop:"ratio",label:"图片上传比例:"},{formType:"input",prop:"desc",label:"图片描述:"},{formType:"switch",prop:"isPreview",label:"	是否使用base64预览:"}]},"upload-file":{data:{...e(l.data),showFileList:!0,drag:!0,multiple:!0},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"width",label:"宽度:"},{formType:"input",prop:"height",label:"高度:"},{formType:"input",prop:"size",label:"文件大小/MB:"},{formType:"input",prop:"desc",label:"文件描述:"},{formType:"switch",prop:"showFileList",label:"	是否显示已选择的列表:"},{formType:"switch",prop:"drag",label:"	是否使用拖拽上传:"},{formType:"switch",prop:"multiple",label:"	是否多选:"}]},slot:{data:{...e(l.data),slot:""},rows:[...e(l.rows),{formType:"title",label:"组件设置",type:"divider"},{formType:"input",prop:"slot",label:"插槽名称:"}]}},D=i(),z=i(),P=i(),T=i(""),w=(o,t)=>{for(let r=0;r<o.length;r++){const a=o[r];if(a.widgetId==T.value)return t&&t(o,r),a;if(a.layout)if(a.layout=="cols")for(let p of a.children)return w(p,t);else return w(a.children,t)}},f=R(()=>w(d.value)||{}),V=R(()=>{let o={};for(const t in v.value)o[t]=v.value[t],t=="width"&&(o[t]=v.value[t]+"%");return o}),I=i({}),d=i([{widgetId:k(),formType:"title",label:"基础设置"},{widgetId:k(),formType:"input",prop:"input",label:"输入框:"}]),h=i("form-set"),m=i({}),g=i([]),v=i({size:"default",labelWidth:120,labelPosition:"right",isDialog:!1,isFooter:!0,width:100}),B=i([{formType:"radio-group",prop:"size",label:"组件大小:",optionList:[{label:"small",value:"small"},{label:"default",value:"default"},{label:"large",value:"large"}]},{formType:"input-number",prop:"labelWidth",label:"标签宽度:"},{formType:"radio-group",prop:"labelPosition",label:"字段对齐:",optionList:[{label:"right",value:"right"},{label:"left",value:"left"}]},{formType:"slider",prop:"width",label:"表单宽度:"},{formType:"switch",prop:"isDialog",label:"是否弹窗表单:"},{formType:"switch",prop:"isFooter",label:"是否隐藏脚部:"}]),N=o=>{const t=M[o];return o=="select"&&f.value.multiple?[]:t},C=()=>{W.openModal("add-widget-popup",{type:"",data:[]})},E=(o,t,r)=>{if(r){t.forEach((a,p)=>{w(d.value,(_,x)=>{_.splice(x+p+1,0,a)})});return}d.value=d.value.concat(t)},O=(o,t)=>(f.value,t),U=(o,t)=>{T.value=o;const{formType:r="",layout:a=""}=t;if(!a){if(h.value="widget-set",!y[r]){m.value={},g.value=[];return}if(r&&y[r]){m.value=e(y[r].data),g.value=e(y[r].rows);for(let p in f.value)m.value[p]!=null&&(m.value[p]=f.value[p])}}};return L(()=>d.value,()=>{let o={},t=r=>{for(const a of r)if(a.prop&&Q(o,a.prop,N(a.formType)),a.children)if(a.layout=="cols")for(let p of a.children)t(p);else t(a.children)};t(d.value),I.value=o},{immediate:!0,deep:!0}),L(()=>m.value,()=>{for(let o in m.value)f.value[o]=O(o,m.value[o])},{deep:!0}),$("on-switch-form-item",U),(o,t)=>{const r=c("el-button"),a=c("c-form"),p=c("el-tab-pane"),_=c("el-tabs"),x=c("c-dialog");return X(),j("div",le,[n("div",te,[n("div",oe,[s(A,{formRows:d.value,"onUpdate:formRows":t[0]||(t[0]=S=>d.value=S),widgetId:T.value},null,8,["formRows","widgetId"])]),n("div",ae,[s(r,{size:"large",type:"primary",plain:"",onClick:C},{default:u(()=>[F("+添加")]),_:1})])]),n("div",re,[n("div",pe,[ie,n("div",null,[s(r,{text:"",type:"primary"},{default:u(()=>[F("导出代码")]),_:1})])]),n("div",se,[s(a,G({class:"form-container__form",ref_key:"previewFormRef",ref:D},H(V),{model:I.value,rows:d.value}),null,16,["model","rows"])])]),n("div",de,[s(_,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=S=>h.value=S)},{default:u(()=>[s(p,{label:"表单设置",name:"form-set"},{default:u(()=>[s(a,{ref_key:"formSetRef",ref:z,"label-width":"",width:"100%",size:"small",isFooter:!1,model:v.value,rows:B.value},null,8,["model","rows"])]),_:1}),s(p,{label:"组件设置",name:"widget-set"},{default:u(()=>[s(a,{ref_key:"widgetSetRef",ref:P,"label-width":"",width:"100%",size:"small",isFooter:!1,model:m.value,rows:g.value},null,8,["model","rows"])]),_:1})]),_:1},8,["modelValue"])]),s(x,{title:"添加组件",width:800,name:"add-widget-popup"},{default:u(()=>[s(q,{onOnEnd:E})]),_:1})])}}},xe=J(ne,[["__scopeId","data-v-4578ee39"]]);export{xe as default};
