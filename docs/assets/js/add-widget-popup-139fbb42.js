import g from"./select-widget-bded973c.js";import{_ as U,c as C,v as x}from"./index-00d4ac3a.js";import{a as V,ag as m,v as s,x as c,W as r,Q as p,F as y,a8 as b,P as w,y as M,U as k}from"./main/chunk-vue-32374f64.js";import"./main/chunk-element-plus-b8cc1db0.js";import"./main/chunk-lodash-es-21c98b27.js";import"./main/chunk-vue-router-c3f0a4ff.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";const W={key:0,class:"cols-group"},B={class:"dialog-footer"},L={__name:"add-widget-popup",emits:["on-end"],setup(S,{emit:v}){const i=C(),a=V(""),n=V([{title:"默认",layout:"",data:[]},{title:"item",layout:"item",data:[]},{title:"flex",layout:"flex",data:[]},{title:"cols",layout:"cols",data:[[],[]]},{title:"rows",layout:"rows",data:[],extraFields:{label:"rows多行:"}},{title:"rows-flex",layout:"rows-flex",data:[],extraFields:{label:"rows-flex多行:"}}]),I=async()=>{i.closeModal()},h=async()=>{const{data:d=[]}=n.value.find(t=>t.layout==a.value)||{},o=t=>{for(const l of t)l.widgetId||(l.widgetId=x())};a.value=="cols"?d.forEach(t=>o(t)):o(d);const{widgetId:u}=i.getModal();if(a.value=="")v("on-end",a.value,d,u);else{const{extraFields:t={}}=n.value.find(e=>e.layout==a.value)||{},l=[{widgetId:x(),layout:a.value,children:d,...t}];v("on-end",a.value,l,u)}i.closeModal()};return(()=>{const{data:d,layout:o="",type:u,widgetId:t}=i.getModal();if(u=="edit"){a.value=o;const l=n.value.findIndex(e=>e.layout==o);n.value[l].data=[d]}t&&(a.value="",n.value=[{title:"默认",layout:"",data:[]}])})(),(d,o)=>{const u=m("el-tab-pane"),t=m("el-tabs"),l=m("el-button");return s(),c(y,null,[r(t,{modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),type:"border-card",class:"demo-tabs"},{default:p(()=>[(s(!0),c(y,null,b(n.value,e=>(s(),w(u,{key:e,label:e.title,name:e.layout},{default:p(()=>[e.layout=="cols"?(s(),c("div",W,[(s(!0),c(y,null,b(e.data,(f,_)=>(s(),c("div",{class:"cols-group__item",key:_},[r(g,{modelValue:e.data[_],"onUpdate:modelValue":F=>e.data[_]=F},null,8,["modelValue","onUpdate:modelValue"])]))),128))])):(s(),w(g,{key:1,modelValue:e.data,"onUpdate:modelValue":f=>e.data=f},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"]),M("div",B,[r(l,{plain:"",onClick:I},{default:p(()=>[k("取 消")]),_:1}),r(l,{type:"primary",onClick:h},{default:p(()=>[k("确 定")]),_:1})])],64)}}},z=U(L,[["__scopeId","data-v-31538247"]]);export{z as default};
