import{d as O,ag as f,v as a,x as F,a8 as U,F as A,P as k,Q as s,S as V,u as e,T as $,y as c,V as q,W as n,U as L,a as I,c as C,w as ee,n as K,j as Q,K as te,_ as ne,J as se,G as le,aw as W,ax as Y,aa as oe,Y as ae,aB as ce}from"./main/chunk-vue-32374f64.js";import{_ as z,a as ue,u as P,s as G,b as re,c as ie,f as de,e as _e,d as me,g as X,h as pe,i as fe,p as he,j as ve,T as be,U as xe,r as ge,k as ke}from"./index-4f08acb7.js";import{i as J}from"./menu-icons-ee083b81.js";import{b as M,u as B}from"./main/chunk-vue-router-c3f0a4ff.js";import{A as ye}from"./index-bf199d91.js";import{T as Se}from"./theme-switch-a36dfcff.js";import{u as Fe}from"./index-43ed2021.js";import{u as we}from"./index-ad24bafc.js";import"./main/chunk-element-plus-b8cc1db0.js";import"./main/chunk-lodash-es-21c98b27.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";const Re=O({name:"menu-item"}),Ce=Object.assign(Re,{props:{menus:{type:Array,default:()=>[]}},setup(h){return(r,_)=>{const x=f("el-icon"),v=f("menu-item",!0),i=f("el-sub-menu"),g=f("el-menu-item");return a(!0),F(A,null,U(h.menus,u=>(a(),F(A,{key:u.path},[u.children&&u.children.length?(a(),k(i,{index:u.path,key:u.path},{title:s(()=>[u.meta.icon?(a(),k(x,{key:0,size:16},{default:s(()=>[(a(),k(V(e(J)[u.name])))]),_:2},1024)):$("",!0),c("span",null,q(u.meta.title),1)]),default:s(()=>[n(v,{menus:u.children},null,8,["menus"])]),_:2},1032,["index"])):(a(),k(g,{index:u.path,key:u.path},{title:s(()=>[L(q(u.meta.title),1)]),default:s(()=>[u.meta.icon?(a(),k(x,{key:0,size:16},{default:s(()=>[(a(),k(V(e(J)[u.name])))]),_:2},1024)):$("",!0)]),_:2},1032,["index"]))],64))),128)}}});const Ee={class:"c-menu"},Te={class:"logo"},Ie={class:"logo-icon"},$e=["innerHTML"],qe={key:0,id:"menuId"},Ae=O({name:"c-menu"}),ze=Object.assign(Ae,{setup(h){const r=ue(),_=P(),x=M(),v=B(),i=I(),g=I(),u=I(""),b=C(()=>r.menuList),E=C(()=>{if(x.meta.menu==!1){let t=x.meta.currentCrumb.findLastIndex(l=>l.menu!==!1);return x.meta.currentCrumb[t].path}else return x.path}),m=C(()=>!_.isMenuExpand),y=(t,l)=>{if(!t)return l([]);let o=[],d=p=>{for(const S of p)if(d(S.children||[]),S.meta.title.indexOf(t)!=-1){let R=`<span class='is-primary-text'>${t}</span>`,T=S.meta.title.replace(new RegExp(t,"g"),R);o.push({value:S.meta.title,rich:T,path:S.path})}};d(r.menuList),l(o)},w=t=>{v.push({path:t.path})};return ee(()=>_.menuExpandData,(t,l)=>{if(l.length>0){let o=t.length>l.length;for(let d of o?t:l)(o?l:t).includes(d)||K(()=>{o?i.value.open(d):i.value.close(d)})}}),Q(()=>{K(()=>{const t=document.querySelector(".el-menu-item.is-active"),l=document.getElementById("menuId"),{top:o}=(l==null?void 0:l.getBoundingClientRect())||{},{top:d}=(t==null?void 0:t.getBoundingClientRect())||{},p=d-o;g.value.setScrollTop(p)})}),(t,l)=>{const o=f("el-icon"),d=f("el-autocomplete"),p=f("el-menu"),S=f("el-scrollbar");return a(),F("div",Ee,[c("div",Te,[c("div",Ie,q(e(_).isMenuExpand?"logo":""),1)]),c("div",{class:te(["autocomplete",!e(_).isMenuExpand&&"autocomplete-collapse"])},[e(_).isMenuExpand?(a(),k(d,{key:1,modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=R=>u.value=R),placeholder:"搜索","fetch-suggestions":y,onSelect:w},{prefix:s(()=>[n(o,null,{default:s(()=>[n(e(G))]),_:1})]),default:s(({item:R})=>[c("div",{innerHTML:R.rich},null,8,$e)]),_:1},8,["modelValue"])):(a(),k(o,{key:0},{default:s(()=>[n(e(G))]),_:1}))],2),n(S,{ref_key:"scrollbarRef",ref:g,class:"scrollbar-warp"},{default:s(()=>[e(b).length?(a(),F("div",qe,[n(p,{ref_key:"menuRef",ref:i,router:"","default-active":e(E),"default-openeds":e(_).menuExpandData,collapse:e(m)},{default:s(()=>[n(Ce,{menus:e(b)},null,8,["menus"])]),_:1},8,["default-active","default-openeds","collapse"])])):$("",!0)]),_:1},512)])}}}),Me=z(ze,[["__scopeId","data-v-d26891ef"]]);function Z(h,r,_){Q(()=>h.addEventListener(r,_)),ne(()=>h.removeEventListener(r,_))}const D=h=>(W("data-v-371f76f3"),h=h(),Y(),h),Ve={class:"header"},Le={class:"header-left"},Pe={key:0,class:"header-left__crumb"},Be={class:"header-right"},Oe={class:"header-right-theme"},Ue={class:"header-right-setting"},De={class:"header-right-screen"},je={class:"header-right-userinfo"},Ne={class:"header-right-userinfo__wrap"},He=["src"],Ke={class:"header-right-userinfo__list"},Ge=D(()=>c("span",null,"个人中心",-1)),Je=D(()=>c("span",null,"项目地址",-1)),Qe=D(()=>c("span",null,"退出登录",-1)),We={__name:"index",setup(h){const r=P(),_=re(),x=ie(),v=B();M();const i=I(!1),g=Fe({storageKey:be,valueDark:"dark",valueLight:"light"});Z(document,"fullscreenchange",()=>{i.value=!i.value});const u=()=>{let o=r.isMenuExpand==0?1:0;r.setSingleState("isMenuExpand",o)},b=()=>{x.openModal("setting-drawer")},E=we(g),m=o=>{const{x:d,y:p}=o;document.documentElement.style.setProperty("--dark-clip-x",d+"px"),document.documentElement.style.setProperty("--dark-clip-y",p+"px"),document.startViewTransition?document.startViewTransition(()=>{document.documentElement.classList.toggle("dark")}):document.documentElement.classList.toggle("dark")},y=()=>{i.value?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():document.body.requestFullscreen?document.body.requestFullscreen():document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.msRequestFullscreen&&document.body.msRequestFullscreen()},w=()=>{v.push("/system/user")},t=()=>{window.open("https://gitee.com/ch-ke/my-helper","_blank")},l=()=>{localStorage.removeItem(xe),ge(),v.push("/")};return(o,d)=>{const p=f("el-icon"),S=f("c-popover"),R=f("c-drawer");return a(),F(A,null,[c("header",Ve,[c("div",Le,[n(p,{onClick:d[0]||(d[0]=T=>u()),class:"header-left__icon"},{default:s(()=>[(a(),k(V(e(r).isMenuExpand?e(de):e(_e))))]),_:1}),o.$slots.breadcrumb?(a(),F("div",Pe,[se(o.$slots,"breadcrumb",{},void 0,!0)])):$("",!0)]),c("div",Be,[c("div",Oe,[n(Se,{modelValue:e(g),"onUpdate:modelValue":d[1]||(d[1]=T=>le(g)?g.value=T:null),onOnChange:e(E),onOnRect:m},null,8,["modelValue","onOnChange"])]),c("div",Ue,[n(p,{onClick:b,size:18},{default:s(()=>[n(e(me))]),_:1})]),c("div",De,[n(p,{onClick:y,size:18},{default:s(()=>[n(e(X))]),_:1})]),c("div",je,[n(S,{trigger:"hover","popper-style":"min-width: auto;width: auto;padding: 0"},{reference:s(()=>{var T,j,N,H;return[c("div",Ne,[c("img",{src:(j=(T=e(_))==null?void 0:T.userInfo)==null?void 0:j.avatarUrl},null,8,He),c("span",null,q(((H=(N=e(_))==null?void 0:N.userInfo)==null?void 0:H.username)??"-"),1),n(p,null,{default:s(()=>[n(e(pe))]),_:1})])]}),default:s(()=>[c("ul",Ke,[c("li",{onClick:w},[n(p,{size:14},{default:s(()=>[n(e(fe))]),_:1}),Ge]),c("li",{onClick:t},[n(p,{size:14},{default:s(()=>[n(e(he))]),_:1}),Je]),c("li",{onClick:l},[n(p,{size:14},{default:s(()=>[n(e(ve))]),_:1}),Qe])])]),_:1})])])]),n(R,{title:"设置",size:520,name:"setting-drawer"},{default:s(()=>[n(ye)]),_:1})],64)}}},Ye=z(We,[["__scopeId","data-v-371f76f3"]]);const Xe=h=>(W("data-v-8c2821a7"),h=h(),Y(),h),Ze=Xe(()=>c("span",null,"学习使用，联系方式：2735238097@qq.com",-1)),et={__name:"index",setup(h){const r=window.version;return(_,x)=>(a(),F("footer",null,[Ze,c("span",null,"当前版本："+q(e(r)),1)]))}},tt=z(et,[["__scopeId","data-v-8c2821a7"]]);const nt={class:"tabs"},st={class:"tabs-left"},lt={key:0,class:"tabs-right"},ot=O({name:"tabs"}),at=Object.assign(ot,{setup(h){const r=M(),_=B(),x=P(),v=I(r.fullPath),i=C(()=>x.keepAliveInclude),g=m=>{x.setSingleState("keepAliveInclude",m||i.value)},u=m=>{_.push((m==null?void 0:m.paneName)||v.value)},b=m=>{if(i.value.length<=1)return;let y=i.value.filter(w=>w.fullPath!==m);if(v.value==m){let w=i.value.findIndex(t=>t.fullPath==m);v.value=i.value[w-1].fullPath,u()}g(y)},E=()=>{let m=i.value.filter(y=>y.fullPath==v.value);g(m)};return _.afterEach(m=>v.value=m.fullPath),(m,y)=>{const w=f("el-tab-pane"),t=f("el-tabs"),l=f("el-button");return a(),F("div",nt,[c("div",st,[n(t,{modelValue:v.value,"onUpdate:modelValue":y[0]||(y[0]=o=>v.value=o),type:"card",closable:e(i).length>1,onTabClick:u,onTabRemove:b},{default:s(()=>[(a(!0),F(A,null,U(e(i),o=>(a(),k(w,{label:o.label,key:o.fullPath,name:o.fullPath},null,8,["label","name"]))),128))]),_:1},8,["modelValue","closable"])]),e(i).length>1?(a(),F("div",lt,[n(l,{type:"primary",text:"",onClick:E},{default:s(()=>[L("清空")]),_:1})])):$("",!0)])}}}),ct=z(at,[["__scopeId","data-v-9b508b55"]]),ut={__name:"index",setup(h){const r=M();return(_,x)=>{const v=f("el-breadcrumb-item"),i=f("el-breadcrumb");return a(),k(i,{class:"c-breadcrumb"},{default:s(()=>[(a(!0),F(A,null,U(e(r).meta.currentCrumb,(g,u)=>(a(),k(v,{key:u},{default:s(()=>[L(q(g.title),1)]),_:2},1024))),128))]),_:1})}}};const rt={class:"layout"},it={class:"article"},dt={key:0,class:"article-tabs"},_t={__name:"index",setup(h){const r=P(),_=B(),x=M(),v=C(()=>r.keepAliveInclude.filter(l=>l.keepAlive).map(l=>l.name)||[]),i=C(()=>r.keepAliveIncludeMax||0),g=C(()=>!!r.isTabs),u=C(()=>!!r.isBreadcrumb),b=I(),E=()=>{_.back()},m=t=>{var p,S;let l=r.keepAliveInclude,o=l.findIndex(R=>R.path==t.path),d={label:(p=t.meta)==null?void 0:p.title,path:t.path,fullPath:t.fullPath,name:t.name,keepAlive:!!((S=t.meta)!=null&&S.keepAlive)};o==-1?l.push(d):l[o]=d,r.setSingleState("keepAliveInclude",l)};m(x);const y=I(!1);Z(document,"fullscreenchange",()=>{y.value=!y.value});const w=()=>{y.value?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():b.value.requestFullscreen?b.value.requestFullscreen():b.value.webkitRequestFullScreen?b.value.webkitRequestFullScreen():b.value.mozRequestFullScreen?b.value.mozRequestFullScreen():b.value.msRequestFullscreen&&b.value.msRequestFullscreen()};return _.afterEach(t=>{b.value&&b.value.scrollTo({top:0,left:0,behavior:"smooth"}),t.path!="/login"&&t.path!="/"&&m(t)}),(t,l)=>{const o=f("el-button"),d=f("el-icon"),p=f("router-view");return a(),F("div",rt,[n(Me),c("div",it,[n(Ye,null,oe({_:2},[e(u)?{name:"breadcrumb",fn:s(()=>[n(ut)]),key:"0"}:void 0]),1024),e(g)?(a(),F("div",dt,[e(x).meta.menu==!1?(a(),k(o,{key:0,class:"article-tabs__back",type:"primary",text:"",icon:e(ke),onClick:E},{default:s(()=>[L(" 返回 ")]),_:1},8,["icon"])):$("",!0),n(ct),n(d,{onClick:w,size:18,class:"article__fullscreen"},{default:s(()=>[n(e(X))]),_:1})])):$("",!0),c("section",{class:"article-view",ref_key:"routerViewRef",ref:b},[n(p,null,{default:s(({Component:S})=>[n(ae,{name:`slide-${e(r).transitionSlide}`,mode:"out-in"},{default:s(()=>[(a(),k(ce,{include:e(v),max:e(i)},[(a(),k(V(S)))],1032,["include","max"]))]),_:2},1032,["name"])]),_:1}),n(tt)],512)])])}}},wt=z(_t,[["__scopeId","data-v-2938fdd7"]]);export{wt as default};
