import{c as S,q as C,t as v,m as T,w as K,x as k}from"./index-4158e2fb.js";import{E as P}from"./main/chunk-element-plus-b8cc1db0.js";import{r as $,$ as E,d as V,a as O,ag as q,v as H,P as I,Q as L,W as N,u as x}from"./main/chunk-vue-32374f64.js";import"./main/chunk-vue-router-c3f0a4ff.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";import"./main/chunk-lodash-es-21c98b27.js";const Q=S();function W({initParams:g={},routeQuery:j={},setMaps:D={},getMaps:m={}}={}){const p=C,d=C.currentRoute.value,{id:u="id",copy:_="copy",copyKey:b="name"}=j;let i=d.query[u],h=d.query[_];const a=$({loading:!1,formData:g,[u]:i}),w=()=>({push:o=>p.push(o),replace:o=>p.replace(o)}),y=(o={},c={},n={})=>{let s=(e=o,r=c)=>{if(!v(e,"Object")||!v(r,"Object"))return;let f=Object.keys(r);if(!Object.keys(e).length||!f.length)return;let l={};for(const t in e){if(!f.includes(t)){l[t]=e[t];continue}let M=v(e[t],"Object");l[t]=M?s(e[t],r[t]):r[t]}for(let t in n)T(l,t,K(c,n[t]));return l};return s()},A=async({api:o,params:c={},fillMaps:n=m,callBack:s})=>{if(!o||["",void 0,null].includes(i))return;a.loading=!0;let e=await o({[u]:i,...c}).catch(r=>r);if(a.loading=!1,(e==null?void 0:e.code)==0){if(s){let r=s(e);r&&(e=r)}h&&(e.data[b]+="--复制"),a.formData=y(a.formData,e.data||{},n)}},F=({fillParams:o={},callBack:c})=>{let n=Q.getModal();if(c){let s=c(n);s&&(n=s)}h&&(n[b]+="--复制"),a.formData=y(a.formData,n||{},m)},R=async({createApi:o,updateApi:c,params:n={},fillMaps:s=D,callBack:e}={})=>{let r=["",void 0,null].includes(i);a.loading=!0;let f=y(g,{...a.formData,...n},s),l;if(r?l=await o(f).catch(t=>t):l=await c({[u]:i,...f}).catch(t=>t),a.loading=!1,(l==null?void 0:l.code)==0){if(e){e(l);return}P.success("操作成功"),p.back()}};return{...E(a),routerHandle:w,fillForm:y,queryDetailsData:A,queryModalData:F,submitForm:R}}const z=V({name:"el-encap.table-template.details-page"}),ee=Object.assign(z,{emits:["refresh"],setup(g,{emit:j}){const{loading:D,formData:m,queryDetailsData:p,submitForm:d}=W({initParams:{input1:"",input2:"",input3:"",input4:"",select:1,select1:"123123----------",name:"",map:{abc:"abc123123"},ke:{}},getMaps:{"test.abc":"test.abc",chen:"test.abc",input1:"test.abc",chen1:"select1"},setMaps:{abc:"map.abc"}});p({api:k,callBack:i=>({...i,data:{name:"123123123",age:[{}],six:12,input1:"123123123",input2:"2344345",input3:"4566",input4:"678678",select1:2,select:2,test:{input:"-------------========",select:2,abc:"CAD发abcabcabcabc都发CAD发都发"}}})});const u=O([{formType:"title",label:"基础设置"},{formType:"input",prop:"name",label:"名称:"},{formType:"input",prop:"input1",label:"栏目一:"},{formType:"input",prop:"input2",label:"栏目二:"},{formType:"input",prop:"input3",label:"栏目三:"},{formType:"input",prop:"input4",label:"栏目四:"},{formType:"select",prop:"select",label:"栏目五:",optionList:[{label:"类型1",value:1},{label:"类型2",value:2}],optionProps:{label:"label",value:"value"}},{formType:"input",prop:["test","abc"],label:"测试:"}]),_=O(null),b=async()=>{d({createApi:k,updateApi:k})};return(i,h)=>{const a=q("c-form"),w=q("c-card");return H(),I(w,null,{default:L(()=>[N(a,{ref_key:"formRef",ref:_,"label-width":"100px",width:"80%",loading:x(D),model:x(m),rows:u.value,onSubmit:b},null,8,["loading","model","rows"])]),_:1})}}});export{ee as default};
