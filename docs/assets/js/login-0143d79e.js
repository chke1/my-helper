import{s as C}from"./stars-bg-edd5da07.js";import{_ as z,u as j,U as B,R as b,l as N}from"./index-027c1f63.js";import{u as O}from"./main/chunk-vue-router-c3f0a4ff.js";import{E as L}from"./main/chunk-element-plus-b8cc1db0.js";import{d as M,r as U,a as _,x as q,W as s,y as i,Q as r,ag as l,v as A,U as I,aw as D,ax as W}from"./main/chunk-vue-32374f64.js";import"./index-56d55fe4.js";import"./index-ad24bafc.js";import"./main/chunk-fingerprintjs-cb838e3e.js";import"./main/chunk-sortablejs-be94e56d.js";import"./main/chunk-lodash-es-21c98b27.js";const V=n=>(D("data-v-911fa460"),n=n(),W(),n),F={class:"login"},G={class:"login-form"},J=V(()=>i("h2",{class:"login-form-title"},"登录",-1)),Q={class:"login-form-handle"},T=V(()=>i("span",{class:"forgot-password"},"忘记密码",-1)),$=M({name:"login"}),H=Object.assign($,{setup(n){const S=j(),x=O(),g=[{id:1,username:"root",password:"123456",avatarUrl:"/my-helper/account-list/ic-account-avatar1.jpg"},{id:2,username:"admin",password:"123456",avatarUrl:"/my-helper/account-list/ic-account-avatar2.jpg"},{id:3,username:"部门",password:"123456",avatarUrl:"/my-helper/account-list/ic-account-avatar3.jpg"},{id:4,username:"员工",password:"123456",avatarUrl:"/my-helper/account-list/ic-account-avatar4.jpg"}],e=U({accountId:"",username:"",password:"",avatarUrl:""}),c=_("0"),f=()=>{let a=S.lastPagePath;x.push(["","/","login"].includes(a)?"/index":a),L.success("登录成功")},y=U({username:[{required:!0,message:"请输入名称",trigger:"change"}],password:[{required:!0,message:"请输入密码",trigger:"change"}]}),v=()=>{let a=g.find(o=>o.id==e.accountId)||{};e.username=a.username,e.password=a.password,e.avatarUrl=a.avatarUrl},P=()=>{localStorage.setItem(b,c.value)},w=_(),R=_(!1),E=()=>{w.value.validate(async a=>{a&&(await N(e),f())})};return(()=>{const a=localStorage.getItem(B),o=localStorage.getItem(b);if(a){const{accountId:m,username:d,password:u,avatarUrl:p}=JSON.parse(a);e.accountId=m,e.username=d,e.password=u,e.avatarUrl=p,f()}else e.accountId=1,v();c.value=o||"0"})(),(a,o)=>{const m=l("c-select"),d=l("el-input"),u=l("el-form-item"),p=l("el-checkbox"),h=l("el-button"),k=l("el-form");return A(),q("div",F,[s(C,{class:"stars-bg"}),i("div",G,[J,s(k,{size:"large",model:e,rules:y,"label-width":"0",ref_key:"formRef",ref:w},{default:r(()=>[s(u,{prop:"username"},{default:r(()=>[s(d,{size:"large",placeholder:"请输入名称",modelValue:e.username,"onUpdate:modelValue":o[1]||(o[1]=t=>e.username=t)},{prepend:r(()=>[s(m,{style:{width:"90px"},modelValue:e.accountId,"onUpdate:modelValue":o[0]||(o[0]=t=>e.accountId=t),placeholder:"账号",size:"large",optionList:g,optionProps:{label:"username",value:"id",imageUrl:"avatarUrl"},onChange:v},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),s(u,{prop:"password"},{default:r(()=>[s(d,{size:"large",placeholder:"请输入密码","show-password":"",modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=t=>e.password=t)},null,8,["modelValue"])]),_:1}),i("div",Q,[s(p,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=t=>c.value=t),label:"记住密码","true-label":"1","false-label":"0",onChange:P},null,8,["modelValue"]),T]),s(h,{class:"button",type:"primary",size:"large",loading:R.value,onClick:E},{default:r(()=>[I(" 登 录 ")]),_:1},8,["loading"]),s(h,{class:"button",size:"large"},{default:r(()=>[I(" 注 册 ")]),_:1})]),_:1},8,["model","rules"])])])}}}),ne=z(H,[["__scopeId","data-v-911fa460"]]);export{ne as default};
